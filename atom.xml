<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é±¼ä¸å‰ç«¯ğŸŸ</title>
  
  <subtitle>æ‘¸é±¼å’Œå·¥ä½œä¸å¯å¾—å…¼~</subtitle>
  <link href="https://zlinni.github.io/atom.xml" rel="self"/>
  
  <link href="https://zlinni.github.io/"/>
  <updated>2022-04-30T14:53:00.728Z</updated>
  <id>https://zlinni.github.io/</id>
  
  <author>
    <name>Zlinni</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä»0åˆ°1TypeScript</title>
    <link href="https://zlinni.github.io/posts/2090815300/"/>
    <id>https://zlinni.github.io/posts/2090815300/</id>
    <published>2022-04-26T14:23:37.000Z</published>
    <updated>2022-04-30T14:53:00.728Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>TSå…¥é—¨æ•™ç¨‹ï¼Œä»0åˆ°1</p></div><h1 id="TSä»‹ç»"><a href="#TSä»‹ç»" class="headerlink" title="TSä»‹ç»"></a>TSä»‹ç»</h1><h2 id="TSæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#TSæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="TSæ˜¯ä»€ä¹ˆï¼Ÿ"></a>TSæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>tsæ˜¯jsçš„è¶…é›†ï¼Œè¶…é›†æŒ‡çš„æ˜¯ä»–åŒ…å«äº†eså‰é¢æ‰€æœ‰ç‰ˆæœ¬çš„å†…å®¹å¹¶æœ‰è‡ªå·±çš„æ‹“å±•ã€‚</p><h2 id="TSåšåˆ°äº†ä»€ä¹ˆï¼Ÿ"><a href="#TSåšåˆ°äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="TSåšåˆ°äº†ä»€ä¹ˆï¼Ÿ"></a>TSåšåˆ°äº†ä»€ä¹ˆï¼Ÿ</h2><p>é¦–å…ˆjsæ˜¯å¼±ç±»å‹ï¼Œå¾ˆå¤šé”™è¯¯åœ¨è¿è¡Œçš„æ—¶å€™æ‰èƒ½å‘ç°ã€‚<br>tsä½¿ç”¨äº†ä»–çš„é™æ€ç±»å‹æ£€æµ‹æœºåˆ¶ï¼ˆåé¢æåŠï¼‰å¸®åŠ©æˆ‘ä»¬ææ—©å‘ç°é”™è¯¯ã€‚</p><h2 id="TSç‰¹ç‚¹"><a href="#TSç‰¹ç‚¹" class="headerlink" title="TSç‰¹ç‚¹"></a>TSç‰¹ç‚¹</h2><ol><li>æ”¯æŒæœ€æ–°çš„jsç‰¹æ€§ï¼ˆè¶…é›†ï¼‰</li><li>é™æ€ä»£ç æ£€æŸ¥ï¼ˆè§£å†³å¼±ç±»å‹ï¼‰</li><li>æœ‰å…¶ä»–åç«¯è¯­è¨€çš„ç‰¹æ€§ï¼ˆæšä¸¾ï¼Œæ³›å‹ï¼Œç±»å‹è½¬åŒ–ï¼Œå‘½åç©ºé—´ï¼Œå£°æ˜æ–‡ä»¶â€¦)</li></ol><h1 id="é™æ€ç±»å‹æ£€æµ‹"><a href="#é™æ€ç±»å‹æ£€æµ‹" class="headerlink" title="é™æ€ç±»å‹æ£€æµ‹"></a>é™æ€ç±»å‹æ£€æµ‹</h1><p>ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¿™ä¸ªé—®é¢˜ï¼Ÿ<br>jsåœ¨è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œéœ€è¦æˆ‘ä»¬äººä¸ºçš„çŸ¥é“ä»£ç çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Œæ‰èƒ½åšå‡ºå“åº”çš„æ“ä½œï¼ˆæ‰§è¡Œå‡½æ•°æ‰èƒ½çŸ¥é“ï¼‰ã€‚ä¸èƒ½åœ¨æˆ‘ä»¬ä¹¦å†™çš„è¿‡ç¨‹å°±ç«‹åˆ»ç»™å‡ºç¼–è¯‘é”™è¯¯çš„åé¦ˆã€‚</p><p>tså°±èƒ½åœ¨ï¼ˆç¼–è¯‘ä¹‹å‰ï¼‰å‘Šè¯‰æˆ‘ä»¬</p><h2 id="éå¼‚å¸¸æ•…éšœ"><a href="#éå¼‚å¸¸æ•…éšœ" class="headerlink" title="éå¼‚å¸¸æ•…éšœ"></a>éå¼‚å¸¸æ•…éšœ</h2><p>tsä¸ä»…èƒ½å‘Šè¯‰æˆ‘ä»¬å“ªäº›å‡½æ•°çš„å€¼é”™è¯¯ï¼Œè¿˜èƒ½è¯†åˆ«ç±»ä¼¼äºé”™åˆ«å­—ï¼Œæœªè°ƒç”¨å‡½æ•°å’ŒåŸºæœ¬é€»è¾‘é”™è¯¯<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user=&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;ber&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">user.location</span><br></pre></td></tr></table></figure><br>ä¸Šé¢è¿™æ®µä»£ç åœ¨jsä¸­è¿”å›<code>undefined</code>,è€Œåœ¨tsä¸­æå‰å‘Šè¯‰ä½ è¿™ä¸ªå˜é‡æ²¡æœ‰å®šä¹‰ä¸èƒ½ä½¿ç”¨</p><p>é”™åˆ«å­—ï¼šå‘Šè¯‰ä½ å¯¹è±¡ä¸Šé¢æŸä¸ªæ–¹æ³•æ‹¼å†™é”™è¯¯ç­‰</p><p>æœªè°ƒç”¨å‡½æ•°ï¼šå‡½æ•°æ²¡æœ‰åŠ æ‹¬å·å°±ä½¿ç”¨ï¼Œä¼šæç¤ºæœªè°ƒç”¨é”™è¯¯</p><p>é€»è¾‘é”™è¯¯ï¼šæ¯”å¦‚åªæœ‰ä¸¤ç§æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œifä¸€ä¸ªæ¡ä»¶åˆelseifå¦å¤–ä¸€ä¸ªæ¡ä»¶ï¼Œå°±ä¼šæŠ¥é”™</p><h1 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h1><h2 id="å®‰è£…ts"><a href="#å®‰è£…ts" class="headerlink" title="å®‰è£…ts"></a>å®‰è£…ts</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g typescript</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…ts-node"><a href="#å®‰è£…ts-node" class="headerlink" title="å®‰è£…ts-node"></a>å®‰è£…ts-node</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g ts-node</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºä¸€ä¸ªtsconfig-json"><a href="#åˆ›å»ºä¸€ä¸ªtsconfig-json" class="headerlink" title="åˆ›å»ºä¸€ä¸ªtsconfig.json"></a>åˆ›å»ºä¸€ä¸ª<code>tsconfig.json</code></h2><p>è§£å†³å˜é‡åorå‡½æ•°åç›¸åŒæŠ¥é”™çš„é—®é¢˜<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure></p><h2 id="å®˜æ–¹playground"><a href="#å®˜æ–¹playground" class="headerlink" title="å®˜æ–¹playground"></a>å®˜æ–¹playground</h2><p>å®˜æ–¹æä¾›çš„tsåœ¨çº¿ç¼–è¯‘äº‘ç¯å¢ƒâ€”<a href="">playground</a></p><h1 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h1><p>åœ¨å¯¹åº”çš„ç›®å½•ç»ˆç«¯è¿è¡Œ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc hello.ts</span><br></pre></td></tr></table></figure></p><p>å¾—åˆ°å¯¹åº”çš„jsæ–‡ä»¶,æ‰§è¡Œnodeå‘½ä»¤å°±å¯ä»¥æ‰§è¡Œjsä»£ç </p><h2 id="tså’Œjsçš„å†²çª"><a href="#tså’Œjsçš„å†²çª" class="headerlink" title="tså’Œjsçš„å†²çª"></a>tså’Œjsçš„å†²çª</h2><div class="note primary flat"><p>å½“æˆ‘ä»¬å°†tsä»£ç ä¿®æ”¹ä¸ºä¸€ä¸ªå‡½æ•°å¹¶è°ƒç”¨çš„æ—¶å€™ï¼Œå†æ¬¡ç¼–è¯‘è¿è¡Œjsæ–‡ä»¶ï¼Œä¼šäº§ç”Ÿå†²çª</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220430175814.png" alt=""></p><p>åŸå› ï¼šå‡½æ•°åorå˜é‡åç›¸åŒï¼Œé‡å¤å®šä¹‰</p><p>è§£å†³æ–¹æ³•ï¼š</p><ol><li><code>tsc --init</code>ç”Ÿæˆé…ç½®æ–‡ä»¶</li><li>æ³¨é‡Šæ‰<code>&quot;strict&quot;: true,  o9</code></li></ol><h2 id="è‡ªåŠ¨ç¼–è¯‘"><a href="#è‡ªåŠ¨ç¼–è¯‘" class="headerlink" title="è‡ªåŠ¨ç¼–è¯‘"></a>è‡ªåŠ¨ç¼–è¯‘</h2><p><code>tsc --watch</code></p><h2 id="å‘å‡ºé”™è¯¯"><a href="#å‘å‡ºé”™è¯¯" class="headerlink" title="å‘å‡ºé”™è¯¯"></a>å‘å‡ºé”™è¯¯</h2><div class="note primary flat"><p>æˆ‘ä»¬åœ¨tsé‡Œé¢æŠ¥äº†é”™ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘å®Œä¹‹åï¼Œè¿˜æ˜¯èƒ½è¿è¡Œjsæ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¼˜åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œç»“æœä¸ºï¼štsç¼–è¯‘æŠ¥é”™å°±ä¸ç”Ÿæˆjsæ–‡ä»¶çš„è¯ï¼Œéœ€è¦å¦‚ä¸‹ï¼š</p></div><p><code>tsc -noEmitOnError hello.ts</code></p><p>or</p><p><code>tsc -noEmitOnError --watch</code></p><h2 id="é™çº§ç¼–è¯‘"><a href="#é™çº§ç¼–è¯‘" class="headerlink" title="é™çº§ç¼–è¯‘"></a>é™çº§ç¼–è¯‘</h2><p>è®¾ç½®jsoné‡Œé¢çš„targetä¸º<code>es5</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220430195603.png" alt=""></p><h2 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h2><div class="note primary flat"><p>ä¸åŒçš„ç”¨æˆ·å¸Œæœ›åœ¨tsé‡Œé¢æ£€æŸ¥çš„ä¸¥æ ¼ç¨‹åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œé…ç½®å¦‚ä¸‹</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220430195741.png" alt=""></p><p><code>strict</code>æ˜¯åŒ…å«äº†ä¸‹é¢ä¸¤ä¸ªç±»å‹çš„æ¨¡å¼</p><p><code>noImplicitAny</code>æ˜¯æŒ‡ä¸å¯ä»¥å¿½ç•¥anyï¼Œä¹Ÿå°±æ˜¯è¦å®šä¹‰ç±»å‹</p><p><code>strictNullChecks</code>æ„æ€æ˜¯<code>null undefined</code>åªèƒ½èµ‹å€¼ç»™å¯¹åº”çš„ç±»å‹</p><h1 id="åŸºç¡€æ•°æ®ç±»å‹"><a href="#åŸºç¡€æ•°æ®ç±»å‹" class="headerlink" title="åŸºç¡€æ•°æ®ç±»å‹"></a>åŸºç¡€æ•°æ®ç±»å‹</h1><h2 id="æ˜¾å¼ç±»å‹"><a href="#æ˜¾å¼ç±»å‹" class="headerlink" title="æ˜¾å¼ç±»å‹"></a>æ˜¾å¼ç±»å‹</h2><p>tsç»™æˆ‘ä»¬æä¾›äº†ç±»å‹å®šä¹‰çš„æ³¨é‡Šï¼Œæ¯”å¦‚è¯´<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">conflit</span>(<span class="params">person:<span class="built_in">string</span>,date:<span class="built_in">Date</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`hello,<span class="subst">$&#123;person&#125;</span>,<span class="subst">$&#123;date&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">conflit(<span class="string">&#x27;jojo&#x27;</span>,<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯åœ¨ç¼–è¯‘æˆjsä¹‹åå°±ä¼šåˆ å»ï¼Œå¯ä»¥æ–¹ä¾¿ç¨‹åºå‘˜æŸ¥çœ‹ã€‚</p><p>æ ¹æ®ä¸Šé¢æ˜¾å¼ç±»å‹çš„è¯´æ³•æˆ‘ä»¬çŸ¥é“äº†tså¯ä»¥å®šä¹‰å¾ˆå¤šæ•°æ®ç±»å‹ï¼Œæ¯”å¦‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: string = <span class="string">&quot;jimmy&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> num: number = <span class="number">24</span>;</span><br><span class="line"><span class="keyword">let</span> bool: boolean = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> n: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> obj: object = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> big: bigint = <span class="number">100n</span>;</span><br><span class="line"><span class="keyword">let</span> sym: symbol = <span class="built_in">Symbol</span>(<span class="string">&quot;me&quot;</span>); </span><br></pre></td></tr></table></figure></p><h2 id="å‡ ä¸ªéœ€è¦ç•™æ„çš„æ•°æ®"><a href="#å‡ ä¸ªéœ€è¦ç•™æ„çš„æ•°æ®" class="headerlink" title="å‡ ä¸ªéœ€è¦ç•™æ„çš„æ•°æ®"></a>å‡ ä¸ªéœ€è¦ç•™æ„çš„æ•°æ®</h2><div class="note primary flat"><p>å½“æˆ‘ä»¬å®šä¹‰å¥½ç±»å‹çš„æ—¶å€™ï¼Œå¦‚æœç»™å˜é‡èµ‹å€¼åˆ«çš„ç±»å‹æ˜¯ä¼šæŠ¥é”™æç¤ºçš„ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç±»å‹ä¸ä¸€æ ·</p></div><h3 id="null-amp-undefined"><a href="#null-amp-undefined" class="headerlink" title="null&amp;undefined"></a><code>null&amp;undefined</code></h3><p><code>null undefined</code>è¿™ä¸¤ä¸ªç±»å‹å¯ä»¥ä½œä¸ºå…¶ä»–æ‰€æœ‰ç±»å‹çš„å­ç±»å‹,ä¹Ÿå°±æ˜¯å¯ä»¥æŠŠå®ƒä»¬èµ‹ç»™åˆ«çš„å€¼</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nullå’Œundefinedèµ‹å€¼ç»™string</span></span><br><span class="line"><span class="keyword">let</span> str:<span class="built_in">string</span> = <span class="string">&quot;666&quot;</span>;</span><br><span class="line">str = <span class="literal">null</span></span><br><span class="line">str= <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// nullå’Œundefinedèµ‹å€¼ç»™number</span></span><br><span class="line"><span class="keyword">let</span> num:<span class="built_in">number</span> = <span class="number">666</span>;</span><br><span class="line">num = <span class="literal">null</span></span><br><span class="line">num= <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// nullå’Œundefinedèµ‹å€¼ç»™object</span></span><br><span class="line"><span class="keyword">let</span> obj:<span class="built_in">object</span> =&#123;&#125;;</span><br><span class="line">obj = <span class="literal">null</span></span><br><span class="line">obj= <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// nullå’Œundefinedèµ‹å€¼ç»™Symbol</span></span><br><span class="line"><span class="keyword">let</span> sym: symbol = <span class="built_in">Symbol</span>(<span class="string">&quot;me&quot;</span>); </span><br><span class="line">sym = <span class="literal">null</span></span><br><span class="line">sym= <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// nullå’Œundefinedèµ‹å€¼ç»™boolean</span></span><br><span class="line"><span class="keyword">let</span> isDone: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">isDone = <span class="literal">null</span></span><br><span class="line">isDone= <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// nullå’Œundefinedèµ‹å€¼ç»™bigint</span></span><br><span class="line"><span class="keyword">let</span> big: bigint =  <span class="number">100n</span>;</span><br><span class="line">big = <span class="literal">null</span></span><br><span class="line">big= <span class="literal">undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="note warning flat"><p>ä½†å¦‚æœåœ¨<code>tsconfig.json</code>é‡Œé¢æŒ‡å®šäº†<code>&quot;strictNullChecks&quot;:true</code>é‚£ä¹ˆå®ƒä»¬åªèƒ½è¢«èµ‹å€¼ç»™è‡ªå·±çš„ç±»å‹æˆ–è€…void</p></div><h3 id="number-amp-bigint"><a href="#number-amp-bigint" class="headerlink" title="number&amp;bigint"></a><code>number&amp;bigint</code></h3><div class="note primary flat"><p>è¿™ä¸¤ä¸ªå€¼äº’ä¸å…¼å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½ç›¸äº’èµ‹å€¼ï¼Œä¼šæŠ¥é”™</p></div><h2 id="å…¶ä»–ç±»å‹"><a href="#å…¶ä»–ç±»å‹" class="headerlink" title="å…¶ä»–ç±»å‹"></a>å…¶ä»–ç±»å‹</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><div class="note primary flat"><p>å¯¹æ•°ç»„çš„å®šä¹‰æœ‰ä¸¤ç§æ–¹å¼</p></div><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//arr:type[]</span></span><br><span class="line"><span class="keyword">let</span> arr:<span class="built_in">string</span>[] = [<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>];</span><br><span class="line"><span class="comment">//arr:Array&lt;type&gt;</span></span><br><span class="line"><span class="keyword">let</span> arr2:<span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>]</span><br></pre></td></tr></table></figure><p>å®šä¹‰è”åˆç±»å‹æ•°ç»„<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//arr:(type1|type2)[]</span></span><br><span class="line"><span class="keyword">let</span> arr3:(<span class="built_in">number</span> | <span class="built_in">string</span>)[];</span><br><span class="line">arr3 = [<span class="string">&quot;1&quot;</span>,<span class="string">&quot;sdcas&quot;</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br></pre></td></tr></table></figure></p><p>å®šä¹‰å¯¹è±¡ç±»å‹æ•°ç»„<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Arrobj &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr4:Arrobj[] = [&#123;<span class="attr">name</span>:<span class="string">&#x27;jojo&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;]</span><br></pre></td></tr></table></figure></p><h3 id="any"><a href="#any" class="headerlink" title="any"></a>any</h3><p>å®šä¹‰æˆanyç±»å‹çš„æ—¶å€™è¡¨ç¤ºä½ ä¸å¸Œæœ›æŸä¸ªç‰¹å®šå€¼å¯¼è‡´ç±»å‹é”™è¯¯çš„äº§ç”Ÿã€‚</p><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="å‡½æ•°å£°æ˜"><a href="#å‡½æ•°å£°æ˜" class="headerlink" title="å‡½æ•°å£°æ˜"></a>å‡½æ•°å£°æ˜</h4><p>å…·åå‡½æ•°<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x: <span class="built_in">number</span>,y: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><div class="note primary flat"><p>è¿™ä¸ªæ˜¯å‘Šè¯‰æˆ‘ä»¬å‡½æ•°çš„è¿”å›å€¼ä¹Ÿå¯ä»¥æŒ‡å®šç±»å‹ï¼Œä½†ä¸€èˆ¬ä¸éœ€è¦ï¼Œå› ä¸ºtsä¼šç»™æˆ‘ä»¬è‡ªåŠ¨åˆ¤æ–­è¿”å›å€¼çš„ç±»å‹</p></div><p>åŒ¿åå‡½æ•°ï¼šä¼šè‡ªåŠ¨æ ¹æ®ä¸Šä¸‹æ–‡åˆ¤æ–­è¯»å–çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆã€‚</p><h4 id="å‡½æ•°è¡¨è¾¾å¼"><a href="#å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="å‡½æ•°è¡¨è¾¾å¼"></a>å‡½æ•°è¡¨è¾¾å¼</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sum: <span class="function">(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = <span class="function"><span class="keyword">function</span> (<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç”¨æ¥å£å®šä¹‰å‡½æ•°ç±»å‹"><a href="#ç”¨æ¥å£å®šä¹‰å‡½æ•°ç±»å‹" class="headerlink" title="ç”¨æ¥å£å®šä¹‰å‡½æ•°ç±»å‹"></a>ç”¨æ¥å£å®šä¹‰å‡½æ•°ç±»å‹</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> SearchFunc&#123;</span><br><span class="line">  (source: <span class="built_in">string</span>, <span class="attr">subString</span>: <span class="built_in">string</span>): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥å£å®šä¹‰å‡½æ•°ç±»å‹çš„æ•°æ®çš„æ—¶å€™ï¼Œå¯¹ç­‰å·å·¦ä¾§è¿›è¡Œç±»å‹é™åˆ¶ï¼Œå¯ä»¥ä¿è¯ä»¥åå¯¹å‡½æ•°åèµ‹å€¼æ—¶ä¿è¯å‚æ•°ä¸ªæ•°ï¼Œå‚æ•°ç±»å‹ï¼Œè¿”å›å€¼ç±»å‹ä¸å˜ã€‚</p><h4 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h4><p>ä½¿ç”¨<code>å˜é‡å?: type</code>çš„å½¢å¼<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: <span class="built_in">number</span>,y?: <span class="built_in">number</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(y)&#123;</span><br><span class="line">      <span class="keyword">return</span> x+y;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(myFun(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line"><span class="built_in">console</span>.log(myFun(<span class="number">33</span>))</span><br></pre></td></tr></table></figure></p><div class="note warning flat"><p>æ³¨æ„å¯é€‰å‚æ•°åé¢ä¸èƒ½å†è·Ÿå¿…éœ€å‚æ•°</p></div><h4 id="å‚æ•°é»˜è®¤å€¼"><a href="#å‚æ•°é»˜è®¤å€¼" class="headerlink" title="å‚æ•°é»˜è®¤å€¼"></a>å‚æ•°é»˜è®¤å€¼</h4><p>åœ¨typeåé¢åŠ <code>= é»˜è®¤å€¼</code><br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span> = <span class="number">22</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(myFun(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"><span class="built_in">console</span>.log(myFun(<span class="number">33</span>))</span><br></pre></td></tr></table></figure></p><h4 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h4><p>æ³¨æ„éœ€è¦ç”¨anyæ¥æŒ‡å®šrest<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">arr: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt;, ...items: <span class="built_in">any</span>[]</span>) </span>&#123;</span><br><span class="line">    items.forEach(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;</span><br><span class="line">        arr.push(item);</span><br><span class="line">    &#125;)    </span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(myFun(arr,<span class="number">3</span>,<span class="number">4</span>,<span class="number">543414</span>,<span class="number">123</span>))</span><br></pre></td></tr></table></figure></p><h4 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h4><p>jsæ˜¯åŠ¨æ€è¯­è¨€ï¼Œä¼šæ ¹æ®ä¸åŒçš„å‚æ•°è¿”å›ä¸åŒç±»å‹çš„è°ƒç”¨ç»“æœ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 3</span></span><br><span class="line">add(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>); <span class="comment">//&quot;12&quot;</span></span><br></pre></td></tr></table></figure></p><p>butå¦‚æœå¼€å¯äº†noImplicitAnyçš„è¯ï¼Œtsä¸èƒ½ç”¨ä¸Šè¿°ä»£ç ï¼Œå› ä¸ºéœ€è¦æŒ‡å®šç±»å‹ï¼Œæ‰€ä»¥å°±è¯ç”Ÿäº†è”åˆç±»å‹å¸®åŠ©æˆ‘ä»¬æ ¹æ®ä¸åŒçš„æƒ…å†µè¿”å›ä¸åŒçš„ç»“æœ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Combination = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: Combination, y: Combination</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> y === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x.toString() + y.toString();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(myFun(<span class="number">1</span>,<span class="number">3</span>));</span><br><span class="line"><span class="built_in">console</span>.log(myFun(<span class="number">1</span>,<span class="string">&quot;3&quot;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†å…¶å®åˆ°è¿™ä¸€æ­¥ï¼Œçœ‹ä¼¼æ²¡æœ‰é—®é¢˜äº†ï¼Œå®é™…ä¸Šæ–°çš„é—®é¢˜åˆäº§ç”Ÿäº†<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Combination = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: Combination, y: Combination</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> y === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x.toString() + y.toString();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = myFun(<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;def&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line">result.split(<span class="string">&quot; &quot;</span>);<span class="comment">//æŠ¥é”™</span></span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹æç¤ºå¯ä»¥çŸ¥é“numberç±»å‹ä¸Šé¢æ²¡æœ‰æ–¹æ³•splitï¼Œä¸ºä»€ä¹ˆæ˜¯numberç±»å‹å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬è¿™ä¸ªå‚æ•°è™½ç„¶å®šä¹‰äº†ç»„åˆç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬çš„tså¹¶ä¸çŸ¥é“è¿”å›å€¼æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ‰€ä»¥äº§ç”Ÿäº†å‡½æ•°é‡è½½</p><div class="note primary flat"><p>å‡½æ•°é‡è½½å°±æ˜¯ä½¿ç”¨ç›¸åŒå‡½æ•°åç§°å’Œä¸åŒå‚æ•°ç±»å‹æˆ–ä¸åŒå‚æ•°ä¸ªæ•°åˆ›å»ºæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›</p></div><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Combination = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: <span class="built_in">string</span>, y: <span class="built_in">number</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: <span class="built_in">string</span>, y: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFun</span>(<span class="params">x: Combination, y: Combination</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> y === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x.toString() + y.toString();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = myFun(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;def&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="keyword">const</span> res = result.split(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(res)</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å®ç°äº†å‡½æ•°çš„é‡è½½</p><h1 id="é…ç½®è¾“å‡º"><a href="#é…ç½®è¾“å‡º" class="headerlink" title="é…ç½®è¾“å‡º"></a>é…ç½®è¾“å‡º</h1><p>åœ¨Emitä¸‹é¢æ‰¾åˆ°<code>&quot;outDir&quot;: &quot;./dist&quot;,</code>å¹¶é…ç½®</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯ç™»é™†æŒ‡å—</title>
    <link href="https://zlinni.github.io/posts/3355969119/"/>
    <id>https://zlinni.github.io/posts/3355969119/</id>
    <published>2022-04-24T02:15:14.000Z</published>
    <updated>2022-04-25T02:41:30.129Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>å‰ç«¯ç™»é™†çš„å››ç§æ–¹å¼ä»‹ç»ä»¥åŠåº”ç”¨</p></div><p>å…³é”®è¯ï¼šCookie/Sessionã€Tokenã€SSOå•ç‚¹ç™»å½•ã€OAuthç¬¬ä¸‰æ–¹ç™»é™†<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220424211445.png" alt=""></p><h1 id="éªŒè¯ç™»é™†"><a href="#éªŒè¯ç™»é™†" class="headerlink" title="éªŒè¯ç™»é™†"></a>éªŒè¯ç™»é™†</h1><ul><li>Cookie/Session</li><li>Token </li><li>SSO å•ç‚¹ç™»é™†</li><li>OAuthç¬¬ä¸‰æ–¹ç™»é™†</li></ul><h1 id="cookie-session"><a href="#cookie-session" class="headerlink" title="cookie session"></a>cookie session</h1><p>ç™»é™†æµç¨‹ï¼šé¦–æ¬¡ç™»é™†<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414092439.png" alt=""></p><ol><li>ç”¨æˆ·è®¿é—®<code>a.com/pageA</code>å¹¶è¾“å…¥å¯†ç ç™»é™†</li><li>æœåŠ¡å™¨éªŒè¯å¯†ç æ— è¯¯åï¼Œä¼šåˆ›å»ºSession IDå¹¶å°†å…¶ä¿å­˜èµ·æ¥</li><li>æœåŠ¡ç«¯å“åº”è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶é€šè¿‡Set-Cookieå°†Session IDå†™å…¥Cookieä¸­</li></ol><p>å†æ¬¡ç™»é™†ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414092643.png" alt=""></p><ol><li>ç”¨æˆ·è®¿é—®<code>a.com/pageB</code>è‡ªåŠ¨å¸¦ä¸Šç¬¬ä¸€æ¬¡ç™»é™†å†™å…¥çš„Cookie</li><li>æœåŠ¡ç«¯å¯¹æ¯”Cookieä¸­çš„SessionIDå’Œä¿å­˜åœ¨æœåŠ¡ç«¯çš„SessionIDæ˜¯å¦ä¸€è‡´</li><li>ä¸€è‡´åˆ™æˆåŠŸ</li></ol><h2 id="cookie-sessionå­˜åœ¨çš„é—®é¢˜"><a href="#cookie-sessionå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="cookie sessionå­˜åœ¨çš„é—®é¢˜"></a>cookie sessionå­˜åœ¨çš„é—®é¢˜</h2><ul><li>æœåŠ¡å™¨éœ€è¦å¯¹æ¥å¤§é‡çš„å®¢æˆ·ç«¯ï¼Œå¯¼è‡´æœåŠ¡å™¨å‹åŠ›å¤§ã€‚</li><li>å¦‚æœæœåŠ¡å™¨æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œä¸ºäº†åŒæ­¥ç™»é™†æ€ï¼Œå°±éœ€è¦å°†SessionIDåŒæ­¥åˆ°æ¯ä¸€å°æœºå™¨ä¸Šï¼Œæ— å½¢ä¸­å¢åŠ äº†æœåŠ¡å™¨çš„ç»´æŠ¤æˆæœ¬ã€‚</li><li>ç”±äºSessionIDå­˜æ”¾åœ¨Cookieä¸­æ‰€ä»¥æ— æ³•é¿å…CSRFæ”»å‡»</li></ul><h1 id="tokenç™»é™†"><a href="#tokenç™»é™†" class="headerlink" title="tokenç™»é™†"></a>tokenç™»é™†</h1><p>ä¸ºäº†è§£å†³cookie+sessionæš´éœ²å‡ºæ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨tokençš„ç™»é™†æ–¹å¼<br><div class="note primary flat"><p>tokenæ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä»¥ä½œä¸ºå®¢æˆ·ç«¯è¯·æ±‚çš„ä¸€ä¸ªä»¤ç‰Œã€‚å½“ç¬¬ä¸€æ¬¡ç™»é™†å®Œæˆåï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªtokenå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åç»­è®¿é—®åªè¦å¸¦ä¸Šè¿™ä¸ªtokenå°±å¯ä»¥å®Œæˆèº«ä»½éªŒè¯ã€‚</p></div></p><h2 id="tokenæœºåˆ¶å®ç°æµç¨‹"><a href="#tokenæœºåˆ¶å®ç°æµç¨‹" class="headerlink" title="tokenæœºåˆ¶å®ç°æµç¨‹"></a>tokenæœºåˆ¶å®ç°æµç¨‹</h2><p>é¦–æ¬¡ç™»é™†ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414102745.png" alt=""></p><ol><li>ç”¨æˆ·è¾“å…¥è´¦å·å¯†ç ï¼Œå¹¶ç‚¹å‡»ç™»å½•ã€‚</li><li>æœåŠ¡å™¨ç«¯éªŒè¯è´¦å·å¯†ç æ— è¯¯ï¼Œåˆ›å»º Tokenã€‚</li><li>æœåŠ¡å™¨ç«¯å°† Token è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œç”±å®¢æˆ·ç«¯è‡ªç”±ä¿å­˜ã€‚</li></ol><p>åç»­é¡µé¢è®¿é—®æ—¶ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414102830.png" alt=""></p><ol><li>ç”¨æˆ·è®¿é—® a.com/pageB æ—¶ï¼Œå¸¦ä¸Šç¬¬ä¸€æ¬¡ç™»å½•æ—¶è·å–çš„ Tokenã€‚</li><li>æœåŠ¡å™¨ç«¯éªŒè¯ Token ï¼Œæœ‰æ•ˆåˆ™èº«ä»½éªŒè¯æˆåŠŸã€‚</li></ol><h2 id="Token-æœºåˆ¶çš„ç‰¹ç‚¹"><a href="#Token-æœºåˆ¶çš„ç‰¹ç‚¹" class="headerlink" title="Token æœºåˆ¶çš„ç‰¹ç‚¹"></a>Token æœºåˆ¶çš„ç‰¹ç‚¹</h2><p>æ ¹æ®ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºTokençš„ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>æœåŠ¡å™¨ç«¯ä¸éœ€è¦å­˜æ”¾tokenï¼Œæ‰€ä»¥ä¸ä¼šå¯¹æœåŠ¡å™¨é€ æˆå‹åŠ›ï¼Œå³ä½¿æœåŠ¡å™¨é›†ç¾¤ï¼Œä¹Ÿä¸éœ€è¦å¢åŠ ç»´æŠ¤æˆæœ¬ã€‚</li><li>Tokenå¯ä»¥å­˜æ”¾åœ¨å‰ç«¯çš„ä»»ä½•åœ°æ–¹ï¼Œå¯ä»¥ä¸ç”¨ä¿å­˜åœ¨Cookieä¸­ï¼Œæå‡äº†é¡µé¢çš„å®‰å…¨æ€§ã€‚</li><li>Tokenä¸‹å‘ä¹‹åï¼Œåªè¦åœ¨ç”Ÿæ•ˆæ—¶é—´å†…ï¼Œå°±ä¸€ç›´æœ‰æ•ˆï¼Œå¦‚æœæœåŠ¡å™¨æƒ³æ”¶å›æ­¤tokençš„æƒé™ï¼Œå¹¶ä¸å®¹æ˜“ã€‚</li></ul><h2 id="Tokençš„ç”Ÿæˆæ–¹å¼"><a href="#Tokençš„ç”Ÿæˆæ–¹å¼" class="headerlink" title="Tokençš„ç”Ÿæˆæ–¹å¼"></a>Tokençš„ç”Ÿæˆæ–¹å¼</h2><p>æœ€å¸¸è§çš„Tokenç”Ÿæˆæ–¹å¼æ˜¯ä½¿ç”¨JWTï¼Œä»–æ˜¯ä¸€ç§ç®€æ´çš„ï¼Œè‡ªåŒ…å«çš„æ–¹æ³•ç”¨äºé€šä¿¡åŒæ–¹ä¹‹é—´ä»¥JSONå¯¹è±¡çš„å½¢å¼å®‰å…¨çš„ä¼ é€’ä¿¡æ¯ã€‚</p><p>ä¸Šæ–‡ä¸­æˆ‘ä»¬è¯´åˆ°ï¼Œä½¿ç”¨Tokenåï¼ŒæœåŠ¡å™¨ç«¯å¹¶ä¸ä¼šå­˜å‚¨Tokenï¼Œé‚£æ€ä¹ˆåˆ¤æ–­å®¢æˆ·ç«¯çš„tokenæ˜¯å¦åˆæ³•æœ‰æ•ˆï¼Ÿ</p><p>ç­”æ¡ˆå…¶å®å°±åœ¨Tokenå­—ç¬¦ä¸²ä¸­ï¼Œå…¶å®Tokenå¹¶ä¸æ˜¯ä¸€ä¸²æ‚ä¹±æ— ç« çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯é€šè¿‡å¤šç§ç®—æ³•æ‹¼æ¥ç»„åˆè€Œæˆçš„å­—ç¬¦ä¸²ã€‚å¦‚ä¸‹ï¼š</p><p>JWTç®—æ³•ä¸»è¦åˆ†æˆäº†ä¸‰ä¸ªéƒ¨åˆ† </p><ul><li>header å¤´ä¿¡æ¯</li><li>payload æ¶ˆæ¯ä½“</li><li>signature ç­¾å</li></ul><p>headeréƒ¨åˆ†æŒ‡å®šäº†JWTä½¿ç”¨çš„ç­¾åç®—æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header = <span class="string">&#x27;&#123;&quot;alg&quot;:&quot;HS256&quot;,&quot;typ&quot;:&quot;JWT&quot;&#125;&#x27;</span>   <span class="comment">// `HS256` è¡¨ç¤ºä½¿ç”¨äº† HMAC-SHA256 æ¥ç”Ÿæˆç­¾åã€‚</span></span><br></pre></td></tr></table></figure></p><p>payloadéƒ¨åˆ†æŒ‡æ˜äº†JWTçš„ä½¿ç”¨æ„å›¾<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">payload = <span class="string">&#x27;&#123;&quot;loggedInAs&quot;:&quot;admin&quot;,&quot;iat&quot;:1422779638&#125;&#x27;</span>     <span class="comment">//iat è¡¨ç¤ºä»¤ç‰Œç”Ÿæˆçš„æ—¶é—´</span></span><br></pre></td></tr></table></figure></p><p>signatureéƒ¨åˆ†ä¸ºJWTçš„ç­¾å ä¸»è¦ä¸ºäº†è®©JWTä¸èƒ½éšæ„æ›´æ”¹ï¼Œç­¾åçš„æ–¹æ³•åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤</p><ol><li>è¾“å…¥base64urlç¼–ç çš„headeréƒ¨åˆ†ï¼Œbase64urlç¼–ç çš„payloadéƒ¨åˆ†ï¼Œè¾“å‡ºunsignedToken</li><li>è¾“å…¥æœåŠ¡å™¨ç«¯ç§é’¥ï¼ŒunsignedToken,è¾“å‡ºsignatureç­¾å</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> base64Header = encodeBase64(header)</span><br><span class="line"><span class="keyword">const</span> base64Payload = encodeBase64(payload)</span><br><span class="line"><span class="keyword">const</span> unsignedToken = <span class="string">`<span class="subst">$&#123;base64Header&#125;</span>.<span class="subst">$&#123;base64Payload&#125;</span>`</span></span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&#x27;æœåŠ¡å™¨ç§é’¥&#x27;</span></span><br><span class="line"></span><br><span class="line">signature = HMAC(key, unsignedToken)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€åTokenè®¡ç®—å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> base64Header = encodeBase64(header)</span><br><span class="line"><span class="keyword">const</span> base64Payload = encodeBase64(payload)</span><br><span class="line"><span class="keyword">const</span> base64Signature = encodeBase64(signature)</span><br><span class="line"></span><br><span class="line">token = <span class="string">`<span class="subst">$&#123;base64Header&#125;</span>.<span class="subst">$&#123;base64Payload&#125;</span>.<span class="subst">$&#123;base64Signature&#125;</span>`</span></span><br></pre></td></tr></table></figure></p><p>æœåŠ¡å™¨åœ¨åˆ¤æ–­tokençš„æ—¶å€™<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [base64Header, base64Payload, base64Signature] = token.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> signature1 = decodeBase64(base64Signature)</span><br><span class="line"><span class="keyword">const</span> unsignedToken = <span class="string">`<span class="subst">$&#123;base64Header&#125;</span>.<span class="subst">$&#123;base64Payload&#125;</span>`</span></span><br><span class="line"><span class="keyword">const</span> signature2 = HMAC(<span class="string">&#x27;æœåŠ¡å™¨ç§é’¥&#x27;</span>, unsignedToken)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(signature1 === signature2) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;ç­¾åéªŒè¯æˆåŠŸï¼Œtoken æ²¡æœ‰è¢«ç¯¡æ”¹&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> payload =  decodeBase64(base64Payload)</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">new</span> <span class="built_in">Date</span>() - payload.iat &lt; <span class="string">&#x27;token æœ‰æ•ˆæœŸ&#x27;</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;token æœ‰æ•ˆ&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰äº† Token ä¹‹åï¼Œç™»å½•æ–¹å¼å·²ç»å˜å¾—éå¸¸é«˜æ•ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»å¦å¤–ä¸¤ç§ç™»å½•æ–¹å¼ã€‚</p><h1 id="SSOå•ç‚¹ç™»é™†"><a href="#SSOå•ç‚¹ç™»é™†" class="headerlink" title="SSOå•ç‚¹ç™»é™†"></a>SSOå•ç‚¹ç™»é™†</h1><div class="note primary flat"><p>å•ç‚¹ç™»é™†æŒ‡çš„æ˜¯åœ¨å…¬å¸å†…éƒ¨æ­å»ºä¸€ä¸ªå…¬å…±çš„è®¤è¯ä¸­å¿ƒï¼Œå…¬å¸ä¸‹çš„æ‰€æœ‰äº§å“çš„ç™»é™†éƒ½å¯ä»¥åœ¨è®¤è¯ä¸­å¿ƒä¸­å®Œæˆï¼Œä¸€ä¸ªäº§å“åœ¨è®¤è¯ä¸­å¿ƒç™»é™†åï¼Œå†å»è®¿é—®å¦å¤–ä¸€ä¸ªäº§å“ï¼Œå¯ä»¥ä¸ç”¨å†æ¬¡ç™»é™†ï¼Œå³å¯è·å–ç™»é™†çŠ¶æ€ã€‚</p></div><h2 id="SSOæœºåˆ¶å®ç°æµç¨‹"><a href="#SSOæœºåˆ¶å®ç°æµç¨‹" class="headerlink" title="SSOæœºåˆ¶å®ç°æµç¨‹"></a>SSOæœºåˆ¶å®ç°æµç¨‹</h2><p>åˆ†ä¸ºåŒåŸŸå’Œä¸åŒåŸŸã€‚</p><h3 id="åŒåŸŸçš„å•ç‚¹ç™»é™†"><a href="#åŒåŸŸçš„å•ç‚¹ç™»é™†" class="headerlink" title="åŒåŸŸçš„å•ç‚¹ç™»é™†"></a>åŒåŸŸçš„å•ç‚¹ç™»é™†</h3><p>æ¯”å¦‚ç°åœ¨æœ‰ä¸€ä¸ªåŸŸåå«<code>zlinni.cn</code>,ç„¶åæˆ‘çš„å…¶ä»–é¡µé¢åˆ†åˆ«ä¸ºï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a.zlinni.cn</span><br><span class="line">b.zlinni.cn</span><br><span class="line">c.zlinni.cn</span><br><span class="line">login.zlinni.cn<span class="comment">//ssoç™»é™†ç³»ç»Ÿ</span></span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬åªè¦æ»¡è¶³åœ¨loginä¸­ç™»é™†ï¼Œç„¶åabcä¸‰ä¸ªéƒ½ç™»é™†å°±å®Œæˆäº†sso</p><p>å®ç°çš„æ–¹å¼å°±æ˜¯åˆ©ç”¨äº†cookieçš„pathå’Œdomainï¼Œæˆ‘ä»¬è®¾ç½®domainä¸º<code>.zlinni.cn</code>ï¼Œç„¶åpathä¸º<code>/</code>å°±èƒ½å®ç°æ‰€æœ‰çš„åŸŸåéƒ½å…±äº«loginçš„cookieï¼Œå°±å®ç°äº†å•ç‚¹ç™»é™†ã€‚</p><h3 id="ä¸åŒåŸŸçš„å•ç‚¹ç™»é™†"><a href="#ä¸åŒåŸŸçš„å•ç‚¹ç™»é™†" class="headerlink" title="ä¸åŒåŸŸçš„å•ç‚¹ç™»é™†"></a>ä¸åŒåŸŸçš„å•ç‚¹ç™»é™†</h3><p>ç”¨æˆ·é¦–æ¬¡è®¿é—®éœ€è¦åœ¨è®¤è¯ä¸­å¿ƒç™»é™†ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220424182851.png" alt=""></p><ol><li>ç”¨æˆ·å…ˆè®¿é—®<code>a.com</code>ä¸‹é¢çš„pageAé¡µé¢ï¼Œç„¶åç³»ç»Ÿå‘ç°å®ƒæœªç™»é™†ï¼Œç»™å®ƒé‡å®šå‘åˆ°ssoè®¤è¯ä¸­å¿ƒ</li><li>åœ¨ssoä¸­æ³¨å†Œï¼Œæäº¤ç™»é™†</li><li>ssoéªŒè¯è´¦å·å¯†ç æœ‰æ•ˆï¼Œé‡å®šå‘åˆ°<code>a.com</code>å¹¶å¸¦ä¸Šæˆæƒç ticketï¼Œå†å°†ssoçš„ç™»å½•æ€å†™å…¥cookie</li><li>æ­¤æ—¶aå°±æ‹¿ç€ticketå»ssoä¸­éªŒè¯æ˜¯å¦æœ‰æ•ˆã€‚</li><li>åœ¨açš„æœåŠ¡å™¨ä¸­æ‹¿ç€ticketå‘ssoéªŒè¯ç¡®è®¤çœŸå®æ€§</li><li>éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡å™¨å°†å†™å…¥ä¸¤ä¸ªä¿¡æ¯åˆ°cookieï¼Œä¸€ä¸ªæ˜¯ticketä½œä¸ºaçš„ç™»å½•æ€ï¼Œä¸€ä¸ªæ˜¯ssoçš„tokenè®°å½•ssoçš„ç™»å½•æ€</li></ol><p>æŠ›å‡ºç–‘é—®ï¼šä¸ºä»€ä¹ˆè¦ç”¨ticketï¼Ÿè¿™ä¸ªé—®é¢˜æˆ‘ä»¬åé¢å†è®²</p><p>ç„¶åç™»é™†å®Œæˆè®¿é—®aä¸‹é¢çš„å…¶ä»–é¡µé¢<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220424192857.png" alt=""></p><p>æ­¤æ—¶æˆ‘ä»¬çš„cookieä¸­æºå¸¦äº†ticketï¼Œåªè¦åˆ°æœåŠ¡ç«¯éªŒè¯æ˜¯å¦åœ¨æœ‰æ•ˆçš„æ—¶é—´å†…å³å¯ã€‚</p><p>è®¿é—®bé¡µé¢çš„æ—¶å€™ï¼ˆè¿™ä¸ªbé¡µé¢æ˜¯è®¤è¯ä¸­å¿ƒä¸‹é¢çš„ä¸åŒäº§å“ï¼Œå¦‚æœè¦åšä¾‹å­çš„è¯ï¼Œå¯ä»¥è®¤ä¸ºaæ˜¯æ–°æµªå¾®åšï¼Œbæ˜¯æ–°æµªåšå®¢ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220424193220.png" alt=""><br>æ­¤æ—¶ç”±äºæˆ‘ä»¬çš„bæ˜¯ä¸åŒæºçš„é¡µé¢ï¼Œæ‰€ä»¥cookieä¸­æ˜¯æ²¡æœ‰ticketçš„ï¼ˆï¼ï¼ï¼ï¼éå¸¸é‡è¦ï¼‰ï¼Œä½†æ˜¯å®ƒé‡å®šå‘åˆ°ssoä¸­ï¼Œssoä¸­æˆ‘ä»¬çš„cookieæ˜¯å­˜åœ¨ç™»å½•æ€çš„ï¼Œæ‰€ä»¥æ­¤æ—¶ä¸éœ€è¦å†æ³¨å†Œç­‰æ“ä½œï¼ŒéªŒè¯tokenä¹‹åï¼Œç›´æ¥ç»™bä¸‹å‘ticketå³å¯ã€‚bå†å»éªŒè¯ticketçœŸå®æ€§å³å¯å®Œæˆç™»é™†ã€‚</p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦Ticket"><a href="#ä¸ºä»€ä¹ˆéœ€è¦Ticket" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦Ticket"></a>ä¸ºä»€ä¹ˆéœ€è¦Ticket</h2><p>ticketçš„å­˜åœ¨æ˜¯ä¸ºäº†è§£å†³ä¸åŒåŸŸæºå¸¦çš„cookieä¸ä¸€æ ·çš„é—®é¢˜</p><p>ä»¥ä¸Šè¿‡ç¨‹å°±è§£é‡Šäº†æˆ‘ä»¬è¦ç”¨ticketçš„ç†ç”±ï¼Œå› ä¸ºaå’Œbä¸æ˜¯åŒæºé¡µé¢æ‰€ä»¥ä¸ä¼šæºå¸¦åŒæ ·çš„ticketï¼Œä½†æ˜¯ssoä¸­æ‹¥æœ‰ç™»å½•æ€tokenæ‰€ä»¥æˆ‘ä»¬ä¼šä¸‹å‘ticketåˆ°bä¸­éªŒè¯ã€‚</p><h2 id="SSOå•ç‚¹ç™»é™†é€€å‡º"><a href="#SSOå•ç‚¹ç™»é™†é€€å‡º" class="headerlink" title="SSOå•ç‚¹ç™»é™†é€€å‡º"></a>SSOå•ç‚¹ç™»é™†é€€å‡º</h2><p>å•ç‚¹ç™»é™†ä½¿å¾—å¤šä¸ªäº§å“å…±äº«ç™»å½•æ€ï¼Œä½†æ˜¯æ€ä¹ˆåšåˆ°åœ¨ä¸€ä¸ªäº§å“ä¸­é€€å‡ºç™»é™†ï¼Œå…¶ä»–çš„äº§å“ä¹Ÿé€€å‡ºå‘¢ï¼Ÿ</p><p>è¿™é‡Œå…¶å®è¦åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œæ¯”å¦‚è¯´é€€å‡ºè¿™ä¸ªbcomçš„ç™»é™†ï¼š</p><ol><li>é¦–å…ˆæˆ‘ä»¬è¦æ¸…é™¤æ‰bä¸­çš„ticket</li><li>è®¤è¯ä¸­å¿ƒssoä¸­æ¸…é™¤å¯¹åº”çš„cookie</li><li>ssoéå†æ‰€æœ‰å¯¹åº”cookieä¸‹å‘äº†ticketçš„äº§å“å¹¶åˆ é™¤ã€‚</li></ol><h2 id="æ€»ç»“sso"><a href="#æ€»ç»“sso" class="headerlink" title="æ€»ç»“sso"></a>æ€»ç»“sso</h2><p>ssoå°±æ˜¯ç±»ä¼¼äº<code>Nginx+ticket+token</code>çš„ç»„åˆ.å…¶ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨å®ƒçš„é‡å®šå‘è§„åˆ™ï¼Œå¯ä»¥å°†tokenå­˜åœ¨ssoçš„cookieä¸­ï¼Œå°†ticketè¿”å›åˆ°å…·ä½“çš„é¡µé¢å­˜åœ¨cookieä¸­ï¼Œç„¶åå†è®¤è¯å®Œæˆç™»é™†</p><h1 id="OAuthç¬¬ä¸‰æ–¹ç™»é™†"><a href="#OAuthç¬¬ä¸‰æ–¹ç™»é™†" class="headerlink" title="OAuthç¬¬ä¸‰æ–¹ç™»é™†"></a>OAuthç¬¬ä¸‰æ–¹ç™»é™†</h1><p>ç”±äºssoå®é™…ä¸Šè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¤§å‚æä¾›çš„ç¬¬ä¸‰æ–¹ç™»é™†ç³»ç»Ÿå®ç°ç™»é™†</p><p>æˆ‘ä»¬ä¸å…³å¿ƒè¿™ä¸ªå®Œæˆæˆæƒçš„è¿‡ç¨‹ï¼Œä½†æ˜¯è¦çŸ¥é“ç”¨æˆ·ç‚¹å‡»åˆ°è¿”å›ç™»é™†çš„è¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆ</p><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220424204420.png" alt=""></p><ol><li>é¦–å…ˆç”¨æˆ·åœ¨acomç‚¹å‡»ç”¨æˆ·ç™»é™†ï¼Œè·³è½¬åˆ°OAuthï¼Œå¹¶å¸¦ä¸Šå›è°ƒåœ°å€acom</li><li>ç”¨æˆ·äºŒç»´ç éªŒè¯ä¹‹åï¼Œå¾®ä¿¡è¿”å›ä¸´æ—¶ç¥¨æ®code</li><li>aå¸¦ç€codeå’Œè‡ªå·±ç”³è¯·çš„appidã€appsecretï¼Œå‘å¾®ä¿¡çš„æœåŠ¡å™¨ç”³è¯·tokenï¼ŒéªŒè¯æˆåŠŸå¾®ä¿¡ä¸‹å‘token</li><li>æœ‰äº†tokenä¹‹åï¼Œaå°±å¯ä»¥å‘å¾®ä¿¡æœåŠ¡å™¨è·å–ç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°ç­‰ä¿¡æ¯ã€‚å¹¶å°†ç”¨æˆ·çš„ç™»å½•æ€å†™å…¥cookieä»¥ä¾¿ä¸‹ä¸€æ¬¡ç™»é™†ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="é¢è¯•æŒ‡å—" scheme="https://zlinni.github.io/categories/%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97/"/>
    
    
    <category term="é¢è¯•" scheme="https://zlinni.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>èä¼šè´¯é€šå…«å¤§æ’åº</title>
    <link href="https://zlinni.github.io/posts/3106196216/"/>
    <id>https://zlinni.github.io/posts/3106196216/</id>
    <published>2022-04-23T06:37:29.000Z</published>
    <updated>2022-04-26T12:20:35.003Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>è®°å½•å¸¸ç”¨æ’åºç®—æ³•çš„ç®—æ³•æ€æƒ³å’Œå®ç°ï¼ŒåŠ›äº‰åŸºç¡€è¾¾æ ‡ï¼Œå¾€åæ·±å…¥çš„ç‚¹åˆ†å¼€è¡¥å……~</p></div><p>å…³é”®è¯ï¼šå¸¸ç”¨ç®—æ³•ã€sortæ’åºã€å†’æ³¡æ’åºã€æ’å…¥æ’åºã€é€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€æ¡¶æ’åºã€å¸Œå°”æ’åº</p><h1 id="sortæ’åº"><a href="#sortæ’åº" class="headerlink" title="sortæ’åº"></a>sortæ’åº</h1><p>ç›´æ¥ä½¿ç”¨apiå°±èƒ½è¿›è¡Œæ’åºï¼Œæ³¨æ„çš„ç‚¹æ˜¯ï¼š<br>ä¸ä¼ å‚ï¼Œé»˜è®¤æ˜¯unicodeæ’åºï¼Œæ‰€ä»¥å¸¸ç”¨æ¥æ’åºå­—æ¯<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;asbcascacsac&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> arr = str.split(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> sortArr = arr.sort();</span><br><span class="line"><span class="built_in">console</span>.log(sortArr)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">    &#x27;a&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;a&#x27;,</span></span><br><span class="line"><span class="comment">    &#x27;b&#x27;, &#x27;c&#x27;, &#x27;c&#x27;, &#x27;c&#x27;,</span></span><br><span class="line"><span class="comment">    &#x27;c&#x27;, &#x27;s&#x27;, &#x27;s&#x27;, &#x27;s&#x27;</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><p>ä¼ å‚ï¼Œé»˜è®¤ä¸¤ä¸ªå‚ï¼Œåå­—æ— æ‰€è°“ï¼Œè¿™é‡Œä¸¾ä¾‹æ˜¯aå’Œbï¼Œçœ‹è¿”å›å€¼æ¥å†³å®šå‡åºé™åº<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">116516</span>,<span class="number">1213</span>,<span class="number">123</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(arr))</span><br><span class="line"><span class="keyword">let</span> upArr = arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b);</span><br><span class="line"><span class="keyword">let</span> downArr = arr2.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>b-a);</span><br><span class="line"><span class="built_in">console</span>.log(upArr)</span><br><span class="line"><span class="built_in">console</span>.log(downArr)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">     1,      4,   5,</span></span><br><span class="line"><span class="comment">     8,      8, 123,</span></span><br><span class="line"><span class="comment">  1213, 116516</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">  116516, 1213, 123,</span></span><br><span class="line"><span class="comment">       8,    8,   5,</span></span><br><span class="line"><span class="comment">       4,    1</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h1><p>æ€æƒ³ï¼šä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ å¤§å°ï¼Œå¤§åˆ™äº¤æ¢(å‡åº)<br>æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">116516</span>,<span class="number">1213</span>,<span class="number">123</span>]</span><br><span class="line"><span class="keyword">const</span> bubblesort = (<span class="function"><span class="params">arr</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;len-<span class="number">1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j=<span class="number">0</span>;j&lt;len-i-<span class="number">1</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j+<span class="number">1</span>]&lt;arr[j])&#123;</span><br><span class="line">                [arr[j],arr[j+<span class="number">1</span>]] = [arr[j+<span class="number">1</span>],arr[j]];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(bubblesort(arr))</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">     1,      4,   5,</span></span><br><span class="line"><span class="comment">     8,      8, 123,</span></span><br><span class="line"><span class="comment">  1213, 116516</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></p><p>ä¼˜åŒ–ï¼šå¦‚æœåŸæ•°ç»„å·²ç»æ˜¯æ’åºæ•°ç»„ï¼Œå°±ä¸å¿…å†æ’ï¼Œç”¨flag<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bubblesort = (<span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; len - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j + <span class="number">1</span>] &lt; arr[j]) &#123;</span><br><span class="line">                [arr[j], arr[j + <span class="number">1</span>]] = [arr[j + <span class="number">1</span>], arr[j]];</span><br><span class="line">                flag=<span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag)<span class="keyword">return</span> arr;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(bubblesort(arr))</span><br></pre></td></tr></table></figure></p><h1 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h1><p>æ€æƒ³ï¼šæ¯æ¬¡éƒ½æ‰¾åˆ°æœ€å°å€¼æ”¾åœ¨å¤´éƒ¨ï¼Œç„¶åç¼©å°èŒƒå›´ç»§ç»­æ“ä½œ ç›´åˆ°å®Œå…¨æœ‰åº<br>æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> selectsort = (<span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> minIndex = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; len; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[minIndex]&gt;arr[j])&#123;</span><br><span class="line">                minIndex = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(minIndex!==i)&#123;</span><br><span class="line">            [arr[minIndex],arr[i]] = [arr[i],arr[minIndex]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(selectsort(arr))</span><br></pre></td></tr></table></figure></p><h1 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h1><p>åŸç†ï¼šå½“æ¯æ¬¡æ’åºçš„æ—¶å€™ï¼Œå¦‚æœå‰é¢çš„å…ƒç´ å¤§äºå½“å‰çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°†å‰é¢çš„å…ƒç´ è½¬æ¢æˆå½“å‰å…ƒç´ ï¼Œç»§ç»­æ¯”è¾ƒï¼Œæœ€åæ›¿æ¢å›æœ€å¼€å§‹è½¬æ¢çš„å…ƒç´ <br>æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)<br>eg<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span> <span class="number">3</span> <span class="number">2</span> <span class="number">4</span> <span class="number">1</span></span><br><span class="line">ç»è¿‡ç¬¬ä¸€è½®ï¼ˆå•ä¸ªå…ƒç´ å¯ä»¥å½“æˆæœ‰åºçš„æ•°åˆ—æ‰€ä»¥å¿½ç•¥ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ ä»index1å¼€å§‹ä¿å­˜å˜é‡ï¼Œä¹Ÿå°±æ˜¯temp3å’Œ<span class="number">5</span>å¯¹æ¯”</span><br><span class="line">å¦‚æœ<span class="number">3</span>&lt;<span class="number">5</span>ï¼Œ<span class="number">5</span>å°±åœ¨å‰é¢è…¾å‡ºä¸€ä¸ªä½ç½®ç»™<span class="number">3</span><span class="string">&#x27;5 5 2 4 1&#x27;</span> ï¼ˆarr[j-<span class="number">1</span>]=arr[j]ï¼‰;</span><br><span class="line">æœ€åè¿˜åŸtempå°±å˜æˆ</span><br><span class="line"><span class="number">3</span> <span class="number">5</span> <span class="number">2</span> <span class="number">4</span> <span class="number">1</span></span><br><span class="line">ç¬¬äºŒè½® å¯¹æ¯”<span class="number">5</span>å’Œ<span class="number">2</span> æ­¤æ—¶<span class="number">5</span>å‰é¢éœ€è¦è…¾å‡ºä¸€ä¸ªä½ç½®ç»™<span class="number">2</span>(<span class="number">2</span>&lt;<span class="number">5</span>)æ­¤æ—¶å˜æˆ<span class="string">&#x27;3 5 5 4 1&#x27;</span> ç„¶ååˆå‘ç°<span class="number">2</span>&lt;<span class="number">3</span>(j--) åˆ™ç»§ç»­è…¾ä½ç½®<span class="string">&#x27;3 3 5 4 1&#x27;</span>(ä½¿ç”¨<span class="keyword">while</span>çš„åŸå› )æœ€å</span><br><span class="line"><span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">4</span> <span class="number">1</span></span><br><span class="line">...</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure></p><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> j=i;</span><br><span class="line">        <span class="keyword">let</span> temp = arr[i];</span><br><span class="line">        <span class="keyword">while</span> (j&gt;<span class="number">0</span>&amp;&amp;arr[j-<span class="number">1</span>]&gt;temp) &#123;</span><br><span class="line">            arr[j] = arr[j-<span class="number">1</span>];<span class="comment">//arr[1]3-&gt;5</span></span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[j] = temp;<span class="comment">//arr[0]5-&gt;3</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h1><p>åŸç†ï¼šåˆ†è§£æ¯ä¸ªå­é—®é¢˜ï¼Œæ•´ä¸ªæ•°ç»„å¯ä»¥å¯¹åŠåˆ†å‰²ï¼Œä¸€ç›´åˆ°åˆ†å‰²æœ€å°çš„çŠ¶æ€ï¼Œç„¶åå¼€å§‹é€æ¸åˆå¹¶ï¼Œä»è§„æ¨¡1åˆ°è§„æ¨¡2ä¸€ç›´åˆ°è¿˜åŸå›æ•´ä¸ªæ•°ç»„ã€‚<br>æ—¶é—´å¤æ‚åº¦ï¼š</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç®—æ³•æŒ‡å—" scheme="https://zlinni.github.io/categories/%E7%AE%97%E6%B3%95%E6%8C%87%E5%8D%97/"/>
    
    
    <category term="ç®—æ³•" scheme="https://zlinni.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆTCPä¸UDP</title>
    <link href="https://zlinni.github.io/posts/2458362678/"/>
    <id>https://zlinni.github.io/posts/2458362678/</id>
    <published>2022-04-23T06:24:50.000Z</published>
    <updated>2022-04-25T02:41:30.113Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>webå‰ç«¯å¸¸è€ƒTCPä¸UDPçš„çŸ¥è¯†è§£æï¼ŒåŠ›äº‰åŸºç¡€è¾¾æ ‡ï¼Œå¾€åæ·±å…¥çš„ç‚¹åˆ†å¼€è¡¥å……~</p></div><p>å…³é”®è¯:TCP/UDPã€ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶ã€TCPç²˜åŒ…<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423142857.png" alt=""></p><h1 id="TCPå’ŒUDP"><a href="#TCPå’ŒUDP" class="headerlink" title="TCPå’ŒUDP"></a>TCPå’ŒUDP</h1><ol><li>tcpæ˜¯é¢å‘é“¾æ¥çš„ udpæ˜¯æ— è¿æ¥çš„å³å‘é€æ•°æ®å‰ä¸éœ€è¦å»ºç«‹è¿æ¥</li><li>tcpæä¾›å¯é çš„æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡tcpè¿æ¥å‘é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾ï¼Œudpå°½æœ€å¤§çš„åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ã€‚å¹¶ä¸”å› ä¸ºtcpå¯é ï¼Œé¢å‘è¿æ¥ï¼Œä¸ä¼šä¸¢å¤±æ•°æ®å› æ­¤é€‚åˆå¤§æ•°æ®é‡çš„äº¤æ¢</li><li>tcpæ˜¯é¢å‘å­—èŠ‚æµï¼Œudpé¢å‘æŠ¥æ–‡ï¼Œå¹¶ä¸”ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿å¾—å‘é€é€Ÿç‡é™ä½ï¼ˆå› æ­¤ä¼šäº§ç”Ÿä¸¢åŒ…ï¼Œå¯¹å®æ—¶çš„åº”ç”¨æ¯”å¦‚ipç”µè¯å’Œè§†é¢‘ä¼šè®®ç­‰ï¼‰</li><li>tcpåªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œudpæ”¯æŒ1å¯¹1 1å¯¹å¤š</li><li>tcpçš„é¦–éƒ¨è¾ƒå¤§ä¸º20å­—èŠ‚ udpåªæœ‰8å­—èŠ‚</li><li>tcpæ˜¯é¢å‘è¿æ¥çš„å¯é æ€§ä¼ è¾“ï¼Œudpæ˜¯ä¸å¯é çš„ </li></ol><h2 id="å¸¸è§ä½¿ç”¨åœºæ™¯"><a href="#å¸¸è§ä½¿ç”¨åœºæ™¯" class="headerlink" title="å¸¸è§ä½¿ç”¨åœºæ™¯"></a>å¸¸è§ä½¿ç”¨åœºæ™¯</h2><p>UDPï¼š</p><ul><li>ç›´æ’­</li><li>æ¸¸æˆ</li></ul><h1 id="TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹</h1><div class="note primary flat"><p>å»ºç«‹è¿æ¥å‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦é€šè¿‡æ¡æ‰‹æ¥ç¡®è®¤å¯¹æ–¹</p></div><ul><li>å®¢æˆ·ç«¯å‘é€SYNåŒæ­¥åºåˆ—ç¼–å·è¯·æ±‚ï¼Œè¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…ç¡®è®¤</li><li>æœåŠ¡ç«¯æ¥æ”¶å¹¶ç¡®è®¤SYNåŒ…ä¹‹åå‘é€SYN+ACKåŒ…ï¼Œè¿›å…¥SYN_RECVçŠ¶æ€</li><li>å®¢æˆ·ç«¯æ¥æ”¶SYN+ACKåŒ…ä¹‹åï¼Œå‘é€ACKåŒ…ï¼ŒåŒæ–¹è¿›å…¥ESTABLISHEDçŠ¶æ€</li></ul><h2 id="ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</h2><p>ä¸¾ä¾‹ï¼šå·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µ</p><ul><li>å¦‚æœå®¢æˆ·ç«¯å‘é€è¯·æ±‚æŠ¥æ–‡ä½†ç”±äºç½‘ç»œé—®é¢˜å¯¼è‡´æŠ¥æ–‡å¤±æ•ˆï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åå°±ä¼šå‘é€ç¡®è®¤æŠ¥æ–‡è¡¨ç¤ºåŒæ„è¿æ¥ã€‚æ­¤æ—¶å¦‚æœæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡ç«¯å·²ç»å»ºç«‹äº†æ–°çš„è¿æ¥ï¼Œä½†ç”±äºè¿™ä¸ªè¯·æ±‚æ˜¯å¤±æ•ˆçš„ï¼Œå®¢æˆ·ç«¯å¹¶æ²¡æœ‰å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡ç«¯å°±ä¼šæµªè´¹å¾ˆå¤šèµ„æºã€‚å¦‚æœæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡ç«¯æ”¶ä¸åˆ°ç¡®è®¤è¿æ¥çš„ä¿¡æ¯ï¼Œå°±çŸ¥é“å®¢æˆ·ç«¯æ²¡æœ‰å»ºç«‹è¿æ¥ã€‚è¿™å°±æ˜¯ä¸‰æ¬¡æ¡æ‰‹çš„ä½œç”¨ã€‚<div class="note primary flat"><p>TCPæœ‰å…­ç§æ ‡è¯†SYNå»ºç«‹è¿æ¥ï¼ŒACKç¡®è®¤ï¼ŒPSHä¼ é€ï¼ŒFINç»“æŸï¼ŒRSTé‡ç½®ï¼ŒURGç´§æ€¥</p></div></li></ul><h2 id="ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ"><a href="#ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ"></a>ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ</h2><ul><li>ç¬¬ä¸€æ¬¡ç¬¬äºŒæ¬¡æ¡æ‰‹ä¸èƒ½æºå¸¦æ•°æ®ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æ¡æ‰‹å’Œç¬¬äºŒæ¬¡æ¡æ‰‹æœåŠ¡ç«¯è¿˜æ²¡æœ‰å»ºç«‹è¿æ¥ï¼Œæ­¤æ—¶å‘é€æ•°æ®ä¼šè®©æœåŠ¡å™¨å—åˆ°æ”»å‡»ã€‚</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹æœåŠ¡å™¨å·²ç»å¤„äºESTABLISHEDçŠ¶æ€ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´å·²ç»å»ºç«‹äº†è¿æ¥ï¼Œå¹¶ä¸”ä¹ŸçŸ¥é“æœåŠ¡å™¨çš„æ¥æ”¶å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„äº†ï¼Œæ‰€ä»¥èƒ½æºå¸¦æ•°æ®ã€‚</li></ul><h1 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h1><div class="note primary flat"><p>ä¸ºäº†ç¡®ä¿æ•°æ®èƒ½å®Œæˆä¼ è¾“</p></div><ul><li>å®¢æˆ·ç«¯â€”FINâ€”&gt;æœåŠ¡ç«¯ï¼ŒFINâ€”â€”WAIT</li><li>æœåŠ¡ç«¯â€”ACKâ€”&gt;å®¢æˆ·ç«¯ï¼ŒCLOSEâ€”â€”WAIT</li><li>æœåŠ¡ç«¯â€”ACKï¼ŒFINâ€”&gt;å®¢æˆ·ç«¯ï¼ŒLASTâ€”â€”ACK</li><li>å®¢æˆ·ç«¯â€”ACKâ€”&gt;æœåŠ¡ç«¯ï¼ŒCLOSED</li></ul><h2 id="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</h2><ul><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNè¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚</li><li>ä½†æ˜¯åœ¨å…³é—­è¿æ¥çš„æ—¶å€™ï¼Œå½“æœåŠ¡ç«¯æ”¶åˆ°FINæŠ¥æ–‡çš„æ—¶å€™ ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹åˆ»å…³é—­è¿æ¥ï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼Œä½ å‘çš„FINæŠ¥æ–‡æ”¶åˆ°äº†ï¼Œåªæœ‰ç­‰æœåŠ¡å™¨æ‰€æœ‰çš„æŠ¥æ–‡å‘é€å®Œäº†æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ï¼Œæ•…éœ€è¦å››æ¬¡æŒ¥æ‰‹ã€‚ </li></ul><h1 id="æ‹¥å¡æ§åˆ¶"><a href="#æ‹¥å¡æ§åˆ¶" class="headerlink" title="æ‹¥å¡æ§åˆ¶"></a>æ‹¥å¡æ§åˆ¶</h1><div class="note primary flat"><p>ç½‘ç»œæ‹¥å¡ï¼ˆcongestionï¼‰æ˜¯æŒ‡åœ¨åˆ†ç»„äº¤æ¢ç½‘ç»œä¸­ä¼ é€åˆ†ç»„çš„æ•°ç›®å¤ªå¤šæ—¶ï¼Œç”±äºå­˜å‚¨è½¬å‘èŠ‚ç‚¹çš„èµ„æºæœ‰é™è€Œé€ æˆç½‘ç»œä¼ è¾“æ€§èƒ½ä¸‹é™çš„æƒ…å†µã€‚å½“ç½‘ç»œå‘ç”Ÿæ‹¥å¡æ—¶ï¼Œä¸€èˆ¬ä¼šå‡ºç°æ•°æ®ä¸¢å¤±ï¼Œæ—¶å»¶å¢åŠ ï¼Œååé‡ä¸‹é™ï¼Œä¸¥é‡æ—¶ç”šè‡³ä¼šå¯¼è‡´â€œæ‹¥å¡å´©æºƒâ€ï¼ˆcongestion collapseï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“ç½‘ç»œä¸­è´Ÿè½½è¿‡åº¦å¢åŠ è‡´ä½¿ç½‘ç»œæ€§èƒ½ä¸‹é™æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç½‘ç»œæ‹¥å¡ã€‚ä¸‹å›¾åˆ™æè¿°äº†åœ¨æœ‰æ— æ‹¥å¡æ§åˆ¶çš„å¹²é¢„ä¸‹ï¼Œç½‘ç»œååé‡éšè¾“å…¥è´Ÿè½½çš„å¢åŠ çš„å˜åŒ–æƒ…å†µã€‚</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423112204.png" alt=""><br>é€šè¿‡ä»¥ä¸Šçš„æè¿°ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>ç½‘ç»œæ‹¥å¡å¾€å¾€æ˜¯ç”±äºå¯¹èµ„æºçš„è¯·æ±‚è¶…å‡ºäº†å­˜å‚¨è½¬å‘èŠ‚ç‚¹çš„èƒ½åŠ›è€Œå¯¼è‡´çš„ã€‚</li><li>ç½‘ç»œæ‹¥å¡å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæ—¶å»¶å¢åŠ ï¼Œååé‡ä¸‹é™ç­‰é—®é¢˜ã€‚</li><li>è‹¥å‡ºç°æ‹¥å¡è€Œä¸è¿›è¡Œæ§åˆ¶ï¼Œæœ‰å¯èƒ½ä¼šä½¿æ•´ä¸ªç½‘ç»œæƒ…å†µæ¶åŒ–ï¼Œç”šè‡³ç½‘ç»œååé™ä¸º0ã€‚</li><li>ç½‘ç»œçš„æ‹¥å¡çŠ¶å†µä¸å½“å‰ç½‘ç»œè´Ÿè½½æ˜¯å¯†åˆ‡ç›¸å…³çš„ã€‚</li></ul><h2 id="æ‹¥å¡æ§åˆ¶ç®—æ³•"><a href="#æ‹¥å¡æ§åˆ¶ç®—æ³•" class="headerlink" title="æ‹¥å¡æ§åˆ¶ç®—æ³•"></a>æ‹¥å¡æ§åˆ¶ç®—æ³•</h2><ol><li>æ…¢å¯åŠ¨</li><li>æ‹¥å¡é¿å…</li><li>å¿«é‡ä¼ </li><li>å¿«æ¢å¤</li></ol><h1 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h1><p>å¦‚æœå‘é€æ–¹çš„æ•°æ®å‘é€è¿‡å¿«ï¼Œæ¥æ”¶è€…æ¥ä¸åŠæ¥æ”¶ï¼Œå°±æœ‰åˆ†ç»„ä¸¢å¤±ã€‚ä¸ºäº†é¿å…åˆ†ç»„ä¸¢å¤±ï¼Œæ§åˆ¶å‘é€è€…çš„å‘é€é€Ÿåº¦ï¼Œä½¿å¾—æ¥æ”¶è€…æ¥å¾—åŠæ¥æ”¶ï¼Œè¿™å°±æ˜¯æµé‡æ§åˆ¶ã€‚</p><p>æµé‡æ§åˆ¶çš„æ ¹æœ¬ç›®çš„æ˜¯é˜²æ­¢åˆ†ç»„ä¸¢å¤±ï¼Œå®ƒæ˜¯æ„æˆTCPå¯é æ€§çš„ä¸€æ–¹é¢</p><h2 id="å®ç°æµé‡æ§åˆ¶"><a href="#å®ç°æµé‡æ§åˆ¶" class="headerlink" title="å®ç°æµé‡æ§åˆ¶"></a>å®ç°æµé‡æ§åˆ¶</h2><p>æ»‘åŠ¨çª—å£åè®®ï¼ˆè¿ç»­ARQåè®®ï¼‰å®ç°ã€‚å®ƒä¿è¯äº†åˆ†ç»„æ— å·®é”™ï¼Œæœ‰åºæ¥æ”¶ï¼Œä¹Ÿå®ç°äº†æµé‡æ§åˆ¶ã€‚</p><p>ä¸»è¦çš„æ–¹å¼æ˜¯ æ¥æ”¶æ–¹è¿”å›çš„ackåŒ…ä¼šåŒ…å«è‡ªå·±æ¥æ”¶çª—å£çš„å¤§å°ï¼Œå¹¶ä¸”åˆ©ç”¨å¤§å°æ¥æ§åˆ¶å‘é€æ–¹çš„æ•°æ®å‘é€</p><h2 id="æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ-æ²¡çœ‹æ˜ç™½"><a href="#æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ-æ²¡çœ‹æ˜ç™½" class="headerlink" title="æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ(æ²¡çœ‹æ˜ç™½)"></a>æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ(æ²¡çœ‹æ˜ç™½)</h2><p>å½“å‘é€è€…æ”¶åˆ°äº†ä¸€ä¸ªçª—å£ä¸º0çš„åº”ç­”ï¼Œå‘é€è€…ä¾¿åœæ­¢å‘é€ï¼Œç­‰å¾…æ¥æ”¶è€…çš„ä¸‹ä¸€ä¸ªåº”ç­”ã€‚ä½†æ˜¯å¦‚æœè¿™ä¸ªçª—å£ä¸ä¸º0çš„åº”ç­”åœ¨ä¼ è¾“è¿‡ç¨‹ä¸¢å¤±ï¼Œå‘é€è€…ä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œè€Œæ¥æ”¶è€…ä»¥ä¸ºå‘é€è€…å·²ç»æ”¶åˆ°è¯¥åº”ç­”ï¼Œç­‰å¾…æ¥æ”¶æ–°æ•°æ®ï¼Œè¿™æ ·åŒæ–¹å°±ç›¸äº’ç­‰å¾…ï¼Œä»è€Œäº§ç”Ÿæ­»é”ã€‚ä¸ºäº†é¿å…æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼ŒTCPä½¿ç”¨äº†æŒç»­è®¡æ—¶å™¨ã€‚æ¯å½“å‘é€è€…æ”¶åˆ°ä¸€ä¸ªé›¶çª—å£çš„åº”ç­”åå°±å¯åŠ¨è¯¥è®¡æ—¶å™¨ã€‚æ—¶é—´ä¸€åˆ°ä¾¿ä¸»åŠ¨å‘é€æŠ¥æ–‡è¯¢é—®æ¥æ”¶è€…çš„çª—å£å¤§å°ã€‚è‹¥æ¥æ”¶è€…ä»ç„¶è¿”å›é›¶çª—å£ï¼Œåˆ™é‡ç½®è¯¥è®¡æ—¶å™¨ç»§ç»­ç­‰å¾…ï¼›è‹¥çª—å£ä¸ä¸º0ï¼Œåˆ™è¡¨ç¤ºåº”ç­”æŠ¥æ–‡ä¸¢å¤±äº†ï¼Œæ­¤æ—¶é‡ç½®å‘é€çª—å£åå¼€å§‹å‘é€ï¼Œè¿™æ ·å°±é¿å…äº†æ­»é”çš„äº§ç”Ÿã€‚</p><h2 id="æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«"><a href="#æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«" class="headerlink" title="æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«"></a>æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«</h2><p>æ‹¥å¡æ§åˆ¶å°±æ˜¯ä½œç”¨äºç½‘ç»œçš„ï¼Œå®ƒæ˜¯é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œé¿å…å‡ºç°ç½‘ç»œè´Ÿè½½è¿‡å¤§çš„æƒ…å†µã€‚å¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼šæ…¢å¼€å§‹ï¼Œæ‹¥å¡é¿å…ï¼Œå¿«é‡ä¼ ï¼Œå¿«æ¢å¤ã€‚</p><p>æµé‡æ§åˆ¶å°±æ˜¯ä½œç”¨äºæ¥æ”¶è€…çš„ï¼Œå®ƒæ˜¯æ§åˆ¶å‘é€è€…çš„å‘é€é€Ÿåº¦ä»è€Œä½¿å¾—æ¥æ”¶è€…æ¥å¾—åŠæ¥æ”¶ï¼Œé˜²æ­¢åˆ†ç»„ä¸¢å¤±</p><h1 id="TCPç²˜åŒ…"><a href="#TCPç²˜åŒ…" class="headerlink" title="TCPç²˜åŒ…"></a>TCPç²˜åŒ…</h1><h1 id="ä»€ä¹ˆæ˜¯TCPç²˜åŒ…"><a href="#ä»€ä¹ˆæ˜¯TCPç²˜åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯TCPç²˜åŒ…"></a>ä»€ä¹ˆæ˜¯TCPç²˜åŒ…</h1><div class="note primary flat"><p>ç°åœ¨å‡è®¾å®¢æˆ·ç«¯è¿ç»­å‘äº†ä¸¤ä¸ªæ•°æ®åŒ…ç»™æœåŠ¡ç«¯ï¼Œç”¨pack1å’Œpack2æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆå°±æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p></div><ol><li>æ¥æ”¶ç«¯æ­£å¸¸æ”¶åˆ°äº†ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423102351.png" alt=""></li><li>æ¥æ”¶ç«¯åªæ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå› ä¸ºTCPä¸ä¼šä¸¢åŒ…æ‰€ä»¥è¿™ä¸ªæ•°æ®åŒ…åŒ…å«äº†å‘é€ç«¯å‘é€çš„ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œè¿™å°±æ˜¯ç²˜åŒ…ã€‚æœåŠ¡ç«¯ä¸çŸ¥é“æ€ä¹ˆåˆ’åˆ†è¿™ä¸¤ä¸ªæ•°æ®åŒ…æ‰€ä»¥å¾ˆéš¾å¤„ç†ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423102618.png" alt=""></li><li>æ¥æ”¶ç«¯æ”¶åˆ°ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œä½†å®ƒä»¬éƒ½ä¸å®Œæ•´ã€‚è¿™ç§æƒ…å†µä¸‹å¯èƒ½æ˜¯pack1ä¸¢äº†ä¸€ç‚¹åˆ°pack2ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯pack2ä¸¢äº†ä¸€ç‚¹åˆ°pack1ï¼Œæ­¤æ—¶å‘ç”Ÿäº†ç²˜åŒ…æ‹†åŒ…<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423103042.png" alt=""></li></ol><h1 id="ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…"><a href="#ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…"></a>ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…</h1><p>åŸå› å¦‚ä¸‹ï¼š</p><ol><li>æœ¬èº«å¥—æ¥å­—ç¼“å†²åŒºå¤§å°ä¸è¶³ï¼Œä¸€æ¬¡å†™å…¥çš„æ•°æ®å¤šäº†ï¼Œå°±å‘ç”Ÿäº†æ‹†åŒ…</li><li>æœ¬èº«å¥—æ¥å­—ç¼“å†²åŒºè¿‡å¤§ï¼Œå¤šæ¬¡å†™å…¥æ•°æ®ï¼Œå°±å‘ç”Ÿäº†ç²˜åŒ…</li><li>TCPè¿æ¥å¤ç”¨ï¼Œæœ¬æ¥å•ç‹¬çš„è¿æ¥ä¸­åŒæ–¹è§„å®šå¥½äº†æ•°æ®æ ¼å¼ï¼Œä½†æ˜¯å› ä¸ºå¤ç”¨å¯¼è‡´å¤šä¸ªè¿›ç¨‹ä»¥åŠä¸åŒçš„æ•°æ®æ ¼å¼ä¼ è¾“ï¼Œå°±é€ æˆäº†ç²˜åŒ…</li><li>æ¥æ”¶æ–¹æ²¡åŠæ—¶æ¥æ”¶æ•°æ®ï¼Œå°±å‘ç”Ÿäº†ç²˜åŒ…</li></ol><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>è§£å†³æ–¹æ³•å°±æ˜¯å¤„ç†è¿™ä¸ªè¾¹ç•Œé—®é¢˜ã€‚</p><ol><li>å°¾éƒ¨æ ‡è¯†æ³•ï¼šé€šè¿‡åå•†çš„å°¾éƒ¨æ ‡è®°ï¼Œæ¯”å¦‚<code>\n\t\r</code>ç­‰æ¥è¯´æ˜è¿™æ˜¯è¾¹ç•Œ</li><li>å¤´éƒ¨æ ‡è®°æ³•ï¼šä¸æ˜¯ä¸çŸ¥é“é•¿åº¦å—ï¼Ÿç›´æ¥åœ¨TCPå¤´éƒ¨åŠ ä¸Šæ ‡è¯†æ•°æ®é•¿åº¦</li><li>å®šé•¿å‘é€æ³•ï¼šå‘é€ç«¯å°è£…æ•°æ®åŒ…ä¸ºæŒ‡å®šé•¿åº¦å‘é€</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç½‘ç»œç³»åˆ—" scheme="https://zlinni.github.io/categories/%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://zlinni.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•å®˜é—®æˆ‘äº†è§£TCPç²˜åŒ…å—</title>
    <link href="https://zlinni.github.io/posts/1161612098/"/>
    <id>https://zlinni.github.io/posts/1161612098/</id>
    <published>2022-04-23T02:10:31.000Z</published>
    <updated>2022-04-25T02:41:30.117Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>æœ‰ä¸€å¤©å°æ˜é«˜å…´çš„å»é¢è¯•ï¼Œçªç„¶é—´é¢è¯•å®˜æŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ˜¯TCPç²˜åŒ…ï¼Ÿè¿™ä¸‹å­å¥½äº†ï¼Œå°æ˜è„‘è¢‹æœç´¢äº†TCPçš„å†…å®¹ï¼Œå‘ç°åªæœç´¢åˆ°TCPå’ŒUDPçš„åŒºåˆ«ï¼Œæµé‡æ§åˆ¶ï¼Œæ‹¥å¡æ§åˆ¶ï¼Œå’Œä¸‰æ¡å››æŒ¥è¿™å‡ ä¸ªå†…å®¹ï¼Œå°æ˜å°´å°¬çš„è¯´ï¼šæˆ‘ä¸çŸ¥é“ã€‚äºæ˜¯å›æ¥æ¶è¡¥äº†TCPç²˜åŒ…çš„å†…å®¹</p></div><p>å…³é”®è¯ï¼šTCPç²˜åŒ…ã€æ‹†åŒ…<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423111651.png" alt=""></p><h1 id="ä»€ä¹ˆæ˜¯TCPç²˜åŒ…"><a href="#ä»€ä¹ˆæ˜¯TCPç²˜åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯TCPç²˜åŒ…"></a>ä»€ä¹ˆæ˜¯TCPç²˜åŒ…</h1><div class="note primary flat"><p>ç°åœ¨å‡è®¾å®¢æˆ·ç«¯è¿ç»­å‘äº†ä¸¤ä¸ªæ•°æ®åŒ…ç»™æœåŠ¡ç«¯ï¼Œç”¨pack1å’Œpack2æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆå°±æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p></div><ol><li>æ¥æ”¶ç«¯æ­£å¸¸æ”¶åˆ°äº†ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423102351.png" alt=""></li><li>æ¥æ”¶ç«¯åªæ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå› ä¸ºTCPä¸ä¼šä¸¢åŒ…æ‰€ä»¥è¿™ä¸ªæ•°æ®åŒ…åŒ…å«äº†å‘é€ç«¯å‘é€çš„ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œè¿™å°±æ˜¯ç²˜åŒ…ã€‚æœåŠ¡ç«¯ä¸çŸ¥é“æ€ä¹ˆåˆ’åˆ†è¿™ä¸¤ä¸ªæ•°æ®åŒ…æ‰€ä»¥å¾ˆéš¾å¤„ç†ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423102618.png" alt=""></li><li>æ¥æ”¶ç«¯æ”¶åˆ°ä¸¤ä¸ªæ•°æ®åŒ…ï¼Œä½†å®ƒä»¬éƒ½ä¸å®Œæ•´ã€‚è¿™ç§æƒ…å†µä¸‹å¯èƒ½æ˜¯pack1ä¸¢äº†ä¸€ç‚¹åˆ°pack2ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯pack2ä¸¢äº†ä¸€ç‚¹åˆ°pack1ï¼Œæ­¤æ—¶å‘ç”Ÿäº†ç²˜åŒ…æ‹†åŒ…<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423103042.png" alt=""></li></ol><h1 id="ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…"><a href="#ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…"></a>ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿç²˜åŒ…æ‹†åŒ…</h1><p>åŸå› å¦‚ä¸‹ï¼š</p><ol><li>æœ¬èº«å¥—æ¥å­—ç¼“å†²åŒºå¤§å°ä¸è¶³ï¼Œä¸€æ¬¡å†™å…¥çš„æ•°æ®å¤šäº†ï¼Œå°±å‘ç”Ÿäº†æ‹†åŒ…</li><li>æœ¬èº«å¥—æ¥å­—ç¼“å†²åŒºè¿‡å¤§ï¼Œå¤šæ¬¡å†™å…¥æ•°æ®ï¼Œå°±å‘ç”Ÿäº†ç²˜åŒ…</li><li>TCPè¿æ¥å¤ç”¨ï¼Œæœ¬æ¥å•ç‹¬çš„è¿æ¥ä¸­åŒæ–¹è§„å®šå¥½äº†æ•°æ®æ ¼å¼ï¼Œä½†æ˜¯å› ä¸ºå¤ç”¨å¯¼è‡´å¤šä¸ªè¿›ç¨‹ä»¥åŠä¸åŒçš„æ•°æ®æ ¼å¼ä¼ è¾“ï¼Œå°±é€ æˆäº†ç²˜åŒ…</li><li>æ¥æ”¶æ–¹æ²¡åŠæ—¶æ¥æ”¶æ•°æ®ï¼Œå°±å‘ç”Ÿäº†ç²˜åŒ…</li></ol><h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>è§£å†³æ–¹æ³•å°±æ˜¯å¤„ç†è¿™ä¸ªè¾¹ç•Œé—®é¢˜ã€‚</p><ol><li>å°¾éƒ¨æ ‡è¯†æ³•ï¼šé€šè¿‡åå•†çš„å°¾éƒ¨æ ‡è®°ï¼Œæ¯”å¦‚<code>\n\t\r</code>ç­‰æ¥è¯´æ˜è¿™æ˜¯è¾¹ç•Œ</li><li>å¤´éƒ¨æ ‡è®°æ³•ï¼šä¸æ˜¯ä¸çŸ¥é“é•¿åº¦å—ï¼Ÿç›´æ¥åœ¨TCPå¤´éƒ¨åŠ ä¸Šæ ‡è¯†æ•°æ®é•¿åº¦</li><li>å®šé•¿å‘é€æ³•ï¼šå‘é€ç«¯å°è£…æ•°æ®åŒ…ä¸ºæŒ‡å®šé•¿åº¦å‘é€</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç½‘ç»œç³»åˆ—" scheme="https://zlinni.github.io/categories/%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="é¢è¯•" scheme="https://zlinni.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰é“é¢˜ï¼Œå…¥é—¨asyncå’Œawait</title>
    <link href="https://zlinni.github.io/posts/1222301607/"/>
    <id>https://zlinni.github.io/posts/1222301607/</id>
    <published>2022-04-22T06:32:35.000Z</published>
    <updated>2022-04-25T02:41:30.127Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>å„å‚å¾ˆå–œæ¬¢è€ƒçš„asyncå’Œawaité¢˜ï¼Œä¸€èˆ¬ä¸äº†è§£ä»–çš„åšæ³•éƒ½å¾ˆå®¹æ˜“è¸©å‘ã€‚ä¸‹é¢ç”¨ä¸‰é“é¢˜æ¥è®²è§£æ€ä¹ˆè§£è¿™ç±»å‹çš„é¢˜ç›®<br>å…³é”®è¯:asyncã€awaitã€é¢˜è§£</p></div><h1 id="é¢˜ä¸€"><a href="#é¢˜ä¸€" class="headerlink" title="é¢˜ä¸€"></a>é¢˜ä¸€</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> async2()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">async1()</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">    resolve()</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€é“é—¨æ§›ï¼š<br>å¤§éƒ¨åˆ†äººåœ¨å‰é¢éƒ½æ²¡é—®é¢˜ï¼Œåˆ°awaitè¿™é‡Œå°±ä¼šå¡ä½ï¼Œæ­¤æ—¶å¯¹äºawaitçš„æƒ…å†µæ˜¯è¿™æ ·çš„ã€‚<br>ä»–ä¼šå»çœ‹è‡ªå·±ä¹‹åçš„ä»£ç ï¼Œ</p><ol><li>æŸ¥çœ‹å…¶ä¸­æ˜¯å¦æœ‰åŒæ­¥ä»£ç ï¼Œå¦‚æœæœ‰ï¼Œæ‰§è¡Œ</li><li>å¦‚æœæ²¡æœ‰ å…¶ä¸­å¼‚æ­¥çš„ç›´æ¥æ”¾åˆ°ä»»åŠ¡æ ˆ</li><li>åˆ†æawaitä¸‹é¢çš„ä»£ç <br>ç„¶åè·³å‡ºä»£ç ï¼Œç»§ç»­å¾€ä¸‹æŸ¥çœ‹</li></ol><p>å…¶ä¸­å…³äºawaitçš„æ“ä½œï¼Œå…¶å®æ˜¯<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">    resolve(async2());</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//è¿™ä¹Ÿå°±æ˜¯awaitåé¢çš„ä»£ç èƒ½çœ‹æˆæ˜¯å¾®ä»»åŠ¡çš„åŸå› </span></span><br></pre></td></tr></table></figure></p><p>å®ƒç­‰å¾…async2æ‰§è¡Œå®Œå›è°ƒè¿™ä¸ªè¾“å‡º</p><p>ç¬¬äºŒé“é—¨æ§›ï¼š<br>è¿™é‡Œå°±æ¥åˆ°ä¸‹é¢çœ‹æœ‰æ²¡æœ‰åŒæ­¥ä»£ç äº† è¿™é‡Œå°±æ˜¯ç¬¬äºŒæ­¥é—¨æ§›ï¼Œå¦‚æœä½ è®¤ä¸ºï¼Œä»–ç›´æ¥è¾“å‡ºâ€™script endâ€™ï¼Œé‚£ä¹ˆä½ å°±è¸©å‘äº†ã€‚è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°åœ¨æ­¤ä¹‹å‰newäº†Promiseï¼Œå…³é”®æ¥äº†ï¼Œä»–ä¼šç«‹åˆ»æ‰§è¡Œå®ƒçš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä½ å¯ä»¥æŠŠè¿™ä¸ªæ„é€ å‡½æ•°çœ‹æˆæ˜¯åŒæ­¥ä»£ç ï¼Œæ­¤æ—¶å°±ä¼šè¾“å‡º<code>promise1</code>.å†åˆ°<code>script end</code></p><p>ç¬¬ä¸‰é“é—¨æ§›ï¼š<br>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¾—çŸ¥é“ æ‰€æœ‰çš„åŒæ­¥ä»»åŠ¡éƒ½æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä»»åŠ¡æ ˆä¸­çš„ä»£ç äº†<br>æ­¤æ—¶çš„ä»»åŠ¡æ ˆä¸­æœ‰awaitä¹‹åçš„ä»£ç ï¼Œpromiseçš„æˆåŠŸå›è°ƒï¼Œå’Œsettimeoutï¼Œå½“ç„¶ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªé¡ºåºå‘¢ã€‚æˆ‘ä»¬è¦çŸ¥é“å¾®ä»»åŠ¡ä¼šæ’é˜Ÿåœ¨å®ä»»åŠ¡å‰é¢ï¼Œä¹Ÿå°±æ˜¯ä¸€å¼€å§‹çš„é¡ºåºæ˜¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">settimeout</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> code æ’é˜Ÿ</span><br><span class="line">settimeout</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡åˆ°promise æ’é˜Ÿåœ¨å®ä»»åŠ¡å‰é¢</span></span><br><span class="line"><span class="keyword">await</span> code</span><br><span class="line">promise </span><br><span class="line">settimeout</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æŒ‰é¡ºåºæ‰§è¡Œ ç»“æœæ˜¯<code>async1 end``promise2``setTimeout</code></p><p>æœ€ç»ˆç­”æ¡ˆï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220422151115.png" alt=""></p><h1 id="é¢˜äºŒ"><a href="#é¢˜äºŒ" class="headerlink" title="é¢˜äºŒ"></a>é¢˜äºŒ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> async2()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">      resolve()</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">async1()</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise3&#x27;</span>)</span><br><span class="line">    resolve()</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise4&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€é“é—¨æ§›ï¼š<br>async2ä¸­promiseçš„æ„é€ å™¨æ‰§è¡Œä¹‹åï¼Œå°†æˆåŠŸçš„å›è°ƒæ”¾è¿›ä»»åŠ¡æ ˆï¼Œå†å»æŠŠawaitä¸‹é¢çš„codeæ”¾è¿›ä»»åŠ¡æ ˆ</p><p>ä»»åŠ¡æ ˆçš„å†…å®¹ï¼ˆå¼‚æ­¥ï¼‰ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span></span><br><span class="line"></span><br><span class="line">promise2(æ’é˜Ÿ)</span><br><span class="line"><span class="built_in">setTimeout</span></span><br><span class="line"></span><br><span class="line">promise2</span><br><span class="line">async1 end(æ’é˜Ÿ)</span><br><span class="line"><span class="built_in">setTimeout</span></span><br><span class="line"></span><br><span class="line">promise2</span><br><span class="line">async1 end</span><br><span class="line">promise4(æ’é˜Ÿ)</span><br><span class="line"><span class="built_in">setTimeout</span></span><br></pre></td></tr></table></figure></p><p>æœ€ç»ˆç­”æ¡ˆ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1 start</span><br><span class="line">promise1</span><br><span class="line">promise3</span><br><span class="line">script end</span><br><span class="line">promise2</span><br><span class="line">async1 end</span><br><span class="line">promise4</span><br><span class="line"><span class="built_in">setTimeout</span></span><br></pre></td></tr></table></figure></p><h1 id="é¢˜ä¸‰"><a href="#é¢˜ä¸‰" class="headerlink" title="é¢˜ä¸‰"></a>é¢˜ä¸‰</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> async2()</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout1&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout2&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout3&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">async1()</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">    resolve()</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å‰é¢çš„ä¸€æ ·ï¼Œä¸è¿‡è¿™æ¬¡è¿›å…¥async2åæ˜¯å®ä»»åŠ¡ï¼Œæˆ‘ä»¬ä¾ç„¶æŠŠå®ƒæ”¾è¿›ä»»åŠ¡æ ˆï¼Œå†æŠŠ<br>è¸©å‘ç‚¹ï¼š<br>å®¹æ˜“å¿½è§†æ‰setimeout3æ˜¯ç¬¬ä¸€ä¸ªå®ä»»åŠ¡ã€‚<br>å› æ­¤ç­”æ¡ˆä¸ºsetimeout2 1 3 å®é™…ä¸Šæ˜¯3 2 1</p><p>æœ€ç»ˆç­”æ¡ˆ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1 start</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">promise2</span><br><span class="line">setTimeout3</span><br><span class="line">setTimeout2</span><br><span class="line">setTimeout1</span><br></pre></td></tr></table></figure></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸‰é“åŸºæœ¬çš„é¢˜ï¼ŒæŒæ¡äº†awaitçš„åŸºæœ¬åŸç†ã€‚å…¶å®å°±æ˜¯promiseçš„å›è°ƒã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="é¢è¯•æŒ‡å—" scheme="https://zlinni.github.io/categories/%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97/"/>
    
    
    <category term="é¢è¯•" scheme="https://zlinni.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>DNSåŸŸåç³»ç»Ÿ</title>
    <link href="https://zlinni.github.io/posts/3906343608/"/>
    <id>https://zlinni.github.io/posts/3906343608/</id>
    <published>2022-04-21T07:29:56.000Z</published>
    <updated>2022-04-25T02:41:30.109Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>webå‰ç«¯ä½ å¿…é¡»äº†è§£çš„DNSï¼Œä¸‹é¢è®²è§£DNSçš„ä¸€äº›è¿‡ç¨‹å’Œç”±æ¥ä»¥åŠäº§ç”Ÿçš„å®‰å…¨é—®é¢˜<br>å…³é”®è¯ï¼šDNSæ˜¯ä»€ä¹ˆã€DNSçš„åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“ã€æœ¬åœ°DNSæœåŠ¡å™¨ã€DNSé€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢ã€DNSç¼“å­˜ã€DNSåŠ«æŒ</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220422103253.png" alt=""></p><h1 id="ä»€ä¹ˆæ˜¯DNS"><a href="#ä»€ä¹ˆæ˜¯DNS" class="headerlink" title="ä»€ä¹ˆæ˜¯DNS"></a>ä»€ä¹ˆæ˜¯DNS</h1><p>DNSå³åŸŸåç³»ç»Ÿï¼Œå…¨ç§°æ˜¯Domain Name Systemã€‚å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ä¸€ä¸ªURLåœ°å€çš„æ—¶å€™ï¼Œæµè§ˆå™¨è¦å‘è¿™ä¸ªURLçš„ä¸»æœºåå¯¹äºçš„æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œå°±å¾—çŸ¥é“æœåŠ¡å™¨çš„IPã€‚å¯¹äºæµè§ˆå™¨æ¥è¯´ï¼ŒDNSçš„ä½œç”¨å°±æ˜¯å°†ä¸»æœºåè½¬æ¢ä¸ºIPåœ°å€ã€‚</p><div class="note primary flat"><p>DNSæ˜¯ï¼š</p><ol><li>ä¸€ä¸ªç”±åˆ†å±‚çš„DNSæœåŠ¡å™¨å®ç°çš„åˆ†å¸ƒå¼æ•°æ®åº“</li><li>ä¸€ä¸ªä½¿å¾—ä¸»æœºèƒ½å¤ŸæŸ¥é˜…åˆ†å¸ƒå¼æ•°æ®åº“çš„åº”ç”¨å±‚åè®®</li></ol></div><p>ä¹Ÿå°±æ˜¯ DNSæ˜¯ä¸€ä¸ªåº”ç”¨å±‚çš„åè®®ï¼Œæˆ‘ä»¬å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬è¦æŸ¥è¯¢çš„ä¸»æœºåï¼Œä»–å°±ä¼šç»™æˆ‘ä»¬è¿”å›è¿™ä¸ªä¸»æœºåå¯¹åº”çš„IPã€‚</p><p>å…¶æ¬¡ï¼ŒDNSæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œæ•´ä¸ªDNSç”±åˆ†æ•£åœ¨ä¸–ç•Œå„åœ°çš„å¾ˆå¤šå°DNSæœåŠ¡å™¨ç»„æˆï¼Œæ¯å°DNSæœåŠ¡å™¨ä¸Šé¢éƒ½ä¿å­˜äº†ä¸€äº›æ•°æ®ï¼Œè¿™äº›æ•°æ®å¯ä»¥è®©æˆ‘ä»¬æŸ¥åˆ°æœ€ç»ˆä¸»æœºåå¯¹åº”çš„IP</p><p>æ‰€ä»¥DNSçš„æŸ¥è¯¢è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å»å‘è¿™äº›DNSæœåŠ¡å™¨è®¿é—®ï¼Œç›´åˆ°æŸ¥åˆ°è¿™ä¸ªIPä¸ºæ­¢ã€‚</p><h1 id="åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“"><a href="#åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“" class="headerlink" title="åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“"></a>åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“</h1><h2 id="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼"><a href="#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼"></a>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼</h2><p>å› ä¸ºæ‰€æœ‰çš„ä¸»æœºä¸å¯èƒ½å…¨éƒ¨ipéƒ½æ”¾åœ¨ä¸€å°dnsæœåŠ¡å™¨ä¸Šé¢ï¼Œæ‰€ä»¥å°±ä¸€å°ä¸€å°åˆ†å‡ºæ¥ï¼Œæ¯å°å­˜å‚¨ä¸åŒçš„æ•°æ®ï¼Œè´Ÿè´£ä¸åŒçš„æ˜ å°„ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å±‚æ¬¡"><a href="#ä»€ä¹ˆæ˜¯å±‚æ¬¡" class="headerlink" title="ä»€ä¹ˆæ˜¯å±‚æ¬¡"></a>ä»€ä¹ˆæ˜¯å±‚æ¬¡</h2><p>DNSæœåŠ¡å™¨æœ‰ä¸‰ç§ç±»å‹ï¼šæ ¹DNSæœåŠ¡å™¨ï¼Œé¡¶çº§åŸŸDNSæœåŠ¡å™¨å’Œæƒå¨NDSæœåŠ¡å™¨ï¼Œ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421154505.png" alt=""></p><ul><li>æ ¹DNSæœåŠ¡å™¨<br>é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®æ ¹åŸŸåæ˜¯ä»€ä¹ˆï¼Ÿæ¯”å¦‚<code>www.baidu.com</code>å…¶å®ä»–çš„æ ¹åŸŸåæ˜¯è¢«éšè—çš„ã€‚çœŸæ­£çš„æ ¹åŸŸåæ˜¯<code>www.baidu.com.root</code>åé¢çš„.root</li></ul><p>é‚£ä¹ˆæ ¹DNSæœåŠ¡å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆ?å°±æ˜¯ç®¡ç†ä»–çš„ä¸‹ä¸€çº§ï¼Œä¹Ÿå°±æ˜¯é¡¶çº§åŸŸDNSæœåŠ¡å™¨ã€‚é€šè¿‡è¯¢é—®æ ¹DNSæœåŠ¡å™¨ï¼Œæˆ‘ä»¬èƒ½æŸ¥åˆ°è¯¥ä¸»æœºåå¯¹åº”çš„é¡¶çº§åŸŸçš„ipæ˜¯å¤šå°‘ï¼Œä»è€Œç»§ç»­å‘é¡¶çº§åŸŸè¯·æ±‚äº†è§£ä»–çš„ä¸‹ä¸€å±‚ã€‚</p><ul><li><p>é¡¶çº§åŸŸæœåŠ¡å™¨<br>é™¤äº†å‰é¢æåˆ°çš„comæ˜¯é¡¶çº§åŸŸåï¼Œå¸¸è§çš„é¡¶çº§åŸŸåè¿˜æœ‰cnï¼Œorgï¼Œeduç­‰ã€‚ç„¶åé¡¶çº§åŸŸç®¡ç†çš„æ˜¯æƒå¨DNS</p></li><li><p>æƒå¨DNS<br>ç”±å„å¤§å‚å•†è´Ÿè´£ç®¡ç†çš„åŸŸåï¼Œå®ƒå¯ä»¥è¿”å›æœ€ç»ˆçš„ä¸€ä¸ªIP</p></li></ul><p>æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦‚ä½•ç»§ç»­äº¤äº’çš„ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼š</p><h1 id="æœ¬åœ°DNSæœåŠ¡å™¨"><a href="#æœ¬åœ°DNSæœåŠ¡å™¨" class="headerlink" title="æœ¬åœ°DNSæœåŠ¡å™¨"></a>æœ¬åœ°DNSæœåŠ¡å™¨</h1><p>ä¸Šä¸€å±‚æ²¡æœ‰è®²åˆ°æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œæ˜¯å› ä¸ºä»–ä¸¥æ ¼æ„ä¹‰ä¸Šä¸å±äºDNSçš„å±‚æ¬¡ç»“æ„ã€‚</p><p>ä»€ä¹ˆæ˜¯æœ¬åœ°DNSæœåŠ¡å™¨ï¼Ÿ</p><p>æ¯ä¸ªISPéƒ½æœ‰ä¸€å°æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œæ¯”å¦‚å°åŒºï¼Œå¤§å­¦ï¼Œæœºæ„ç­‰ã€‚éƒ½æœ‰ä¸€å°æˆ–å¤šå°æœ¬åœ°DNSæœåŠ¡å™¨ã€‚å½“ä¸»æœºå‘å‡ºDNSè¯·æ±‚çš„æ—¶å€™ï¼Œè¯¥è¯·æ±‚è¢«å‘å¾€æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨ä»£ç†è¿™äº›è¯·æ±‚ï¼Œå°†å®ƒä»¬è½¬å‘åˆ°DNSæœåŠ¡å™¨ä¸­ã€‚å¥½æ¯”Nginx</p><h1 id="é€’å½’æŸ¥è¯¢-è¿­ä»£æŸ¥è¯¢"><a href="#é€’å½’æŸ¥è¯¢-è¿­ä»£æŸ¥è¯¢" class="headerlink" title="é€’å½’æŸ¥è¯¢ è¿­ä»£æŸ¥è¯¢"></a>é€’å½’æŸ¥è¯¢ è¿­ä»£æŸ¥è¯¢</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421155733.png" alt=""></p><p>å…¶ä¸­comæ˜¯é¡¶çº§åŸŸå næ˜¯æƒå¨åŸŸå </p><p>è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»æœºå‘æœ¬åœ°DNSæœåŠ¡å™¨è¯·æ±‚å°±æ˜¯é€’å½’æŸ¥è¯¢<br>æœ¬åœ°æœåŠ¡å™¨å‘æ ¹DNSï¼Œé¡¶çº§DNSå’Œæƒå¨DNSå‘å‡ºçš„è¯·æ±‚å°±æ˜¯è¿­ä»£æŸ¥è¯¢<br>è¿­ä»£çš„ç‰¹ç‚¹å°±æ˜¯æ‰€æœ‰çš„éƒ½æ˜¯ç”±æœ¬åœ°DNSå‘å‡º æ‰€æœ‰çš„æ¥æ”¶ä¹Ÿæ˜¯å›åˆ°æœ¬åœ°DNS</p><p>å½“ç„¶ä¸æ˜¯æ‰€æœ‰çš„DNSæŸ¥è¯¢éƒ½æ˜¯è¿™æ ·çš„æ¨¡å¼ DNSæŸ¥è¯¢å¯ä»¥æ˜¯é€’å½’çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿­ä»£çš„ å¦‚ä¸‹å›¾å°±åªæ˜¯é€’å½’çš„<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421160546.png" alt=""></p><h1 id="DNSç¼“å­˜"><a href="#DNSç¼“å­˜" class="headerlink" title="DNSç¼“å­˜"></a>DNSç¼“å­˜</h1><p>ä¸ºäº†è®©æˆ‘ä»¬æ›´å¿«çš„æ‹¿åˆ°æƒ³è¦çš„IPï¼ŒDNSå¹¿æ³›ä½¿ç”¨äº†ç¼“å­˜æŠ€æœ¯ã€‚DNSçš„ç¼“å­˜åŸç†å°±æ˜¯ï¼Œåœ¨ä¸€ä¸ªDNSæŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼ŒæŸå°DNSæ”¶åˆ°äº†ä¸€ä¸ªDNSåº”ç­”çš„æ—¶å€™ï¼Œå°±èƒ½å°†æ˜ å°„ç¼“å­˜åˆ°æœ¬åœ°ï¼Œä¸‹æ¬¡æŸ¥è¯¢å°±èƒ½ç›´æ¥ç”¨åˆ°ç¼“å­˜çš„å†…å®¹ã€‚</p><p>but ç¼“å­˜ä¸æ˜¯æ°¸ä¹…çš„ï¼Œä»–ä¹Ÿä¼šå®šæ—¶åˆ é™¤ã€‚</p><p>æ‰€ä»¥æœ‰äº†ç¼“å­˜ï¼Œå¾ˆå¤šæ—¶å€™éƒ½ç»•å¼€äº†æ ¹DNSï¼Œæ‰€ä»¥éœ€è¦å‘æ ¹DNSå‘èµ·çš„æŸ¥è¯¢è¯·æ±‚å¾ˆå°‘ã€‚</p><h1 id="DNSè§£æä¼˜åŒ–"><a href="#DNSè§£æä¼˜åŒ–" class="headerlink" title="DNSè§£æä¼˜åŒ–"></a>DNSè§£æä¼˜åŒ–</h1><p>ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ–¹æ¡ˆ</p><ul><li>DNSé¢„è§£æ</li><li>å‡å°‘DNSè¯·æ±‚</li></ul><h1 id="DNSé¢„è§£æ"><a href="#DNSé¢„è§£æ" class="headerlink" title="DNSé¢„è§£æ"></a>DNSé¢„è§£æ</h1><div class="note primary flat"><p>DNSè§£æä¹Ÿéœ€è¦æ—¶é—´çš„ï¼Œå¯ä»¥é€šè¿‡é¢„è§£æçš„æ–¹å¼æ¥é¢„å…ˆè·å–åŸŸåæ‰€å¯¹åº”çš„IP</p></div><p>linkæ–¹å¼ï¼šæ‰‹åŠ¨è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//blog.poetries.top&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>metaæ–¹å¼ï¼šhttpsè‡ªåŠ¨è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;x-dns-prefetch-control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;on&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>è®¾ç½®å“åº”å¤´ï¼šè‡ªåŠ¨è§£æ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.set(<span class="string">&#x27;X-DNS-Prefetch-Control&#x27;</span>, <span class="string">&#x27;on&#x27;</span>)</span><br></pre></td></tr></table></figure></p><h1 id="DNSåŠ«æŒ"><a href="#DNSåŠ«æŒ" class="headerlink" title="DNSåŠ«æŒ"></a>DNSåŠ«æŒ</h1><p>åŸŸååŠ«æŒå°±æ˜¯åœ¨åŠ«æŒçš„èŒƒå›´å†…æ‹¦æˆªè§£æçš„è¯·æ±‚ï¼Œåˆ†æè¯·æ±‚çš„åŸŸåï¼ŒæŠŠå®¡æŸ¥èŒƒå›´ä¹‹å¤–çš„è¯·æ±‚æ”¾è¡Œï¼Œå¦åˆ™ç›´æ¥è¿”å›å‡çš„IPåœ°å€æˆ–è€…ä»€ä¹ˆä¹Ÿä¸åšä½¿å…¶å¤±å»å“åº”ï¼Œæ•ˆæœå°±æ˜¯ç‰¹å®šçš„ç½‘å€ä¸èƒ½è®¿é—®æˆ–è€…è®¿é—®çš„æ˜¯å‡çš„ç½‘å€</p><p>åŸŸååŠ«æŒä¼šå½±å“ç”¨æˆ·ä½“éªŒï¼Œä¸€æ–¹é¢è¿˜æœ‰å¯èƒ½è¢«è¯±éª—åˆ°å†’ç‰Œç½‘ç«™è¿›è¡Œç™»é™†å¯¼è‡´éšç§æ³„æ¼</p><p>DNSå¯ä»¥æœ‰æœ¬åœ°DNSåŠ«æŒï¼Œè·¯ç”±DNSåŠ«æŒï¼Œæ”»å‡»DNSæœåŠ¡å™¨</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ol><li>åŠ å¼ºæœ¬åœ°çš„è®¡ç®—æœºç—…æ¯’æ£€æŸ¥ï¼Œå¼€å¯é˜²ç«å¢™ï¼Œé˜²æ­¢æ¶æ„è½¯ä»¶ï¼Œæœ¨é©¬æ„ŸæŸ“è®¡ç®—æœºç­‰ã€‚</li><li>æ”¹å˜è·¯ç”±å™¨é»˜è®¤å¯†ç ï¼Œé˜²æ­¢æ”»å‡»è€…ä¿®æ”¹è·¯ç”±å™¨çš„DNSé…ç½®æŒ‡å‘æ¶æ„çš„DNSæœåŠ¡å™¨ã€‚</li><li>ä¼ä¸šå¯ä»¥å‡†å¤‡ä¸¤ä¸ªorä»¥ä¸Šçš„åŸŸåï¼Œä¸€ä¸ªæŒ‚äº†ç”¨å¦å¤–ä¸€ä¸ª</li><li>ç”¨HTTP DNS ä»£æ›¿Local DNS</li></ol><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>DNSçš„å†…å®¹å…¶å®è®²æ·±äº†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œä½†æ˜¯åŸºæœ¬çš„åŸç†å’Œæ¦‚å¿µè¿˜æ˜¯è¦æ¸…æ¥šï¼Œç†Ÿæ‚‰ä¸€ä¸‹DNSè§£æçš„è¿‡ç¨‹ä»¥åŠè¿™ä¸ªé€’å½’å’Œè¿­ä»£ï¼Œå…³äºåŸŸåè¿™å—ä»¥åè¿˜æ˜¯ä¼šå‡ºæ–‡ç« ï¼Œæœ‰è´­ä¹°åŸŸåçš„æ‰“ç®—ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç½‘ç»œç³»åˆ—" scheme="https://zlinni.github.io/categories/%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç½‘ç»œ" scheme="https://zlinni.github.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥æµ…å‡ºFlexå¼¹æ€§å¸ƒå±€</title>
    <link href="https://zlinni.github.io/posts/1131280526/"/>
    <id>https://zlinni.github.io/posts/1131280526/</id>
    <published>2022-04-21T00:31:57.000Z</published>
    <updated>2022-04-25T02:41:30.064Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>è¯¦ç»†è®°å½•flexå¼¹æ€§å¸ƒå±€çš„å…·ä½“å±æ€§å’Œå¸¸è€ƒé¢˜ã€‚<br>å…³é”®è¯ï¼šflexå±æ€§ã€</p></div><h1 id="flexæ¦‚å¿µ"><a href="#flexæ¦‚å¿µ" class="headerlink" title="flexæ¦‚å¿µ"></a>flexæ¦‚å¿µ</h1><p>å¼¹æ€§ç›’å­æ˜¯ä¸€ç§æŒ‰è¡Œæˆ–è€…æŒ‰åˆ—å¸ƒå±€å…ƒç´ çš„ä¸€ç§ä»¥ä¸ºå¸ƒå±€æ–¹æ³•ï¼Œå®¹å™¨é‡Œé¢çš„å…ƒç´ å¯ä»¥è†¨èƒ€å¡«å……é¢å¤–çš„ç©ºé—´ï¼Œæ”¶ç¼©æ¥é€‚åº”æ›´å°çš„ç©ºé—´ï¼Œé€‚ç”¨äºä»»ä½•å…ƒç´ ã€‚</p><p>å…ƒç´ ä½¿ç”¨flexå¸ƒå±€å°±ä¼šåœ¨å†…éƒ¨å½¢æˆBFCï¼Œç›®å‰flexå·²ç»é€‚é…æ‰€æœ‰å¸¸è§„æµè§ˆå™¨</p><h2 id="æ‹“å±•ï¼šBFC"><a href="#æ‹“å±•ï¼šBFC" class="headerlink" title="æ‹“å±•ï¼šBFC"></a>æ‹“å±•ï¼šBFC</h2><p>BFCï¼šå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œæ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç©ºé—´ï¼Œé‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å¸ƒå±€ã€‚</p><p>è§¦å‘BFCçš„æ–¹å¼ï¼š</p><ul><li><code>overflow:hidden</code></li><li><code>display:inline-block,table-cell,flex</code></li><li><code>position:absolute,fixed</code></li></ul><p>BFCè§£å†³çš„é—®é¢˜ï¼š</p><ul><li>é«˜åº¦å¡Œé™·</li><li>marginè¾¹è·é‡å </li></ul><h1 id="flexå’Œinline-flex"><a href="#flexå’Œinline-flex" class="headerlink" title="flexå’Œinline-flex"></a>flexå’Œinline-flex</h1><p>displayæœ‰ä¸¤ç§è®¾ç½®æ–¹å¼ï¼šflexå’Œinline-flexã€‚</p><p>åŒºåˆ«åœ¨äºï¼š<br>flexå…ƒç´ å’Œå®½åº¦æ˜¯çˆ¶å®¹å™¨çš„100%<br>inline-flexæ˜¯æ‰€æœ‰å…ƒç´ çš„å®½åº¦å’Œ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421110404.png" alt=""></p><p>é‚£ä¹ˆåœ¨å…ƒç´ æº¢å‡ºçš„æƒ…å†µä¸‹æ˜¯æ€ä¹ˆæ ·å‘¢ï¼Ÿ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421110450.png" alt=""><br>å¯è§inline-flexä¼šæ’‘å¤§flexå®¹å™¨ï¼Œé€ æˆæº¢å‡º</p><p>ä½¿ç”¨inline-flexçš„æ—¶å€™ï¼Œæ³¨æ„é…åˆmin-widthå’Œmin-heightä¸€èµ·ä½¿ç”¨ã€‚ä¸å»ºè®®æ˜¾ç¤ºè®¾ç½®heightå’Œwidth</p><h2 id="å¸¸è§ä½¿ç”¨åœºæ™¯"><a href="#å¸¸è§ä½¿ç”¨åœºæ™¯" class="headerlink" title="å¸¸è§ä½¿ç”¨åœºæ™¯"></a>å¸¸è§ä½¿ç”¨åœºæ™¯</h2><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421110628.png" alt=""><br>å¯ä»¥æ€»ç»“ä¸º æ•´ä¸ªå®¹å™¨çš„è®¾ç½®flex ä¸å æ•´ä¸ªå®¹å™¨çš„æˆ–è€…å®¹å™¨çš„éƒ¨åˆ† è®¾ç½®ä¸ºinline-flex</p><h1 id="ä¸»è½´å’Œäº¤å‰è½´"><a href="#ä¸»è½´å’Œäº¤å‰è½´" class="headerlink" title="ä¸»è½´å’Œäº¤å‰è½´"></a>ä¸»è½´å’Œäº¤å‰è½´</h1><p>flexå¸ƒå±€æœ‰ä¸¤ä¸ªè½´çš„æ¦‚å¿µï¼šä¸»è½´å’Œäº¤å‰è½´ã€‚æ°´å¹³çš„å«åšä¸»è½´ï¼Œå‚ç›´çš„å«åšäº¤å‰è½´ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®å«åšstart ç»“æŸå«åšend äº¤å‰è½´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚<br>flexå¸ƒå±€çš„å…ƒç´ ç§°ä¸ºå®¹å™¨containerï¼Œä»–çš„æ‰€æœ‰å­å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªé¡¹ç›®item</p><h1 id="å®¹å™¨çš„å±æ€§"><a href="#å®¹å™¨çš„å±æ€§" class="headerlink" title="å®¹å™¨çš„å±æ€§"></a>å®¹å™¨çš„å±æ€§</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421085022.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421085431.png" alt=""></p><h2 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h2><ul><li>row:æ°´å¹³å·¦ å·¦å¯¹é½</li><li>row-reverse:æ°´å¹³å³ å³å¯¹é½</li><li>column: å‚ç›´ä¸Š ä¸Šå¯¹é½</li><li>column-reverse: å‚ç›´ä¸‹ ä¸‹å¯¹é½</li></ul><p>åœºæ™¯<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421110854.png" alt=""></p><p>ç”±äºé»˜è®¤ä¼šæºå¸¦<code>flex-direction:row</code>ï¼ˆä»£ç å†—ä½™ï¼‰æ‰€ä»¥åœ¨érowçš„æ—¶å€™å†è®¾ç½®flex-directionåšå¸ƒå±€ç®—æ³•ä¼˜åŒ–</p><h2 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h2><p>é»˜è®¤æƒ…å†µä¸‹å…ƒç´ ä¸æ¢è¡Œnowrapï¼ŒåŠ äº†wrapå±æ€§ä¹‹åï¼Œä¼šæ¢è¡Œ</p><ul><li>nowrap ä¸æ¢</li><li>wrap æ¢è¡Œ</li><li>wrap-reverse æ¢è¡Œ ç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹<br>eg<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span> <span class="number">6</span> <span class="literal">null</span> <span class="literal">null</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span>    <span class="number">4</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h2><p>æ˜¯directionå’Œwrapå±æ€§çš„ç®€å†™ é»˜è®¤ä¸ºrow nowrap<br>åªè®¾ç½®ä¸€ä¸ªå€¼çš„æ—¶å€™ çœ‹åŒ¹é…å“ªä¸ªå±æ€§å€¼ æ¥å–å€¼<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">flex-flow</span>: row || nowrap</span><br></pre></td></tr></table></figure></p><h2 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h2><p>æè¿°äº†å…ƒç´ åœ¨ä¸»è½´ä¸Šé¢çš„å¯¹é½æ–¹å¼</p><ul><li>flex-start å·¦å¯¹é½</li><li>flex-end å³å¯¹é½</li><li>center å±…ä¸­</li><li>space-around æ¯ä¸ªé¡¹ç›®ä¸¤ç«¯çš„é—´éš”ç›¸ç­‰ æ„å‘³ç€ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ä¸¤ä¾§çš„å®½åº¦ä¸ç­‰</li><li>space-between ä¸¤ç«¯å¯¹é½ é¡¹ç›®ä¹‹é—´çš„é—´éš”ç›¸ç­‰</li><li>space-evenly: é¡¹ç›®çš„é—´éš”å’Œå®¹å™¨çš„é—´éš”ç›¸ç­‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421090432.png" alt=""></p><h2 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h2><p>æè¿°å…ƒç´ åœ¨äº¤å‰è½´ä¸Šé¢çš„å¯¹é½æ–¹å¼</p><ul><li>flex-start ä¸Šå¯¹é½</li><li>flex-end ä¸‹å¯¹é½</li><li>center å±…ä¸­</li><li>baseline é¡¹ç›®ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½</li><li>stretch é»˜è®¤ å¦‚æœæ²¡è®¾ç½®é«˜åº¦æˆ–è€…auto åˆ™å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421090724.png" alt=""></p><h2 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h2><p>å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ å‰æè®¾ç½®flex-wrapï¼šwrap å¦åˆ™ä¸ç”Ÿæ•ˆ</p><ul><li>flex-start äº¤å‰è½´èµ·ç‚¹</li><li>flex-end äº¤å‰è½´ä¸­ç»ˆç‚¹</li><li>center ä¸­ç‚¹</li><li>space-between ä¸¤ç«¯å¯¹é½ è½´çº¿ä¹‹é—´å¹³å‡åˆ† </li><li>space-around  è½´çº¿é—´é—´éš”ç›¸ç­‰</li><li>stretch é»˜è®¤å€¼ å æ»¡æ•´ä¸ªäº¤å‰è½´</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421091427.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421111124.png" alt=""></p><h2 id="gap"><a href="#gap" class="headerlink" title="gap"></a>gap</h2><p>gapç”¨æ¥æ§åˆ¶flexé¡¹ç›®ä¹‹é—´çš„é—´è·ï¼Œä½†ä¼šå¿½ç•¥flexé¡¹ç›®ä¸flexå®¹å™¨è¾¹ç¼˜çš„é—´è·<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421111332.png" alt=""></p><h1 id="é¡¹ç›®çš„å­é¡¹å±æ€§"><a href="#é¡¹ç›®çš„å­é¡¹å±æ€§" class="headerlink" title="é¡¹ç›®çš„å­é¡¹å±æ€§"></a>é¡¹ç›®çš„å­é¡¹å±æ€§</h1><h2 id="order"><a href="#order" class="headerlink" title="order"></a>order</h2><p>å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåº æ•°å€¼è¶Šå°è¶Šå‰ é»˜è®¤0 å¯ä»¥æ˜¯è´Ÿæ•°<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421091444.png" alt=""></p><p>åœºæ™¯ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421111454.png" alt=""></p><h2 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a>flex-grow</h2><p>å®šä¹‰äº†å®¹å™¨ä¸­å‰©ä½™ç©ºé—´åº”è¯¥æœ‰å¤šå°‘åˆ†é…ç»™é¡¹ç›®ï¼Œæœ€ç»ˆçš„å®½åº¦ä¸ºï¼šè‡ªèº«å®½åº¦+å®¹å™¨å‰©ä½™ç©ºé—´åˆ†é…å®½åº¦ è¯¥å±æ€§çš„æœ€å¤§å€¼æ˜¯1 è¶…è¿‡1æŒ‰1æ¥æ‹“å±•<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421091802.png" alt=""></p><h2 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a>flex-shrink</h2><p>è¯¥å±æ€§æŒ‡å®šäº†flexå…ƒç´ çš„æ”¶ç¼©è§„åˆ™ã€‚åªåœ¨é¡¹ç›®çš„å…ƒç´ å®½åº¦å’Œå¤§äºå®¹å™¨çš„æ—¶å€™æ‰ä¼šè§¦å‘ã€‚æ”¶ç¼©çš„å¤§å°æ˜¯ä¾æ®è¯¥å±æ€§çš„å€¼ é»˜è®¤ä¸º1</p><p>eg ä¸¤ä¸ªdiv ç¬¬ä¸€ä¸ªdivå®½åº¦200 ç¬¬äºŒä¸ªdivå®½åº¦300 å®¹å™¨400<br>å®¹å™¨è®¾ç½®äº†flexå¸ƒå±€ ä¸¤ä¸ªdivçš„shrinkéƒ½è®¾ç½®ä¸º1<br>é‚£ä¹ˆæ­¤æ—¶ ä¸¤ä¸ªdiv500å¤§äº400 æ‰€ä»¥è§¦å‘æ”¶ç¼©</p><p>é‚£ä¹ˆæ”¶ç¼©åå­é¡¹çš„å®½åº¦æ€ä¹ˆè®¡ç®—å‘¢ï¼Ÿ<br>æœ‰å…¬å¼å¦‚ä¸‹</p><ol><li>æ‰€æœ‰å­é¡¹å®½åº¦å’Œ-å®¹å™¨çš„å®½åº¦=<code>500 - 400 = 100</code></li><li>ç¬¬ä¸€ä¸ªå­é¡¹çš„å æ¯” <code>2/5</code> ç¬¬äºŒä¸ªå­é¡¹çš„å æ¯” <code>3/5</code></li><li>ç¬¬ä¸€ä¸ªå­é¡¹çš„å®½åº¦ä¸º<code>200-2/5*100=160</code>,ç¬¬äºŒä¸ªä¸º:<code>300-3/5*100=240</code></li></ol><h2 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a>flex-basis</h2><p>æŒ‡å®šå­é¡¹ç›®çš„åœ¨ä¸»è½´çš„åˆå§‹åŒ–å¤§å°ï¼Œä¼˜å…ˆçº§é«˜äºè‡ªèº«å®½åº¦width<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">flex-basis</span>: <span class="number">0</span> | <span class="number">100%</span> | auto | &lt;length&gt;</span><br></pre></td></tr></table></figure></p><h2 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h2><p>flexæ˜¯flex-grow flex-shrink å’Œ flex-basisçš„ç®€å†™<br>å•å€¼çš„æ—¶å€™ æ•°å€¼è¢«å½“ä½œflexgrow ä¸€ä¸ªæœ‰æ•ˆçš„å®½åº¦å€¼è¢«å½“ä½œbasis<br>åŒå€¼çš„æ—¶å€™ ä¸€ä¸ªæ— å•ä½çš„æ•° è¢«å½“æˆshrink ä¸€ä¸ªæœ‰æ•ˆçš„å®½åº¦å€¼è¢«å½“æˆbasis<br>ä¸‰å€¼ ç•¥</p><p>é»˜è®¤ 0 1 auto</p><p>å–å€¼ï¼Œé™¤äº†è‡ªå®šä¹‰çš„ä¸‰ç§å¤–ï¼š<br><code>auto</code>æ ¹æ®è‡ªèº«çš„widthå’Œheightæ¥ç¡®å®šæ¯”ä¾‹ ç›¸å½“äº<code>1 1 auto</code><br><code>initial</code>ç›¸å½“äº0 1 auto<br><code>none</code> 0 0 auto</p><h2 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h2><p>å…è®¸å•ä¸ªé¡¹ç›®æœ‰å’Œå…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯ä»¥è¦†ç›–align-itemså±æ€§ï¼Œé»˜è®¤autoè¡¨ç¤ºç»§æ‰¿align-items å¦‚æœæ²¡æœ‰çˆ¶å…ƒç´  åˆ™ç­‰äºstretch<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421092936.png" alt=""></p><p>å¸¸è§ä½¿ç”¨åœºæ™¯<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421111420.png" alt=""></p><h1 id="Flexé¡¹ç›®ä¸Šçš„-margin"><a href="#Flexé¡¹ç›®ä¸Šçš„-margin" class="headerlink" title="Flexé¡¹ç›®ä¸Šçš„ margin"></a>Flexé¡¹ç›®ä¸Šçš„ margin</h1><p>åœ¨Flexé¡¹ç›®æ˜¾å¼è®¾ç½® margin çš„å€¼ä¸º auto å¯ä»¥çµæ´»çš„æ§åˆ¶å•ä¸ªFlexé¡¹ç›®åœ¨Flexå®¹å™¨ä¸­çš„ä½ç½®ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421105904.png" alt=""><br>æ¯”å¦‚åƒä¸‹å›¾è¿™æ ·çš„æ•ˆæœï¼Œä½¿ç”¨ margin-left: auto å°±éå¸¸çš„å®ç”¨ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421105923.png" alt=""></p><h1 id="å¸¸è§åœºæ™¯"><a href="#å¸¸è§åœºæ™¯" class="headerlink" title="å¸¸è§åœºæ™¯"></a>å¸¸è§åœºæ™¯</h1><p>ç­‰é«˜å¸ƒå±€</p><p>å·¦ä¾§å®½åº¦å›ºå®š å³ä¾§å®½åº¦è‡ªé€‚åº”å¸ƒå±€ï¼ˆå¸¸è§çš„tobç³»ç»Ÿå¸ƒå±€ï¼Œå·¦ä¾§èœå•æ ‘å³ä¾§å†…å®¹ï¼‰<br>ç²˜æ€§é¡µè„š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220421105548.png" alt=""><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex__container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;coupon&quot;</span>&gt;</span>å·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span><span class="symbol">&amp;yen;</span>1000<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.flex__container &#123;</span><br><span class="line">  display: inline-flex;</span><br><span class="line">  min-width: 200px;</span><br><span class="line">  height: 60px;</span><br><span class="line">  </span><br><span class="line">  border: 1px solid rgba(255, 0, 54, 1);</span><br><span class="line">  background-color: rgba(255, 0, 54, 0.1);</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  color: #ff0036;</span><br><span class="line">  font-size: 24px;</span><br><span class="line">  font-weight: 400;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.flex__container &gt; span &#123;</span><br><span class="line">  display: inline-flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.divider &#123;</span><br><span class="line">  border-right: 1px dashed currentColor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.coupon &#123;</span><br><span class="line">  min-width: 50px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.price &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  min-width: 0;</span><br><span class="line">  padding: 0 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="CSSç³»åˆ—" scheme="https://zlinni.github.io/categories/CSS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="é¢è¯•" scheme="https://zlinni.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptåˆé›†</title>
    <link href="https://zlinni.github.io/posts/3250811507/"/>
    <id>https://zlinni.github.io/posts/3250811507/</id>
    <published>2022-04-20T07:40:52.000Z</published>
    <updated>2022-04-25T02:44:03.713Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>å°†2wå­—é•¿æ–‡åˆ†æˆäº†ä¸ƒä¸ªæ¨¡å—ï¼Œæ–¹ä¾¿ä»Šåè¡¥å……å†…å®¹ï¼Œè¯¦è§ä¼ é€é—¨ã€‚</p></div><h1 id="ä¼ é€é—¨"><a href="#ä¼ é€é—¨" class="headerlink" title="ä¼ é€é—¨"></a>ä¼ é€é—¨</h1><p><a href="https://zlinni.github.io/posts/3931945421/">ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘ â€”æ•°æ®ç±»å‹åŠå‘¨è¾¹</a><br><a href="https://zlinni.github.io/posts/961371178/">ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¡â€”thisåŠå‘¨è¾¹</a><br><a href="https://zlinni.github.io/posts/1060178397/">ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¢â€”åŸå‹åŠå‘¨è¾¹</a><br><a href="https://zlinni.github.io/posts/3693633031/">ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘£â€”å¼‚æ­¥ä»»åŠ¡ä¸äº‹ä»¶</a><br><a href="https://zlinni.github.io/posts/3693633031/">ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¤â€”åƒåœ¾å›æ”¶ä¸å†…å­˜æ³„æ¼</a><br><a href="https://zlinni.github.io/posts/3318597918/">ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¥â€”é¢å‘å¯¹è±¡ä¸æ¨¡å—åŒ–</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¥--é¢å‘å¯¹è±¡ä¸æ¨¡å—åŒ–</title>
    <link href="https://zlinni.github.io/posts/3318597918/"/>
    <id>https://zlinni.github.io/posts/3318597918/</id>
    <published>2022-04-20T07:32:49.000Z</published>
    <updated>2022-04-25T02:41:30.083Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h1><div class="note simple"><p>é¢å‘å¯¹è±¡ã€è¿­ä»£å™¨ã€æ¨¡å—åŒ–</p></div><h1 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h1><h2 id="å¯¹è±¡éå†"><a href="#å¯¹è±¡éå†" class="headerlink" title="å¯¹è±¡éå†"></a>å¯¹è±¡éå†</h2><ol><li><code>for in</code></li><li><code>Object.keys(xxx)</code>æŠŠkeyå–å‡ºæ¥ä½œä¸ºä¸€ä¸ªæ•°ç»„ã€‚</li><li><code>Object.values(xxx)</code>éå†å¯¹è±¡çš„å€¼ä½œä¸ºä¸€ä¸ªæ•°ç»„<h2 id="ç¼–ç¨‹æ€æƒ³"><a href="#ç¼–ç¨‹æ€æƒ³" class="headerlink" title="ç¼–ç¨‹æ€æƒ³"></a>ç¼–ç¨‹æ€æƒ³</h2></li></ol><ul><li>åŸºæœ¬æ€æƒ³æ˜¯ä½¿ç”¨å¯¹è±¡ï¼Œç±»ï¼Œç»§æ‰¿ï¼Œå°è£…ç­‰åŸºæœ¬æ¦‚å¿µæ¥è¿›è¡Œç¨‹åºè®¾è®¡</li><li>ä¼˜ç‚¹ï¼š<ul><li>æ˜“ç»´æŠ¤ï¼šé‡‡ç”¨é¢å‘å¯¹è±¡æ€æƒ³è®¾è®¡çš„ç»“æ„ï¼Œå¯è¯»æ€§é«˜ï¼Œç”±äºç»§æ‰¿çš„å­˜åœ¨ï¼Œå³ä½¿æ”¹å˜éœ€æ±‚ï¼Œç»´æŠ¤ä¹Ÿåªæ˜¯åœ¨å±€éƒ¨æ¨¡å—ï¼Œæ‰€ä»¥ç»´æŠ¤èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œæˆæœ¬è¾ƒä½</li><li>æ˜“æ‹“å±•</li><li>å¼€å‘å·¥ä½œçš„é‡ç”¨æ€§ï¼Œç»§æ‰¿æ€§é«˜ï¼Œé™ä½é‡å¤å·¥ä½œé‡</li><li>ç¼©çŸ­äº†å¼€å‘å‘¨æœŸ<div class="note primary flat"><p>ä¸€èˆ¬é¢å‘å¯¹è±¡åŒ…æ‹¬ï¼šç»§æ‰¿ï¼Œå°è£…ï¼Œå¤šæ€ï¼ŒæŠ½è±¡</p></div></li></ul></li></ul><h2 id="å¯¹è±¡å½¢å¼çš„ç»§æ‰¿"><a href="#å¯¹è±¡å½¢å¼çš„ç»§æ‰¿" class="headerlink" title="å¯¹è±¡å½¢å¼çš„ç»§æ‰¿"></a>å¯¹è±¡å½¢å¼çš„ç»§æ‰¿</h2><div class="note primary flat"><p>è®²æ·±æµ…æ‹·è´ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹åœ¨æ ˆé‡Œé¢ï¼Œè¢«å¤åˆ¶äº†å°±ç®—ä¿®æ”¹ä¹Ÿä¸ä¼šæ”¹å˜åŸæ¥çš„çš„å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»å‹åœ¨å †é‡Œé¢ï¼Œå› ä¸ºå…±äº«å†…å­˜æ‰€ä»¥å¤åˆ¶åè¢«ä¿®æ”¹ä¼šæ”¹å˜æºå¯¹è±¡çš„å€¼ï¼Œè‡³æ­¤å¼•ç”³å‡ºæ·±æµ…æ‹·è´ã€‚</p></div><ul><li>æµ…æ‹·è´<div class="note primary flat"><p>åŸºæœ¬çš„æµ…æ‹·è´å°±æ˜¯å¯¹è±¡çš„èµ‹å€¼ï¼Œä½†æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œå®é™…ä¸Šæˆ‘ä»¬çš„éœ€æ±‚æ˜¯å¤åˆ¶æºå¯¹è±¡ä¸Šé¢çš„å±æ€§ï¼Œé‚£ä¹ˆå•çº¯çš„èµ‹å€¼ï¼Œä¼šæŠŠæ–°å¯¹è±¡çš„å€¼ç»™è¦†ç›–æ‰ã€‚å‚è§ä¸‹é¢</p></div></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;allin&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123;</span><br><span class="line">        <span class="attr">home</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">        <span class="attr">office</span>: <span class="string">&#x27;office&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">sclools</span>: [<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;z&#x27;</span>],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> programer = &#123;</span><br><span class="line">    <span class="attr">language</span>: <span class="string">&#x27;js&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å¦‚æœä¸ä½¿ç”¨è¯¥æ–¹æ³• programmeré‡Œé¢çš„languageä¼šè¢«è¦†ç›–æ‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">p, c</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c = c || &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">var</span> prop <span class="keyword">in</span> p)&#123;</span><br><span class="line">        c[prop] = p[prop];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">extend(Person, programer);</span><br><span class="line"><span class="comment">//or </span></span><br><span class="line"><span class="comment">// programer = Object.assign(programer,Person);</span></span><br><span class="line">programer.name;  <span class="comment">// allin</span></span><br><span class="line">programer.address.home;  <span class="comment">// home</span></span><br><span class="line">programer.address.home = <span class="string">&#x27;house&#x27;</span>;  <span class="comment">//house</span></span><br><span class="line">Person.address.home;  <span class="comment">// house</span></span><br><span class="line"><span class="comment">//programmerä¾æ—§ä¿ç•™è‡ªå·±çš„language</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><p>æ³¨æ„ æµ…æ‹·è´ä¸æ˜¯æ–°å¯¹è±¡çš„åœ°å€æŒ‡å‘æ•´ä¸ªæ—§å¯¹è±¡çš„åœ°å€ï¼Œè€Œæ˜¯æ‹·è´æ—§å¯¹è±¡çš„å±æ€§çš„åœ°å€ã€‚å³è‡ªå·±åŸå…ˆçš„å†…å®¹ä¸å˜ï¼Œæ‹·è´çš„è¿‡ç¨‹ä¸­å¦‚æœkeyé‡å¤è¦†ç›–ï¼Œå¦åˆ™ä¿ç•™ã€‚<br>æ€è·¯æ˜¯éå†å¯¹è±¡ èµ‹å€¼ã€‚</p></div><p>æ·±æ‹·è´<br><div class="note primary flat"><p>æ·±æ‹·è´æ˜¯å¼€è¾Ÿä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€ï¼Œå°†æºå¯¹è±¡çš„å„ä¸ªå±æ€§å¤åˆ¶è¿›å»<br>æ³¨æ„çš„ç‚¹ï¼šå¯¹è±¡åŸå‹ä¸Šé¢çš„å±æ€§ä¸åº”è¯¥å»æ‹·è´ï¼Œä½¿ç”¨åˆ°<code>Object.hasOwnProperty(key)</code></p></div></p><ol><li>é€šè¿‡<code>JSON.parse(JSON.stringfy())</code>è¿›è¡Œæ·±æ‹·è´</li></ol><ul><li>æ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ï¼Œåºåˆ—åŒ–æ˜¯å­˜å‚¨åœ°å€çš„ä¸€ä¸ªæ˜ å°„ï¼Œæ‰€ä»¥ååºåˆ—åŒ–ä¹‹åï¼Œä¿®æ”¹å¹¶ä¸ä¼šå½±å“åŸå…ˆçš„åœ°å€ã€‚å°±å¯ä»¥è¾¾æˆæ·±æ‹·è´ã€‚</li><li>ç¼ºç‚¹ï¼šä¸èƒ½æ‹·è´<code>undefined function æ­£åˆ™ Errorå¯¹è±¡</code></li></ul><ol><li>é€’å½’</li></ol><ul><li>é€šè¿‡åˆ¤æ–­å¼•ç”¨ç±»å‹æ•°æ®è¿›è¡Œåˆå§‹åŒ–ä¹‹åèµ‹å€¼çš„æ“ä½œæŒ‡å‘æ–°çš„åœ°å€ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å¼•ç”¨ç±»å‹æˆ–è€…null å¦åˆ™è¿”å›æºå¯¹è±¡è¿›è¡Œæµ…æ‹·è´</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>||obj===<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ï¼Œåˆå§‹åŒ–åœ°å€ã€‚</span></span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</span><br><span class="line">        result = [];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        result = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€’å½’è°ƒç”¨ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">            result[key] = deepClone(obj[key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></li><li>ç¼ºç‚¹ï¼šæ ˆä¼šæº¢å‡ºã€‚</li></ul><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><ul><li>å‘½åç©ºé—´<ul><li>jsæ˜¯æ²¡æœ‰å‘½åç©ºé—´çš„ï¼Œå› æ­¤å¯ä»¥ç”¨å¯¹è±¡æ¥æ¨¡æ‹Ÿ</li></ul></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = &#123;&#125;<span class="comment">//å‘½åç©ºé—´app</span></span><br><span class="line"><span class="comment">//æ¨¡å—1</span></span><br><span class="line">app.module1 = &#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&#x27;allin&#x27;</span>,</span><br><span class="line">  <span class="attr">f</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;hi&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">app.module1.name;</span><br><span class="line">app.module1.f();</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>å¯¹è±¡çš„å±æ€§å¤–ç•Œæ˜¯å¯è¯»å¯å†™çš„ï¼Œé‚£ä¹ˆå¦‚ä½•è¾¾åˆ°å°è£…çš„ç›®çš„ï¼Ÿé€šè¿‡é—­åŒ…å’Œå±€éƒ¨å˜é‡</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Girl</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//é€šè¿‡æ–¹æ³•è®¿é—®å˜é‡</span></span><br><span class="line">  <span class="keyword">var</span> love = <span class="string">&#x27;jojo&#x27;</span>;</span><br><span class="line">  <span class="built_in">this</span>.name =name;</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">  <span class="built_in">this</span>.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> love;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.movelove = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    love = <span class="string">&#x27;aaa&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> g = <span class="keyword">new</span> Girl(<span class="string">&#x27;bb&#x27;</span>,<span class="number">19</span>);</span><br><span class="line">g.say();</span><br><span class="line">g.movelove();</span><br><span class="line">g.say();</span><br></pre></td></tr></table></figure><h2 id="é™æ€æˆå‘˜"><a href="#é™æ€æˆå‘˜" class="headerlink" title="é™æ€æˆå‘˜"></a>é™æ€æˆå‘˜</h2><div class="note primary flat"><p>å°±æ˜¯åœ¨å‡½æ•°å¤–é¢å®šä¹‰é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•åªæœ‰è¯¥ç±»èƒ½å¤Ÿä½¿ç”¨ã€‚</p></div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜</span></span><br><span class="line">Person.walk = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;static&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Person.walk();  <span class="comment">// static</span></span><br></pre></td></tr></table></figure><h2 id="ç§æœ‰ä¸å…¬æœ‰"><a href="#ç§æœ‰ä¸å…¬æœ‰" class="headerlink" title="ç§æœ‰ä¸å…¬æœ‰"></a>ç§æœ‰ä¸å…¬æœ‰</h2><div class="note primary flat"><p>å¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§åˆ†ä¸ºç§æœ‰å’Œå…¬æœ‰ï¼Œå…¬æœ‰çš„å±æ€§éœ€è¦åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼ å…¥å¯¹åº”çš„å€¼å»è°ƒç”¨ï¼Œç§æœ‰çš„å±æ€§å’Œæ–¹æ³•åªèƒ½é€šè¿‡å…¬æœ‰çš„æ–¹æ³•æš´éœ²å‡ºå»ã€‚æ³¨æ„ç§æœ‰çš„æ–¹æ³•å¦‚æœè¿”å›çš„æ˜¯å…¬æœ‰çš„å±æ€§ï¼Œè¿˜éœ€è¦ä½¿ç”¨callæ”¹å˜thisæŒ‡å‘</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰å±æ€§ä¸æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&#x27;allin&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> work = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.id);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//å…¬æœ‰å±æ€§ä¸æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">this</span>.id = id;</span><br><span class="line">    <span class="built_in">this</span>.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;say hello&#x27;</span>);</span><br><span class="line">        work.call(<span class="built_in">this</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="number">123</span>);</span><br><span class="line">p1.name; <span class="comment">// undefined</span></span><br><span class="line">p1.id;  <span class="comment">// 123</span></span><br><span class="line">p1.say();  <span class="comment">// say hello 123</span></span><br></pre></td></tr></table></figure><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><div class="note primary flat"><p>åŒä¸€ä¸ªçˆ¶ç±»ç»§æ‰¿å‡ºæ¥çš„å­ç±»æœ‰å„è‡ªçš„å½¢æ€,å†™çš„æ—¶å€™æ³¨æ„<code>å­ç±»,prototype = new çˆ¶ç±»()</code></p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.eat = <span class="string">&#x27;è‚‰&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Tiger</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.color = <span class="string">&#x27;é»‘é»„ç›¸é—´&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cheetah</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.color = <span class="string">&#x27;æŠ¥æ–‡&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lion</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.color = <span class="string">&#x27;åœŸé»„è‰²&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Tiger.prototype =  Cheetah.prototype = Lion.prototype = <span class="keyword">new</span> Cat();<span class="comment">//å…±äº«ä¸€ä¸ªç¥–å…ˆ Cat</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> T = <span class="keyword">new</span> Tiger();</span><br><span class="line"><span class="keyword">var</span> C = <span class="keyword">new</span> Cheetah();</span><br><span class="line"><span class="keyword">var</span> L = <span class="keyword">new</span> Lion();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(T.color);</span><br><span class="line"><span class="built_in">console</span>.log(C.color);</span><br><span class="line"><span class="built_in">console</span>.log(L.color);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(T.eat);</span><br><span class="line"><span class="built_in">console</span>.log(C.eat);</span><br><span class="line"><span class="built_in">console</span>.log(L.eat);</span><br></pre></td></tr></table></figure><h2 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h2><div class="note primary flat"><p>è™šå‡½æ•°æ˜¯ç±»æˆå‘˜ä¸­çš„æ¦‚å¿µï¼Œæ˜¯åªåšäº†ä¸€ä¸ªå£°æ˜è€Œæœªå®ç°çš„æ–¹æ³•ï¼Œå…·æœ‰è™šå‡½æ•°çš„ç±»ç§°ä¹‹ä¸ºæŠ½è±¡ç±»ã€‚æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–å› ä¸ºå…¶ä¸­çš„è™šå‡½æ•°å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‡½æ•°ï¼Œä¸èƒ½è¢«è°ƒç”¨ã€‚<br>åœ¨jsä¸­å®ç°æŠ½è±¡ç±»å°±æ˜¯åœ¨çˆ¶ç±»ä¸­è°ƒç”¨ä¸€ä¸ªæœªå®šä¹‰çš„æ–¹æ³•ï¼Œä½†è¿™ä¸ªæ–¹æ³•åœ¨å­ç±»ä¸­å¿…é¡»è¢«å®ç°ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AbstractClass</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥è¢«è°ƒç”¨&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">AbstractClass.prototype.detect = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;start&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">AbstractClass.prototype.stop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;stop&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">AbstractClass.prototype.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">NormalClass</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  NormalClass.prototype = <span class="built_in">Object</span>.create(AbstractClass.prototype);</span><br><span class="line">  NormalClass.prototype.constructor = NormalClass;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> n = <span class="keyword">new</span> NormalClass();</span><br><span class="line"><span class="built_in">console</span>.log(n)</span><br><span class="line">n.detect();</span><br><span class="line">n.init();</span><br></pre></td></tr></table></figure><h2 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h2><ol><li>é¢å‘å¯¹è±¡çš„ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾</li><li>æ‰‹å†™ä¸€ä¸‹å‡½æ•°çš„å…¬æœ‰å’Œç§æœ‰æ–¹æ³•ä»¥åŠè°ƒç”¨çš„å½¢å¼<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;jojo&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.id;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">this</span>.id = id;</span><br><span class="line">  <span class="built_in">this</span>.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;111&#x27;</span>);</span><br><span class="line">    sayName.call(<span class="built_in">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="Iteratorè¿­ä»£å™¨"><a href="#Iteratorè¿­ä»£å™¨" class="headerlink" title="Iteratorè¿­ä»£å™¨"></a>Iteratorè¿­ä»£å™¨</h1><div class="note primary flat"><p>Iteratoræ˜¯ä¸€ç§æ¥å£ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ç§è§„èŒƒï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†Iteratoræ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œã€‚å³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜</p></div><p>è¯­æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator]:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><div class="note primary flat"><p><code>[Symbol.iterator]</code>å±æ€§åæ˜¯å›ºå®šçš„å†™æ³•ï¼Œåªè¦æ‹¥æœ‰äº†è¯¥å±æ€§çš„å¯¹è±¡ï¼Œå°±èƒ½ç”¨è¿­ä»£å™¨çš„æ–¹å¼è¿›è¡Œéå†ã€‚</p></div></p><ul><li>è¿­ä»£å™¨çš„éå†æ–¹æ³•æ˜¯é¦–å…ˆè·å¾—ä¸€ä¸ªè¿­ä»£å™¨çš„æŒ‡é’ˆã€‚åˆå§‹æ—¶è¯¥æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€æ¡æ•°æ®ä¹‹å‰ï¼Œæ¥ç€é€šè¿‡è°ƒç”¨nextæ–¹æ³•ï¼Œæ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ï¼Œè®©ä»–è°ƒç”¨ä¸‹ä¸€æ¡æ•°æ®ã€‚</li><li>æ¯æ¬¡çš„nextéƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ æœ‰ä¸¤ä¸ªå±æ€§<ul><li>valueï¼š è¡¨ç¤ºä½ æƒ³è·å–çš„æ•°æ®</li><li>doneï¼šå¸ƒå°”å€¼ ä»£è¡¨éå†æ˜¯å¦ç»“æŸ trueåˆ™ç»“æŸ<h2 id="iteratorçš„ä½œç”¨"><a href="#iteratorçš„ä½œç”¨" class="headerlink" title="iteratorçš„ä½œç”¨"></a>iteratorçš„ä½œç”¨</h2>ä¸‰ä¸ªä½œç”¨</li></ul></li><li>åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡æŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚</li><li>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚</li><li>ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³• æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ªæˆå…ƒ</li><li>ä¸æ–­è°ƒç”¨next ç›´åˆ°ç»“æŸä½ç½®(å‡å¦‚æœ‰ä¸‰ä¸ªæ•°æ® éœ€è¦nextå››æ¬¡ æœ€åä¸€æ¬¡çš„ç»“æœæ˜¯<code>&#123; value: undefined, done: true &#125;</code>)<br>æ¡ˆä¾‹<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [&#123;<span class="attr">nums</span>:<span class="number">1</span>&#125;,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> it = arr[<span class="built_in">Symbol</span>.iterator]();<span class="comment">//è·å–æ•°ç»„çš„è¿­ä»£å™¨</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next())  <span class="comment">// &#123; value: Object &#123; num: 1 &#125;, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next())  <span class="comment">// &#123; value: 2, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next())  <span class="comment">// &#123; value: 3, done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next())  <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure><h2 id="å…·æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„"><a href="#å…·æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„" class="headerlink" title="å…·æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„"></a>å…·æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„</h2><div class="note primary flat"><p>ä¸€ä¸ªæ•°æ®ç»“æ„åªè¦æœ‰iteratoræ¥å£å°±èƒ½è¢«è®¤ä¸ºæ˜¯å¯ä»¥éå†çš„ã€‚å¯ä»¥ç”¨forofã€‚</p></div>å…·æœ‰iteratoræ¥å£çš„æ•°æ®ç»“æ„çš„æœ‰å››ç§ï¼š</li></ul><ol><li>æ•°ç»„</li><li>ç±»æ•°ç»„</li><li>Set</li><li>Map<h2 id="ä¸ºä»€ä¹ˆå¯¹è±¡æ²¡æœ‰iteratoræ¥å£"><a href="#ä¸ºä»€ä¹ˆå¯¹è±¡æ²¡æœ‰iteratoræ¥å£" class="headerlink" title="ä¸ºä»€ä¹ˆå¯¹è±¡æ²¡æœ‰iteratoræ¥å£"></a>ä¸ºä»€ä¹ˆå¯¹è±¡æ²¡æœ‰iteratoræ¥å£</h2></li></ol><ul><li>å¯¹è±¡åªèƒ½ç”¨forinå’Œ<code>Object.keysã€values</code>éå†</li><li>å› ä¸ºä¸€ä¸ªå¯¹è±¡çš„å“ªä¸ªå±æ€§å…ˆéå†å’Œåä¾¿åˆ©æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æŒ‡å®šã€‚</li><li>å¯¹å¯¹è±¡éƒ¨ç½²iteratoræ¥å£æ²¡æœ‰å¿…è¦ å› ä¸ºmapå¼¥è¡¥äº†ä»–çš„ç¼ºé™·è€Œä¸”mapæœ‰iteratoræ¥å£<br>å¯¹å¯¹è±¡éƒ¨ç½²iterator<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;ç”·&#x27;</span>,</span><br><span class="line">    <span class="attr">hobbie</span>: <span class="string">&#x27;ç¡è§‰&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">obj[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> keyArr = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">next</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> index&lt;keyArr.length?&#123;</span><br><span class="line">        <span class="attr">value</span>:&#123;</span><br><span class="line">          <span class="attr">key</span>:keyArr[index],</span><br><span class="line">          <span class="attr">val</span>:obj[keyArr[index++]]</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;:&#123;</span><br><span class="line">        <span class="attr">done</span>:<span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> obj) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h1><div class="note primary flat"><p>å››ç§æ–¹æ¡ˆï¼šcommonjsï¼ŒAMDï¼ŒCMDï¼ŒES6</p></div><ul><li><p>CommonJSï¼Œnodeçš„ï¼Œé€šè¿‡requireæ¥å¼•å…¥æ¨¡å—ï¼Œé€šè¿‡<code>module.exports</code>å®šä¹‰è¾“å‡ºæ¥å£ã€‚æ˜¯ä»¥åŒæ­¥çš„æ–¹å¼å¼•å…¥æ¨¡å—çš„ã€‚</p></li><li><p>AMDæ˜¯é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“åé¢è¯­å¥çš„æ‰§è¡Œ æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥éƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°é‡Œé¢ï¼Œç­‰åŠ è½½å®Œå†æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚requirejså®ç°äº†AMDè§„èŒƒ</p></li><li>CMDæ–¹æ¡ˆï¼Œä¹Ÿæ˜¯è§£å†³å¼‚æ­¥åŠ è½½çš„å§”æ‰˜ã€‚ä»£è¡¨æœ‰seajsã€‚å’Œrequirejsçš„åŒºåˆ«åœ¨äºæ¨¡å—å®šä¹‰çš„æ—¶å€™å †ä¾èµ–çš„å¤„ç†ä¸åŒå’Œå¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºå¤„ç†ä¸åŒã€‚</li><li>æœ€åæ˜¯es6çš„ï¼Œé€šè¿‡importå’Œexportè¿›è¡Œå¯¼å…¥å¯¼å‡ºã€‚é»˜è®¤æš´éœ²ç»Ÿä¸€æš´éœ²åˆ†åˆ«æš´éœ²ã€‚<ul><li>é»˜è®¤æš´éœ²ï¼š<code>export default</code></li><li>åˆ†åˆ«æš´éœ²ï¼š<code>export xxx1;exportxxx2</code>ï¼Œå¼•å…¥<code>import &#123;xxx1,xxx2&#125; from &#39;xxx&#39;</code></li><li>ç»Ÿä¸€æš´éœ²ï¼š<code>export &#123;aa1,aa1&#125;</code>ï¼Œå¼•å…¥<code>import &#123;aa1,aa2&#125; from &#39;xxx&#39;</code></li></ul></li></ul><h2 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h2><ul><li>å†™æ³•<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">a</span>:<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="built_in">exports</span>.a = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = <span class="built_in">require</span>(<span class="string">&#x27;./a.js&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.a;<span class="comment">//1</span></span><br></pre></td></tr></table></figure></li><li>æ³¨æ„æµè§ˆå™¨ä¸­ä½¿ç”¨çš„è¯ç”¨<code>browserify</code><div class="note primary flat"><p>å’Œes6çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p></div></li><li>å‰è€…æ”¯æŒåŠ¨æ€å¯¼å…¥ï¼Œä¹Ÿå°±æ˜¯ require(${path}/xx.js)ï¼Œåè€…ç›®å‰ä¸æ”¯æŒï¼Œä½†æ˜¯å·²æœ‰ææ¡ˆ,å‰è€…æ˜¯åŒæ­¥å¯¼å…¥ï¼Œå› ä¸ºç”¨äºæœåŠ¡ç«¯ï¼Œæ–‡ä»¶éƒ½åœ¨æœ¬åœ°ï¼ŒåŒæ­¥å¯¼å…¥å³ä½¿å¡ä½ä¸»çº¿ç¨‹å½±å“ä¹Ÿä¸å¤§ã€‚</li><li>è€Œåè€…æ˜¯å¼‚æ­¥å¯¼å…¥ï¼Œå› ä¸ºç”¨äºæµè§ˆå™¨ï¼Œéœ€è¦ä¸‹è½½æ–‡ä»¶ï¼Œå¦‚æœä¹Ÿé‡‡ç”¨åŒæ­¥å¯¼å…¥ä¼šå¯¹æ¸²æŸ“æœ‰å¾ˆå¤§å½±å“</li><li>å‰è€…åœ¨å¯¼å‡ºæ—¶éƒ½æ˜¯å€¼æ‹·è´ï¼Œå°±ç®—å¯¼å‡ºçš„å€¼å˜äº†ï¼Œå¯¼å…¥çš„å€¼ä¹Ÿä¸ä¼šæ”¹å˜ï¼Œæ‰€ä»¥å¦‚æœæƒ³æ›´æ–°å€¼ï¼Œå¿…é¡»é‡æ–°å¯¼å…¥ä¸€æ¬¡ã€‚</li><li>ä½†æ˜¯åè€…é‡‡ç”¨å®æ—¶ç»‘å®šçš„æ–¹å¼ï¼Œå¯¼å…¥å¯¼å‡ºçš„å€¼éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæ‰€ä»¥å¯¼å…¥å€¼ä¼šè·Ÿéšå¯¼å‡ºå€¼å˜åŒ–</li><li>åè€…ä¼šç¼–è¯‘æˆ require/exports æ¥æ‰§è¡Œçš„</li></ul><h2 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h2><div class="note primary flat"><p>å’ŒCMDçš„åŒºåˆ«ï¼š</p></div><ul><li>å¯¹ä¾èµ–çš„å¤„ç†ä¸ä¸€æ ·ã€‚AMDæ˜¯ä¾èµ–å‰ç½®ã€‚å®šä¹‰æ¨¡å—çš„æ—¶å€™å°±è¦å£°æ˜ä¾èµ–çš„æ¨¡å—ï¼ŒCMDå°±è¿‘ä¾èµ–ï¼Œç”¨åˆ°å“ªä¸ªæ‰å»require</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CMD</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">&quot;./a&quot;</span>);</span><br><span class="line">  a.doSomething();</span><br><span class="line">  <span class="comment">// æ­¤å¤„ç•¥å» 100 è¡Œ</span></span><br><span class="line">  <span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">&quot;./b&quot;</span>); <span class="comment">// ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™</span></span><br><span class="line">  b.doSomething();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// AMD é»˜è®¤æ¨è</span></span><br><span class="line">define([<span class="string">&quot;./a&quot;</span>, <span class="string">&quot;./b&quot;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½</span></span><br><span class="line">  a.doSomething();</span><br><span class="line">  <span class="comment">// æ­¤å¤„ç•¥å» 100 è¡Œ</span></span><br><span class="line">  b.doSomething();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºä¾èµ–æ¨¡å—çš„æ‰§è¡Œå®é™…å¤„ç†ä¸åŒã€‚AMDå’ŒCMDå¼‚æ­¥åŠ è½½ï¼Œä½†æ˜¯AMDåœ¨æ¨¡å—åŠ è½½å®Œå°±ç«‹åˆ»æ‰§è¡Œä¾èµ–æ¨¡å—ï¼Œä¾èµ–æ¨¡å—çš„æ‰§è¡Œé¡ºåºå’Œæˆ‘ä»¬å†™çš„é¡ºåºä¸ä¸€å®šä¸€è‡´ã€‚è€ŒCMDåœ¨ä¾èµ–æ¨¡å—åŠ è½½å®Œæˆåå¹¶ä¸æ‰§è¡Œï¼Œåªæ˜¯ä¸‹è½½ã€‚ç­‰å…¨éƒ¨çš„ä¾èµ–æ¨¡å—éƒ½åŠ è½½å¥½åï¼Œå†å»æ‰§è¡Œï¼Œå’Œæˆ‘ä»¬çš„ä¹¦å†™é¡ºåºä¸€è‡´ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¤--åƒåœ¾å›æ”¶ä¸å†…å­˜æ³„æ¼</title>
    <link href="https://zlinni.github.io/posts/1805418661/"/>
    <id>https://zlinni.github.io/posts/1805418661/</id>
    <published>2022-04-20T07:02:04.000Z</published>
    <updated>2022-04-27T15:07:14.198Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h1><div class="note simple"><p>åƒåœ¾å›æ”¶ã€å†…å­˜æ³„æ¼</p></div><h1 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220427230620.png" alt=""></p><h2 id="ä¸ºä»€ä¹ˆè¦åƒåœ¾å›æ”¶ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åƒåœ¾å›æ”¶ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åƒåœ¾å›æ”¶ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åƒåœ¾å›æ”¶ï¼Ÿ</h2><div class="note primary flat"><p>jsçš„å˜é‡æ²¡æœ‰å›ºå®šå¤§å°ï¼Œæ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œé¿å…å†…å­˜å ç”¨æ»¡äº†ä¹‹åé€ æˆç³»ç»Ÿå´©æºƒã€‚</p></div><h2 id="åƒåœ¾å›æ”¶çš„æœºåˆ¶-ç‰¹ç‚¹"><a href="#åƒåœ¾å›æ”¶çš„æœºåˆ¶-ç‰¹ç‚¹" class="headerlink" title="åƒåœ¾å›æ”¶çš„æœºåˆ¶/ç‰¹ç‚¹"></a>åƒåœ¾å›æ”¶çš„æœºåˆ¶/ç‰¹ç‚¹</h2><div class="note primary flat"><p>å¯¹äºæ ˆå†…å­˜ åˆ‡æ¢åˆ°åˆ«çš„ä¸Šä¸‹æ–‡å°±å›æ”¶<br>å¯¹äºå †å†…å­˜ åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£</p></div><p>å«ä¹‰ï¼šæ–°ç”Ÿä»£æŒ‡çš„æ˜¯åªç»è¿‡ä¸€æ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡ï¼Œè€ç”Ÿä»£æŒ‡çš„æ˜¯ç»è¿‡å¤šæ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡</p><p>å…·ä½“ï¼šæ–°ç”Ÿä»£è¢«åˆ†ä¸ºfromå’Œtoä¸¤ä¸ªç©ºé—´ã€‚toä¸€èˆ¬é—²ç½®ï¼Œåœ¨fromçš„ç©ºé—´æ»¡äº†ä¹‹åæ‰§è¡Œscavengeç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p><p>æ‰§è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™åº”ç”¨é€»è¾‘å°†åœæ­¢ï¼Œç­‰åƒåœ¾å›æ”¶ç»“æŸåç»§ç»­æ‰§è¡Œ</p><h2 id="ä»€ä¹ˆæ—¶å€™å›æ”¶"><a href="#ä»€ä¹ˆæ—¶å€™å›æ”¶" class="headerlink" title="ä»€ä¹ˆæ—¶å€™å›æ”¶?"></a>ä»€ä¹ˆæ—¶å€™å›æ”¶?</h2><div class="note primary flat"><p>åˆ©ç”¨æµè§ˆå™¨çš„ç©ºé—²æ—¶é—´</p></div><h2 id="scavengeç®—æ³•"><a href="#scavengeç®—æ³•" class="headerlink" title="scavengeç®—æ³•"></a>scavengeç®—æ³•</h2><div class="note primary flat"><p>ç®—æ³•åˆ†ä¸ºä¸‰æ­¥ï¼š</p></div><ol><li>æ£€æµ‹fromç©ºé—´çš„å­˜æ´»å¯¹è±¡ï¼ŒæŸ¥çœ‹æ˜¯å¦æ»¡è¶³è€ç”Ÿä»£æ¡ä»¶ï¼ˆtoæ˜¯å¦è¶…è¿‡25%/æ˜¯å¦ç»å†è¿‡ä¸€æ¬¡åƒåœ¾å›æ”¶ï¼‰?è€ç”Ÿä»£:ç§»åŠ¨åˆ°toç©ºé—´</li><li>å¦‚æœå¯¹è±¡ä¸å­˜æ´»åˆ™é‡Šæ”¾å¯¹è±¡çš„ç©ºé—´</li><li>æœ€åå°†fromå’Œtoç©ºé—´è¿›è¡Œè§’è‰²äº¤æ¢</li></ol><h2 id="æ–°ç”Ÿä»£åˆ°è€ç”Ÿä»£"><a href="#æ–°ç”Ÿä»£åˆ°è€ç”Ÿä»£" class="headerlink" title="æ–°ç”Ÿä»£åˆ°è€ç”Ÿä»£"></a>æ–°ç”Ÿä»£åˆ°è€ç”Ÿä»£</h2><div class="note primary flat"><p>æ¡ä»¶æœ‰ä¸¤ä¸ª</p></div><ol><li>æˆ‘ä»¬çŸ¥é“æ–°ç”Ÿä»£çš„æ¡ä»¶æ˜¯åªç»è¿‡ä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œä¹Ÿå°±æ„å‘³ç€å®ƒç»å†äº†ä¸€æ¬¡Scavenge</li><li>toç©ºé—´çš„å†…å®¹ä½¿ç”¨å æ¯”ã€‚å› ä¸ºscavengeç®—æ³•ç»“æŸä¹‹åä¼šäº¤æ¢fromtoçš„ä½ç½®ï¼Œæ‰€ä»¥toçš„ç©ºé—´ä¸èƒ½å¤ªå°ï¼Œå½±å“åˆ°åç»­çš„å†…å­˜åˆ†é…ã€‚æ‰€ä»¥å½“ä»fromåˆ°toçš„æ—¶å€™ï¼Œå¦‚æœtoçš„ç©ºé—´è¶…è¿‡25%ï¼Œç›´æ¥å˜æˆè€ç”Ÿä»£ã€‚</li></ol><h2 id="è€ç”Ÿä»£çš„å›æ”¶æœºåˆ¶"><a href="#è€ç”Ÿä»£çš„å›æ”¶æœºåˆ¶" class="headerlink" title="è€ç”Ÿä»£çš„å›æ”¶æœºåˆ¶"></a>è€ç”Ÿä»£çš„å›æ”¶æœºåˆ¶</h2><div class="note primary flat"><p>è€ç”Ÿä»£é‡‡ç”¨äº†æ ‡è®°æ¸…é™¤å’Œæ ‡è®°å‹ç¼©æ³•</p></div><p>æ ‡è®°æ¸…é™¤ï¼šåœ¨å›æ”¶çš„è¿‡ç¨‹ä¸­æ ‡è®°å­˜æ´»çš„å¯¹è±¡ï¼Œç»“æŸåæ¸…é™¤æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ï¼ˆé‡Šæ”¾äº†ç©ºé—´ï¼‰</p><p>ä¸åˆ©ï¼šé€ æˆäº†å¾ˆå¤šå†…å­˜ç¢ç‰‡ï¼Œä¸åˆ©äºåç»­å†…å­˜åˆ†é…ï¼Œå¼•å…¥æ ‡è®°å‹ç¼©æ³•</p><p>æ ‡è®°å‹ç¼©æ³•ï¼š</p><h2 id="å…¶ä»–çš„æ–¹æ³•"><a href="#å…¶ä»–çš„æ–¹æ³•" class="headerlink" title="å…¶ä»–çš„æ–¹æ³•"></a>å…¶ä»–çš„æ–¹æ³•</h2><div class="note primary flat"><p>å¢é‡æ ‡è®°æ³•ï¼šåƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¼šæš‚åœåº”ç”¨é€»è¾‘ï¼Œå¯¹äºæ–°ç”Ÿä»£æ¥è¯´è¿˜å¥½ï¼Œå¯¹äºè€ç”Ÿä»£æ¥è¯´æ—¶é—´é•¿ï¼Œæ‰€ä»¥å¼•å…¥å¢é‡æ ‡è®°åˆ†å‰²åœé¡¿çš„è¿‡ç¨‹ï¼Œæ‰§è¡Œä¸€æ®µåˆ†å‰²å°±è¿è¡Œä¸€ä¼šé€»è¾‘ï¼Œäº¤æ›¿ã€‚</p></div><h1 id="å†…å­˜æ³„æ¼"><a href="#å†…å­˜æ³„æ¼" class="headerlink" title="å†…å­˜æ³„æ¼"></a>å†…å­˜æ³„æ¼</h1><ul><li>æ„å¤–çš„å…¨å±€å˜é‡ï¼šæ— æ³•è¢«å›æ”¶</li><li>å®šæ—¶å™¨ï¼šæœªè¢«æ­£ç¡®å…³é—­ï¼Œå¯¼è‡´æ‰€å¼•ç”¨çš„å¤–éƒ¨å˜é‡æ— æ³•è¢«é‡Šæ”¾ã€‚</li><li>äº‹ä»¶ç›‘å¬ï¼šæ²¡æœ‰æ­£ç¡®é”€æ¯ï¼ˆä½ç‰ˆæœ¬æµè§ˆå™¨å¯èƒ½å‡ºç°ï¼‰</li><li>é—­åŒ…<ul><li>ç¬¬ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬ä½¿ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œè€Œæ„å¤–çš„åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œä½¿å¾—è¿™ä¸ªå˜é‡ä¸€ç›´ç•™åœ¨å†…å­˜ä¸­æ— æ³•è¢«å›æ”¶</li><li>ç¬¬äºŒç§æƒ…å†µæ˜¯æˆ‘ä»¬è®¾ç½®äº†setIntervalå®šæ—¶å™¨ï¼Œè€Œå¿˜è®°å–æ¶ˆä»–ï¼Œå¦‚æœå¾ªç¯å‡½æ•°å¯¹å¤–éƒ¨å˜é‡æœ‰å¼•ç”¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¼šè¢«ä¸€ç›´ç•™åœ¨å†…å­˜ä¸­ï¼Œæ— æ³•è¢«å›æ”¶ã€‚</li><li>ç¬¬ä¸‰ç§æƒ…å†µæ˜¯æˆ‘ä»¬è·å–ä¸€ä¸ªDOMå…ƒç´ çš„å¼•ç”¨ã€‚è€Œåé¢çš„å…ƒç´ è¢«åˆ é™¤ã€‚ç”±äºæˆ‘ä»¬ä¸€ç›´ä¿ç•™äº†å¯¹è¿™ä¸ªå…ƒç´ çš„å¼•ç”¨ï¼Œæ‰€ä»¥ä»–ä¹Ÿæ— æ³•è¢«å›æ”¶ã€‚</li><li>ç¬¬å››ç§æƒ…å†µæ˜¯ä¸åˆç†çš„ä½¿ç”¨é—­åŒ…ï¼Œä»è€Œå¯¼è‡´æŸäº›å˜é‡ä¸€ç›´è¢«æµåœ¨å†…å­˜å½“ä¸­ã€‚</li></ul></li><li>domå¼•ç”¨ï¼šdomå…ƒç´ è¢«åˆ é™¤æ—¶ï¼Œå†…å­˜ä¸­çš„å¼•ç”¨æœªè¢«æ­£ç¡®æ¸…ç©ºã€‚</li><li>æ§åˆ¶å°<code>console.log</code>æ‰“å°çš„ä¸œè¥¿</li></ul><div class="note primary flat"><p>å¯ä»¥ç”¨chromeä¸­çš„timelineè¿›è¡Œå†…å­˜æ ‡è®°ï¼Œå¯è§†åŒ–æŸ¥çœ‹å†…å­˜çš„å˜åŒ–æƒ…å†µï¼Œæ‰¾å‡ºå¼‚å¸¸ç‚¹ã€‚</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘£--å¼‚æ­¥ä»»åŠ¡ä¸äº‹ä»¶</title>
    <link href="https://zlinni.github.io/posts/3693633031/"/>
    <id>https://zlinni.github.io/posts/3693633031/</id>
    <published>2022-04-20T07:01:52.000Z</published>
    <updated>2022-04-25T02:41:30.168Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h1><div class="note simple"><p>äº‹ä»¶æœºåˆ¶ã€Promiseã€Generatorã€async/awaitã€äº‹ä»¶å¾ªç¯</p></div><h1 id="äº‹ä»¶æœºåˆ¶"><a href="#äº‹ä»¶æœºåˆ¶" class="headerlink" title="äº‹ä»¶æœºåˆ¶"></a>äº‹ä»¶æœºåˆ¶</h1><div class="note primary flat"><p>äº‹ä»¶çš„è§¦å‘è¿‡ç¨‹ï¼Ÿäº‹ä»¶ä»£ç†ï¼Ÿ</p></div><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><div class="note primary flat"><p>äº‹ä»¶æµæ˜¯ä¸€ä¸ªäº‹ä»¶æ²¿ç€ç‰¹å®šæ•°æ®ç»“æ„ä¼ æ’­çš„è¿‡ç¨‹ã€‚å†’æ³¡å’Œæ•è·æ˜¯äº‹ä»¶æµåœ¨DOMä¸­çš„ä¸¤ç§ä¸åŒçš„ä¼ æ’­æ–¹å¼ã€‚</p></div><h2 id="äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µ"><a href="#äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µ" class="headerlink" title="äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µ"></a>äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µ</h2><ul><li>äº‹ä»¶æ•è·é˜¶æ®µ</li><li>ç›®æ ‡é˜¶æ®µ</li><li>äº‹ä»¶å†’æ³¡é˜¶æ®µ</li></ul><h2 id="äº‹ä»¶æ•è·"><a href="#äº‹ä»¶æ•è·" class="headerlink" title="äº‹ä»¶æ•è·"></a>äº‹ä»¶æ•è·</h2><div class="note primary flat"><p>äº‹ä»¶æ•è·é€šä¿—çš„ç†è§£å°±æ˜¯é¼ æ ‡ç‚¹å‡»æˆ–è€…è§¦å‘domäº‹ä»¶çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä»æ ¹èŠ‚ç‚¹å¼€å§‹ç”±å¤–åˆ°å†…çš„è¿›è¡Œäº‹ä»¶ä¼ æ’­ï¼Œå³ç‚¹å‡»äº†å­å…ƒç´ ã€‚å¦‚æœçˆ¶å…ƒç´ é€šè¿‡æ•è·æ–¹å¼æ³¨å†Œäº†å¯¹åº”çš„äº‹ä»¶çš„è¯ï¼Œä¼šå…ˆè§¦å‘çˆ¶å…ƒç´ ç»‘å®šçš„äº‹ä»¶</p></div><h2 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h2><div class="note primary flat"><p>äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·ç›¸åï¼Œé¡ºåºæ˜¯ç”±å†…åˆ°å¤–ç›´åˆ°æ ¹èŠ‚ç‚¹</p></div><p>æ— è®ºæ˜¯äº‹ä»¶æ•è·è¿˜æ˜¯å†’æ³¡ï¼Œéƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹å¾å°±æ˜¯äº‹ä»¶ä¼ æ’­<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220404101558.png" alt=""></p><h2 id="äº‹ä»¶æµé˜»æ­¢"><a href="#äº‹ä»¶æµé˜»æ­¢" class="headerlink" title="äº‹ä»¶æµé˜»æ­¢"></a>äº‹ä»¶æµé˜»æ­¢</h2><div class="note primary flat"><p>åœ¨ä¸€äº›æƒ…å†µä¸‹è¦é˜»æ­¢äº‹ä»¶æµçš„ä¼ æ’­ï¼Œé˜»æ­¢é»˜è®¤åŠ¨ä½œçš„å‘ç”Ÿ</p></div><ul><li><code>event.preventDefault()</code>å–æ¶ˆäº‹ä»¶å¯¹è±¡çš„é»˜è®¤åŠ¨ä½œä»¥åŠç»§ç»­ä¼ æ’­</li><li><code>event.stopPropagation()/event.cancelBubble = true</code>é˜»æ­¢äº‹ä»¶å†’æ³¡<h3 id="åœ¨ä¸åŒæµè§ˆå™¨çš„å¤„ç†"><a href="#åœ¨ä¸åŒæµè§ˆå™¨çš„å¤„ç†" class="headerlink" title="åœ¨ä¸åŒæµè§ˆå™¨çš„å¤„ç†"></a>åœ¨ä¸åŒæµè§ˆå™¨çš„å¤„ç†</h3></li><li>åœ¨IEä¸‹ä½¿ç”¨ <code>event.returnValue= false</code>ï¼Œ</li><li>åœ¨éIEä¸‹åˆ™ä½¿ç”¨ <code>event.preventDefault()</code>è¿›è¡Œé˜»æ­¢<h3 id="preventDefaultä¸stopPropagationçš„åŒºåˆ«"><a href="#preventDefaultä¸stopPropagationçš„åŒºåˆ«" class="headerlink" title="preventDefaultä¸stopPropagationçš„åŒºåˆ«"></a><code>preventDefault</code>ä¸<code>stopPropagation</code>çš„åŒºåˆ«</h3></li><li><code>preventDefault</code>å‘Šè¯‰æµè§ˆå™¨ä¸ç”¨æ‰§è¡Œä¸äº‹ä»¶ç›¸å…³è”çš„é»˜è®¤åŠ¨ä½œï¼ˆå¦‚è¡¨å•æäº¤ï¼‰</li><li><code>stopPropagation</code>æ˜¯åœæ­¢äº‹ä»¶ç»§ç»­å†’æ³¡ï¼Œä½†æ˜¯å¯¹IE9ä»¥ä¸‹çš„æµè§ˆå™¨æ— æ•ˆ<h2 id="äº‹ä»¶æ³¨å†Œ"><a href="#äº‹ä»¶æ³¨å†Œ" class="headerlink" title="äº‹ä»¶æ³¨å†Œ"></a>äº‹ä»¶æ³¨å†Œ</h2></li><li>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ <code>addEventListener</code> æ³¨å†Œäº‹ä»¶ï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æ˜¯å¸ƒå°”å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ã€‚å¯¹äºå¸ƒå°”å€¼ useCapture å‚æ•°æ¥è¯´ï¼Œè¯¥å‚æ•°é»˜è®¤å€¼ä¸º <code>false</code>ã€‚useCapture å†³å®šäº†æ³¨å†Œçš„äº‹ä»¶æ˜¯æ•è·äº‹ä»¶è¿˜æ˜¯å†’æ³¡äº‹ä»¶</li><li>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åªå¸Œæœ›äº‹ä»¶åªè§¦å‘åœ¨ç›®æ ‡ä¸Šï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ <code>stopPropagation</code> æ¥é˜»æ­¢äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ã€‚é€šå¸¸æˆ‘ä»¬è®¤ä¸º <code>stopPropagation</code> æ˜¯ç”¨æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡çš„ï¼Œå…¶å®è¯¥å‡½æ•°ä¹Ÿå¯ä»¥é˜»æ­¢æ•è·äº‹ä»¶ã€‚<code>stopImmediatePropagation</code> åŒæ ·ä¹Ÿèƒ½å®ç°é˜»æ­¢äº‹ä»¶ï¼Œä½†æ˜¯è¿˜èƒ½é˜»æ­¢è¯¥äº‹ä»¶ç›®æ ‡æ‰§è¡Œåˆ«çš„æ³¨å†Œäº‹ä»¶<div class="note warning flat"><p>æ³¨æ„<code>addEventListener</code>éœ€è¦é”€æ¯ï¼Œ<code>onClick</code>åˆ™ä¸éœ€è¦å› ä¸ºæ¯æ¬¡éƒ½æ›¿æ¢</p></div><h2 id="äº‹ä»¶å§”æ‰˜"><a href="#äº‹ä»¶å§”æ‰˜" class="headerlink" title="äº‹ä»¶å§”æ‰˜"></a>äº‹ä»¶å§”æ‰˜</h2></li><li>ä¼˜åŒ–æ€§èƒ½ï¼Œå½“å­èŠ‚ç‚¹è¿‡å¤šçš„æ—¶å€™ç»™çˆ¶å…ƒç´ ç»‘å®šäº‹ä»¶é€šè¿‡å†’æ³¡åªæ‰§è¡Œä¸€æ¬¡äº‹ä»¶èŠ‚çœå†…å­˜å¹¶ä¸”ä¸éœ€è¦ç»™å­èŠ‚ç‚¹æ³¨é”€äº‹ä»¶ã€‚<h2 id="äº‹ä»¶çš„å…¼å®¹å†™æ³•"><a href="#äº‹ä»¶çš„å…¼å®¹å†™æ³•" class="headerlink" title="äº‹ä»¶çš„å…¼å®¹å†™æ³•"></a>äº‹ä»¶çš„å…¼å®¹å†™æ³•</h2><div class="note primary flat"><p>ieçš„eventå’Œéieçš„eventä¸å¤ªä¸€æ ·ï¼Œä¹Ÿä¸èƒ½ä¸€èµ·ç”¨</p></div></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gete</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//å…¼å®¹ieçš„äº‹ä»¶</span></span><br><span class="line">  e = e || <span class="built_in">window</span>.event;</span><br><span class="line">  <span class="comment">//å…¼å®¹ieçš„target</span></span><br><span class="line">  <span class="keyword">var</span> target = e.target || e.srcElement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><div class="note primary flat"><p>è°ˆåˆ°promiseçš„æ—¶å€™ï¼Œé™¤äº†å°†ä»–è§£å†³çš„ç—›ç‚¹ä»¥åŠå¸¸ç”¨çš„apiä¹‹å¤–ï¼Œæœ€å¥½è¿›è¡Œæ‹“å±•å§eventloopå¸¦è¿›æ¥å¥½å¥½è®²ä¸€ä¸‹ã€‚å¾®ä»»åŠ¡ï¼Œä»»åŠ¡çš„æŒ‡å‘é¡ºåºï¼Œå¦‚æœçœ‹è¿‡promiseæºç ï¼Œæœ€å¥½å¯ä»¥è°ˆä¸€è°ˆåŸç”Ÿpromiseæ˜¯å¦‚ä½•å®ç°çš„ï¼Œè¿˜æœ‰å°±æ˜¯promiseçš„é“¾å¼è°ƒç”¨</p></div><ul><li>promiseæ˜¯es6æ–°å¢çš„è¯­æ³•ï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜</li><li>promiseå¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œåˆå§‹æ˜¯<code>pending</code>å¯ä»¥é€šè¿‡å‡½æ•°<code>resolve</code>å’Œ<code>reject</code>å°†çŠ¶æ€è½¬å˜ä¸º<code>resolved</code>or<code>rejected</code>çŠ¶æ€ã€‚çŠ¶æ€ä¸€æ—¦å‘ç”Ÿæ”¹å˜å°±ä¸èƒ½å†æ¬¡å˜åŒ–ã€‚</li><li>thenå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªpromiseå®ä¾‹ï¼Œå¹¶ä¸”è¯¥è¿”å›å€¼æ˜¯ä¸€ä¸ªæ–°çš„å®ä¾‹è€Œä¸æ˜¯ä¹‹å‰çš„å®ä¾‹ã€‚å› ä¸ºpromiseè§„èŒƒè§„å®šé™¤äº†pendingçŠ¶æ€ï¼Œå…¶ä»–çŠ¶æ€æ˜¯ä¸èƒ½æ”¹å˜çš„ã€‚å¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªç›¸åŒå®ä¾‹çš„è¯ï¼Œå¤šä¸ªthenè°ƒç”¨å°±å¤±å»äº†æ„ä¹‰ã€‚å¯¹äºthenæ¥è¯´ï¼Œæœ¬è´¨ä¸Šå¯ä»¥çœ‹æˆæ˜¯flatMap</li></ul><h2 id="promiseçš„åŸºæœ¬æƒ…å†µ"><a href="#promiseçš„åŸºæœ¬æƒ…å†µ" class="headerlink" title="promiseçš„åŸºæœ¬æƒ…å†µ"></a>promiseçš„åŸºæœ¬æƒ…å†µ</h2><div class="note primary flat"><p>ç®€å•æ¥è¯´ä»–æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼Œé€šå¸¸æ˜¯å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚ä»è¯­æ³•ä¸Šé¢æ¥è¯´ï¼Œpromiseæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»ä»–å¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚</p></div><p>ä¸€èˆ¬ Promise åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¿…ç„¶ä¼šå¤„äºä»¥ä¸‹å‡ ç§çŠ¶æ€ä¹‹ä¸€ã€‚</p><ul><li>å¾…å®šï¼ˆpendingï¼‰ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å®Œæˆï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ã€‚</li><li>å·²å®Œæˆï¼ˆfulfilledï¼‰ï¼šæ“ä½œæˆåŠŸå®Œæˆã€‚</li><li>å·²æ‹’ç»ï¼ˆrejectedï¼‰ï¼šæ“ä½œå¤±è´¥ã€‚<div class="note primary flat"><p>å¾…å®šçŠ¶æ€çš„promiseå¯¹è±¡æŒ‡å‘çš„è¯ï¼Œæœ€åè¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªå€¼å®Œæˆï¼Œè¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªåŸå› è¢«æ‹’ç»ã€‚å½“å…¶ä¸­ä¸€ç§æƒ…å†µå‘ç”Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨promiseçš„thenæ–¹æ³•æ’åˆ—èµ·æ¥çš„ç›¸å…³å¤„ç†ç¨‹åºå°±ä¼šè¢«è°ƒç”¨ã€‚å› ä¸ºæœ€å<code>Promise.prototype.then</code> å’Œ <code>Promise.prototype.catch</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª<code>Promise</code>æ‰€ä»¥å®ƒä»¬å¯ä»¥ç»§ç»­è¢«é“¾å¼è°ƒç”¨ã€‚</p></div>å…³äº Promise çš„çŠ¶æ€æµè½¬æƒ…å†µï¼Œæœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå†…éƒ¨çŠ¶æ€æ”¹å˜ä¹‹åä¸å¯é€†ï¼Œä½ éœ€è¦åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­åŠ ä»¥æ³¨æ„ã€‚æ–‡å­—æè¿°æ¯”è¾ƒæ™¦æ¶©ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡ä¸€å¼ å›¾å°±èƒ½å¾ˆæ¸…æ™°åœ°çœ‹å‡º Promise å†…éƒ¨çŠ¶æ€æµè½¬çš„æƒ…å†µ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220405105526.png" alt=""><h2 id="then-catch"><a href="#then-catch" class="headerlink" title="then catch"></a>then catch</h2></li><li>thencatchéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„promise</li><li>catchä¸ç®¡æ”¾åœ¨å“ªé‡Œéƒ½èƒ½æ•è·ä¸Šå±‚æœªæ•è·çš„é”™è¯¯</li><li>ä¸å†™é»˜è®¤è¿”å›<code>return Promise.resolve(undefined)</code>ä¹Ÿæ˜¯æˆåŠŸå›è°ƒ</li><li>ç›´æ¥return ä¸€ä¸ªerrorå¯¹è±¡ä¸ä¼šæŠ›å‡ºé”™è¯¯ æ‰€ä»¥ä¸ä¼šè¢«catchæ•è·</li><li>è¿”å›çš„å€¼ä¸èƒ½æ˜¯promiseæœ¬èº« å¦åˆ™æ­»å¾ªç¯</li><li>thenå¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„ï¼Œåœ¨æŸäº›æ—¶å€™ä½ å¯ä»¥è®¤ä¸ºcatchæ˜¯thenç¬¬äºŒä¸ªå‚æ•°çš„ç®€ä¾¿å†™æ³•ã€‚<h2 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h2></li><li>ä¸ç®¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</li><li>ä¸æ¥å—ä»»ä½•å‚æ•° æ‰€ä»¥åœ¨finallyä¸­æ˜¯æ²¡åŠæ³•çŸ¥é“æœ€ç»ˆçš„çŠ¶æ€çš„</li><li>é»˜è®¤è¿”å›ä¸Šä¸€æ¬¡çš„promiseå¯¹è±¡å€¼ï¼Œå¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„promiseå¯¹è±¡</li></ul><h2 id="new-Promiseï¼ˆå¤§å‘ï¼‰"><a href="#new-Promiseï¼ˆå¤§å‘ï¼‰" class="headerlink" title="new Promiseï¼ˆå¤§å‘ï¼‰"></a><code>new Promise</code>ï¼ˆå¤§å‘ï¼‰</h2><p>å…ˆçœ‹ä¸€æ®µä»£ç ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    resolve();</span><br><span class="line">    reject()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;,<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;å¤±è´¥çš„çŠ¶æ€&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span>);</span><br></pre></td></tr></table></figure><br>æ­£ç¡®ç­”æ¡ˆæ˜¯1243<br>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬ä¼šå¿½ç•¥ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨<code>new Promise</code>çš„æ—¶å€™ï¼Œæ„é€ å™¨çš„æ–¹æ³•å°±å·²ç»å¼€å§‹æ‰§è¡Œäº†ï¼Œè™½ç„¶æˆ‘ä»¬ä¸€èˆ¬æå€¡ç”¨å‡½æ•°å°è£…ä¹‹å<code>return</code>å‡ºå»è¿™ä¸ªpromiseå¯¹è±¡ã€‚æ‰€ä»¥å°±æ˜¯å…ˆæ‰§è¡Œ<code>new Promise</code>é‡Œé¢çš„ä»£ç  è¾“å‡º12ç„¶åçŠ¶æ€åˆ°<code>resolved</code>ç„¶åæ‰§è¡ŒåŒæ­¥çš„4 æœ€åå› ä¸ºæˆåŠŸçš„å›è°ƒåˆ°3</p><h2 id="promiseçš„é™æ€æ–¹æ³•"><a href="#promiseçš„é™æ€æ–¹æ³•" class="headerlink" title="promiseçš„é™æ€æ–¹æ³•"></a>promiseçš„é™æ€æ–¹æ³•</h2><h3 id="allæ–¹æ³•"><a href="#allæ–¹æ³•" class="headerlink" title="allæ–¹æ³•"></a>allæ–¹æ³•</h3><ul><li>è¯­æ³•:<code>Promise.all(iterable)</code></li><li>å‚æ•°ï¼šä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä¾‹å¦‚Arrayï¼ˆæ‹¬å·é‡Œé¢æ”¾æ•°ç»„ï¼‰</li><li>æè¿°ï¼šæ­¤æ–¹æ³•å¯¹äºæ±‡æ€»å¤šä¸ªpromiseçš„ç»“æœå¾ˆæœ‰ç”¨ï¼Œåœ¨es6ä¸­å¯ä»¥å°†å¤šä¸ª<code>Promise.all</code>å¼‚æ­¥è¯·æ±‚å¹¶å‘æ“ä½œï¼Œè¿”å›çš„ç»“æœä¸€èˆ¬æœ‰ä¸‹é¢ä¸¤ç§æƒ…å†µã€‚<ol><li>å½“æ‰€æœ‰ç»“æœæˆåŠŸè¿”å›æŒ‰ç…§è¯·æ±‚é¡ºåºè¿”å›æˆåŠŸç»“æœ</li><li>å½“å…¶ä¸­ä¸€ä¸ªæ–¹æ³•å¤±è´¥å°±è¿›å…¥å¤±è´¥æ–¹æ³•ã€‚</li></ol></li><li>ä¸šåŠ¡åœºæ™¯ </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ä¸€ä¸ªé¡µé¢ä¸­éœ€è¦åŠ è½½è·å–è½®æ’­åˆ—è¡¨ã€è·å–åº—é“ºåˆ—è¡¨ã€è·å–åˆ†ç±»åˆ—è¡¨è¿™ä¸‰ä¸ªæ“ä½œï¼Œé¡µé¢éœ€è¦åŒæ—¶å‘å‡ºè¯·æ±‚è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¿™æ ·ç”¨ `Promise.all` æ¥å®ç°ï¼Œçœ‹èµ·æ¥æ›´æ¸…æ™°ã€ä¸€ç›®äº†ç„¶ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.è·å–è½®æ’­æ•°æ®åˆ—è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBannerList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        resolve(<span class="string">&#x27;è½®æ’­æ•°æ®&#x27;</span>)</span><br><span class="line">      &#125;,<span class="number">300</span>) </span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.è·å–åº—é“ºåˆ—è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStoreList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      resolve(<span class="string">&#x27;åº—é“ºæ•°æ®&#x27;</span>)</span><br><span class="line">    &#125;,<span class="number">500</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3.è·å–åˆ†ç±»åˆ—è¡¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCategoryList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      resolve(<span class="string">&#x27;åˆ†ç±»æ•°æ®&#x27;</span>)</span><br><span class="line">    &#125;,<span class="number">700</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initLoad</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="built_in">Promise</span>.all([getBannerList(),getStoreList(),getCategoryList()])</span><br><span class="line">  .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res) </span><br><span class="line">  &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; </span><br><span class="line">initLoad()</span><br></pre></td></tr></table></figure><h4 id="allå¦‚æœæœ‰ä¸€ä¸ªæŠ›å‡ºäº†å¼‚å¸¸ä¼šå¦‚ä½•å¤„ç†ã€‚"><a href="#allå¦‚æœæœ‰ä¸€ä¸ªæŠ›å‡ºäº†å¼‚å¸¸ä¼šå¦‚ä½•å¤„ç†ã€‚" class="headerlink" title="allå¦‚æœæœ‰ä¸€ä¸ªæŠ›å‡ºäº†å¼‚å¸¸ä¼šå¦‚ä½•å¤„ç†ã€‚"></a>allå¦‚æœæœ‰ä¸€ä¸ªæŠ›å‡ºäº†å¼‚å¸¸ä¼šå¦‚ä½•å¤„ç†ã€‚</h4><div class="note primary flat"><p>allå’Œraceä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœä¼šæœ‰æŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ã€‚å¹¶ä¸”æ˜¯è¢«thençš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„catchæ•è·ï¼Œä½†å¹¶ä¸å½±å“æ•°ç»„ä¸­å…¶ä»–çš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</p></div><h4 id="allæ˜¯å¹¶å‘çš„è¿˜æ˜¯ä¸²è¡Œçš„"><a href="#allæ˜¯å¹¶å‘çš„è¿˜æ˜¯ä¸²è¡Œçš„" class="headerlink" title="allæ˜¯å¹¶å‘çš„è¿˜æ˜¯ä¸²è¡Œçš„"></a>allæ˜¯å¹¶å‘çš„è¿˜æ˜¯ä¸²è¡Œçš„</h4><div class="note primary flat"><p>å¹¶å‘çš„ã€‚ä¸è¿‡<code>promise.all().then()</code>ç»“æœä¸­æ•°ç»„çš„é¡ºåºå’Œ<code>Promise.all()</code>æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´</p></div><h4 id="allçš„å¹¶å‘é™åˆ¶"><a href="#allçš„å¹¶å‘é™åˆ¶" class="headerlink" title="allçš„å¹¶å‘é™åˆ¶"></a>allçš„å¹¶å‘é™åˆ¶</h4><div class="note primary flat"><p>Promise.allå¯ä»¥ä¿è¯ï¼Œpromisesæ•°ç»„ä¸­æ‰€æœ‰promiseå¯¹è±¡éƒ½è¾¾åˆ°resolveçŠ¶æ€ï¼Œæ‰æ‰§è¡Œthenå›è°ƒã€‚</p><p>è¿™æ—¶å€™è€ƒè™‘ä¸€ä¸ªåœºæ™¯ï¼šå¦‚æœä½ çš„promisesæ•°ç»„ä¸­æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯httpè¯·æ±‚ï¼Œæˆ–è€…è¯´æ¯ä¸ªå¯¹è±¡åŒ…å«äº†å¤æ‚çš„è°ƒç”¨å¤„ç†ã€‚è€Œè¿™æ ·çš„å¯¹è±¡æœ‰å‡ åä¸‡ä¸ªã€‚</p><p>é‚£ä¹ˆä¼šå‡ºç°çš„æƒ…å†µæ˜¯ï¼Œä½ åœ¨ç¬é—´å‘å‡ºå‡ åä¸‡httpè¯·æ±‚ï¼ˆtcpè¿æ¥æ•°ä¸è¶³å¯èƒ½é€ æˆç­‰å¾…ï¼‰ï¼Œæˆ–è€…å †ç§¯äº†æ— æ•°è°ƒç”¨æ ˆå¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p><p>è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘å¯¹Promise.allåšå¹¶å‘é™åˆ¶ã€‚</p><p>Promise.allå¹¶å‘é™åˆ¶æŒ‡çš„æ˜¯ï¼Œæ¯ä¸ªæ—¶åˆ»å¹¶å‘æ‰§è¡Œçš„promiseæ•°é‡æ˜¯å›ºå®šçš„ï¼Œæœ€ç»ˆçš„æ‰§è¡Œç»“æœè¿˜æ˜¯ä¿æŒä¸åŸæ¥çš„Promise.allä¸€è‡´ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncPool</span>(<span class="params">poolLimit, array, iteratorFn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> ret = [];</span><br><span class="line">    <span class="keyword">const</span> executing = [];</span><br><span class="line">    <span class="keyword">const</span> enqueue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// è¾¹ç•Œå¤„ç†ï¼Œarrayä¸ºç©ºæ•°ç»„</span></span><br><span class="line">        <span class="keyword">if</span> (i === array.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ¯è°ƒä¸€æ¬¡enqueueï¼Œåˆå§‹åŒ–ä¸€ä¸ªpromise</span></span><br><span class="line">        <span class="keyword">const</span> item = array[i++];</span><br><span class="line">        <span class="keyword">const</span> p = <span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> iteratorFn(item, array));</span><br><span class="line">        <span class="comment">// æ”¾å…¥promisesæ•°ç»„</span></span><br><span class="line">        ret.push(p);</span><br><span class="line">        <span class="comment">// promiseæ‰§è¡Œå®Œæ¯•ï¼Œä»executingæ•°ç»„ä¸­åˆ é™¤</span></span><br><span class="line">        <span class="keyword">const</span> e = p.then(<span class="function">() =&gt;</span> executing.splice(executing.indexOf(e), <span class="number">1</span>));</span><br><span class="line">        <span class="comment">// æ’å…¥executingæ•°å­—ï¼Œè¡¨ç¤ºæ­£åœ¨æ‰§è¡Œçš„promise</span></span><br><span class="line">        executing.push(e);</span><br><span class="line">        <span class="comment">// ä½¿ç”¨Promise.receï¼Œæ¯å½“executingæ•°ç»„ä¸­promiseæ•°é‡ä½äºpoolLimitï¼Œå°±å®ä¾‹åŒ–æ–°çš„promiseå¹¶æ‰§è¡Œ</span></span><br><span class="line">        <span class="keyword">let</span> r = <span class="built_in">Promise</span>.resolve();</span><br><span class="line">        <span class="keyword">if</span> (executing.length &gt;= poolLimit) &#123;</span><br><span class="line">            r = <span class="built_in">Promise</span>.race(executing);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// é€’å½’ï¼Œç›´åˆ°éå†å®Œarray</span></span><br><span class="line">        <span class="keyword">return</span> r.then(<span class="function">() =&gt;</span> enqueue());</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> enqueue().then(<span class="function">() =&gt;</span> <span class="built_in">Promise</span>.all(ret));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="allSettledæ–¹æ³•"><a href="#allSettledæ–¹æ³•" class="headerlink" title="allSettledæ–¹æ³•"></a><code>allSettled</code>æ–¹æ³•</h3><ul><li><code>Promise.allSettled</code>çš„è¯­æ³•åŠå‚æ•°è·Ÿ<code>Promise.all</code>ç±»ä¼¼.ä¸åŒåœ¨äºå®ƒæ‰§è¡Œå®Œä¹‹åä¸ä¼šå¤±è´¥ï¼Œä¼šæŒ‰é¡ºåºè¿”å›æ¯ä¸ªpromiseçš„çŠ¶æ€</li><li>æ¡ˆä¾‹</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolved = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> rejected = <span class="built_in">Promise</span>.reject(-<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> allSettledPromise = <span class="built_in">Promise</span>.allSettled([resolved, rejected]);</span><br><span class="line">allSettledPromise.then(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è¿”å›ç»“æœï¼š</span></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//    &#123; status: &#x27;fulfilled&#x27;, value: 2 &#125;,</span></span><br><span class="line"><span class="comment">//    &#123; status: &#x27;rejected&#x27;, reason: -1 &#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure><h3 id="anyæ–¹æ³•-è¿˜åœ¨è‰æ¡ˆä¸èƒ½ä½¿ç”¨"><a href="#anyæ–¹æ³•-è¿˜åœ¨è‰æ¡ˆä¸èƒ½ä½¿ç”¨" class="headerlink" title="anyæ–¹æ³•(è¿˜åœ¨è‰æ¡ˆä¸èƒ½ä½¿ç”¨)"></a>anyæ–¹æ³•(è¿˜åœ¨è‰æ¡ˆä¸èƒ½ä½¿ç”¨)</h3><ul><li>è¯­æ³•ï¼š<code>Promise.anyï¼ˆiterableï¼‰</code></li><li>å‚æ•°ï¼š iterable å¯è¿­ä»£çš„å¯¹è±¡ï¼Œä¾‹å¦‚ Arrayã€‚</li><li>æè¿°ï¼šanyè¿”å›ä¸€ä¸ªpromise åªè¦å‚æ•°promiseå®ä¾‹ä¸­æœ‰ä¸€ä¸ªå˜æˆfulfilledçŠ¶æ€ï¼Œæœ€åanyè¿”å›çš„å®ä¾‹å°±è¿”å›fulfilledçŠ¶æ€ï¼Œå¦‚æœå…¨éƒ¨éƒ½æ˜¯rejectedï¼Œå°±è¿”å›rejectedçŠ¶æ€<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolved = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> rejected = <span class="built_in">Promise</span>.reject(-<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> anyPromise = <span class="built_in">Promise</span>.any([resolved, rejected]);</span><br><span class="line">anyPromise.then(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è¿”å›ç»“æœï¼š</span></span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="raceæ–¹æ³•"><a href="#raceæ–¹æ³•" class="headerlink" title="raceæ–¹æ³•"></a>raceæ–¹æ³•</h3><ul><li>è¯­æ³•ï¼š<code>Promise.raceï¼ˆiterableï¼‰</code></li><li>å‚æ•°ï¼š iterable å¯è¿­ä»£çš„å¯¹è±¡ï¼Œä¾‹å¦‚ Arrayã€‚</li><li>æè¿°ï¼š raceæ–¹æ³•è¿”å›ä¸€ä¸ªpromiseï¼Œåªè¦å‚æ•°çš„promiseä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œé‚£ä¹ˆraceæ–¹æ³•çš„è¿”å›çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„promiseå®ä¾‹çš„è¿”å›å€¼å°±ä¼ é€’ç»™raceæ–¹æ³•çš„å›è°ƒå‡½æ•°ã€‚</li><li>ä¸šåŠ¡åœºæ™¯ï¼šå›¾ç‰‡åŠ è½½ è¶…æ—¶åˆ¤æ–­</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯·æ±‚æŸä¸ªå›¾ç‰‡èµ„æº</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">requestImg</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">    img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; resolve(img); &#125;</span><br><span class="line">    img.src = <span class="string">&#x27;http://www.baidu.com/img/flexible/logo/pc/result.png&#x27;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å»¶æ—¶å‡½æ•°ï¼Œç”¨äºç»™è¯·æ±‚è®¡æ—¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; reject(<span class="string">&#x27;å›¾ç‰‡è¯·æ±‚è¶…æ—¶&#x27;</span>); &#125;, <span class="number">5000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Promise</span>.race([requestImg(), timeout()])</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params">results</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">reason</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(reason);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œé‡‡ç”¨ Promise çš„æ–¹å¼æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åŠ è½½æˆåŠŸï¼Œä¹Ÿæ˜¯é’ˆå¯¹ Promise.race æ–¹æ³•çš„ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¸šåŠ¡åœº</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220405111554.png" alt=""></p><h1 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h1><div class="note primary flat"><p>generatoræ˜¯es6æ–°å¢çš„è¯­æ³•ï¼Œå’Œpromiseä¸€æ ·å¯ä»¥ç”¨æ¥å¼‚æ­¥ç¼–ç¨‹ï¼Œæœ€å¤§çš„ç‰¹ç‚¹æ˜¯å®ƒå¯ä»¥åˆ©ç”¨yieldå’Œnextåˆ†æ®µæ‰§è¡Œã€‚</p></div><ul><li><code>function *foo(x)</code>ä½¿ç”¨<em>å·æ¥å£°æ˜è¯¥å‡½æ•°æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œ`</em>`çš„ä½ç½®æ¯”è¾ƒéšæ„ã€‚</li><li><code>yield</code>å…³é”®å­—ç”¨æ¥å®ç°åˆ†æ®µæ‰§è¡Œï¼Œå®ƒçš„æ„æ€æ˜¯äº§å‡ºï¼Œå½“ç”Ÿæˆå™¨å‡½æ•°é‡åˆ°yieldçš„æ—¶å€™ä¼šæš‚åœå¹¶æŠŠä»–åé¢çš„è¡¨è¾¾å¼æŠ›å‡ºå»ã€‚ï¼ˆæ³¨æ„yieldå¯ä»¥ä¸å†™åœ¨ç”Ÿæˆå™¨ä¸­ï¼‰</li><li><code>next</code>è¡¨ç¤ºå°†ä»£ç çš„æ§åˆ¶æƒè¿˜ç»™ç”Ÿæˆå™¨å‡½æ•°</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">foo</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> y = <span class="number">2</span> * (<span class="keyword">yield</span> (x + <span class="number">1</span>))</span><br><span class="line">  <span class="keyword">let</span> z = <span class="keyword">yield</span> (y / <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">return</span> (x + y + z)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = foo(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(it.next())   <span class="comment">// =&gt; &#123;value: 6, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next(<span class="number">12</span>)) <span class="comment">// =&gt; &#123;value: 8, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next(<span class="number">13</span>)) <span class="comment">// =&gt; &#123;value: 42, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>è¿‡ç¨‹ï¼š</p><ul><li>é¦–å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªnextçš„æ—¶å€™ä¼ å‚ä¼šè¢«å¿½ç•¥ å› ä¸ºèµ‹å€¼çš„æ—¶å€™å·²ç»ä¼ äº†å‚ æ‰€ä»¥å‚æ•°å°±æ˜¯5 ä¸”åˆ°ç¬¬ä¸€ä¸ªyieldåœæ­¢ã€‚è¿”å›åé¢çš„ç»“æœ å°±æ˜¯6 æ­¤æ—¶xä¸º5</li><li>æ¥åˆ°ç¬¬äºŒä¸ªnext ä¼ å…¥çš„å‚æ•°è¦†ç›–ä¸Šä¸€æ¬¡yieldçš„ç»“æœ æ‰€ä»¥æ­¤æ—¶yä¸º<code>12*2=24</code> é‚£ä¹ˆè¿”å›çš„ç»“æœå°±æ˜¯8</li><li>ç¬¬ä¸‰ä¸ªnext ä¼ å…¥çš„å‚æ•°è¦†ç›–ä¸Šä¸€æ¬¡yieldçš„ç»“æœ æ‰€ä»¥æ­¤æ—¶zä¸º13 é‚£ä¹ˆæ€»ä½“å°±æ˜¯<code>5+24+13=42</code></li></ul><h2 id="ç®€å•å®ç°generator"><a href="#ç®€å•å®ç°generator" class="headerlink" title="ç®€å•å®ç°generator"></a>ç®€å•å®ç°generator</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cb ä¹Ÿå°±æ˜¯ç¼–è¯‘è¿‡çš„ test å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generator</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> object = &#123;</span><br><span class="line">      <span class="attr">next</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">stop</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">next</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> ret = cb(object);</span><br><span class="line">        <span class="keyword">if</span> (ret === <span class="literal">undefined</span>) <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">value</span>: ret,</span><br><span class="line">          <span class="attr">done</span>: <span class="literal">false</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœä½ ä½¿ç”¨ babel ç¼–è¯‘åå¯ä»¥å‘ç° test å‡½æ•°å˜æˆäº†è¿™æ ·</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a;</span><br><span class="line">  <span class="keyword">return</span> generator(<span class="function"><span class="keyword">function</span>(<span class="params">_context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">switch</span> ((_context.prev = _context.next)) &#123;</span><br><span class="line">        <span class="comment">// å¯ä»¥å‘ç°é€šè¿‡ yield å°†ä»£ç åˆ†å‰²æˆå‡ å—</span></span><br><span class="line">        <span class="comment">// æ¯æ¬¡æ‰§è¡Œ next å‡½æ•°å°±æ‰§è¡Œä¸€å—ä»£ç </span></span><br><span class="line">        <span class="comment">// å¹¶ä¸”è¡¨æ˜ä¸‹æ¬¡éœ€è¦æ‰§è¡Œå“ªå—ä»£ç </span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">          a = <span class="number">1</span> + <span class="number">2</span>;</span><br><span class="line">          _context.next = <span class="number">4</span>;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">          _context.next = <span class="number">6</span>;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line"><span class="comment">// æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;end&quot;</span>:</span><br><span class="line">          <span class="keyword">return</span> _context.stop();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a><code>async/await</code></h1><div class="note primary flat"><p>Generatorçš„è¯­æ³•ç³–ï¼Œæœ‰æ›´å¥½çš„è¯­ä¹‰æ€§å’Œé€‚ç”¨æ€§ï¼Œè¿”å›çš„æ˜¯promise</p></div><ul><li>awaitå’Œpromiseä¸€æ ·æ›´å¤šæ˜¯ç¬”è¯•é¢˜</li><li>awaitç›¸æ¯”ç›´æ¥ä½¿ç”¨promiseæ¥è¯´ ä¼˜åŠ¿åœ¨äºå¤„ç†thençš„è°ƒç”¨é“¾ï¼Œèƒ½å¤Ÿæ›´æ¸…æ™°çš„å†™å‡ºä»£ç ã€‚ç¼ºç‚¹åœ¨äºawaitå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚å› ä¸ºawaitä¼šé˜»å¡ä»£ç ã€‚ä¹Ÿè®¸ä¹‹åçš„å¼‚æ­¥ä»£ç å¹¶ä¸ä¾èµ–äºå‰è€…ï¼Œä½†ä»ç„¶éœ€è¦ç­‰å¾…å‰è€…å®Œæˆï¼Œå¯¼è‡´ä»£ç å¤±å»äº†å¹¶å‘æ€§ï¼Œæ­¤æ—¶æ›´åº”è¯¥ä½¿ç”¨<code>Promise.all</code></li><li>ä¸€ä¸ªå‡½æ•°å¦‚æœåŠ ä¸Šäº†async é‚£ä¹ˆå°±ä¼šè¿”å›ä¸€ä¸ªpromise<div class="note primary flat"><p><code>async =&gt; *</code> <code>await =&gt; yield</code></p></div>æ¡ˆä¾‹<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  a = a + <span class="keyword">await</span> <span class="number">10</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;2&#x27;</span>, a) <span class="comment">// -&gt; &#x27;2&#x27; 10</span></span><br><span class="line">  a = (<span class="keyword">await</span> <span class="number">10</span>) + a</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;3&#x27;</span>, a) <span class="comment">// -&gt; &#x27;3&#x27; 20</span></span><br><span class="line">&#125;</span><br><span class="line">b()</span><br><span class="line">a++</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;1&#x27;</span>, a) <span class="comment">// -&gt; &#x27;1&#x27; 1</span></span><br></pre></td></tr></table></figure></li><li>é¦–å…ˆå‡½æ•°bæ‰§è¡Œ ä½†æ˜¯é‡åˆ°äº†<code>await</code>æš‚æ—¶è¿”è¿˜äº†ä»£ç çš„æ§åˆ¶æƒï¼Œæ‰€ä»¥åˆ°å¤–é¢å»æ‰§è¡Œäº†a++å¹¶è¾“å‡ºaä¸º1ã€‚</li><li>åˆå› ä¸ºawaitå†…éƒ¨å®ç°äº†generatorsï¼Œä¸”å®ƒä¼šä¿ç•™å †æ ˆä¸­çš„ä¸œè¥¿ï¼Œæ‰€ä»¥åœ¨è¿”è¿˜ä¹‹å‰çš„a=0è¢«ä¿ç•™äº†ä¸‹æ¥ã€‚è¾“å‡º10 ç„¶åæ˜¯20</li></ul><h2 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h2><div class="note primary flat"><p>async/awaitçš„ä¼˜åŠ¿åœ¨äºå¤„ç† then çš„è°ƒç”¨é“¾ï¼Œèƒ½å¤Ÿæ›´æ¸…æ™°å‡†ç¡®çš„å†™å‡ºä»£ç ï¼Œå¹¶ä¸”ä¹Ÿèƒ½ä¼˜é›…åœ°è§£å†³å›è°ƒåœ°ç‹±é—®é¢˜ã€‚å½“ç„¶ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œå› ä¸º await å°†å¼‚æ­¥ä»£ç æ”¹é€ æˆäº†åŒæ­¥ä»£ç ï¼Œå¦‚æœå¤šä¸ªå¼‚æ­¥ä»£ç æ²¡æœ‰ä¾èµ–æ€§å´ä½¿ç”¨äº† await ä¼šå¯¼è‡´æ€§èƒ½ä¸Šçš„é™ä½ã€‚</p></div><h1 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h1><div class="note primary flat"><p>é¦–å…ˆjsçš„ä»»åŠ¡åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä¸­åˆåˆ†ä¸ºå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œæˆ‘ä»¬å¸¸è§çš„settimeoutï¼Œsetintervalç³»åˆ—å°±æ˜¯å®ä»»åŠ¡ï¼Œpromiseï¼Œmuationobserverç³»åˆ—å°±æ˜¯å¾®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡æ’é˜Ÿå®ä»»åŠ¡ã€‚</p></div><ul><li>é»˜è®¤ä»£ç ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œæ‰§è¡Œç¯å¢ƒé€šè¿‡<code>script</code>æ¥æ‰§è¡Œ</li><li>ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼Œå†æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚</li><li>ç»™å¼‚æ­¥ä»»åŠ¡åˆ’åˆ†é˜Ÿåˆ—ï¼Œåˆ†åˆ«å­˜åœ¨å¾®ä»»åŠ¡ï¼ˆç«‹å³å­˜æ”¾ï¼‰å’Œå®ä»»åŠ¡ï¼ˆæ—¶é—´åˆ°äº†æˆ–è€…äº‹æƒ…å‘ç”Ÿäº†åœ¨å­˜æ”¾ï¼‰åˆ°é˜Ÿåˆ—ä¸­</li><li>scriptæ‰§è¡Œåæ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡ã€‚</li><li>å¾®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åæ¸²æŸ“é¡µé¢ï¼ˆä¸æ˜¯æ¯æ¬¡éƒ½è°ƒç”¨â€”ï¼‰</li><li>å†å»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­çœ‹çœ‹ä¹Ÿæ²¡æœ‰åˆ°è¾¾æ—¶é—´çš„ï¼Œæ‹¿å‡ºæ¥å…¶ä¸­ä¸€ä¸ªæ‰§è¡Œã€‚</li><li>æ‰§è¡Œå®Œæ¯•åæŒ‰ä¸Šè¿°çš„æ­¥éª¤ä¸åœå¾ªç¯ã€‚<br>ä¾‹å­(UIæ¸²æŸ“æ˜¯å®ä»»åŠ¡)<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220406095138.png" alt=""><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220406095150.png" alt=""><div class="note primary flat"><p>è‡ªåŠ¨æ‰§è¡Œçš„æƒ…å†µ ä¼šè¾“å‡º listener1 listener2 task1 task2</p></div><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220406095222.png" alt=""><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220406100602.png" alt=""><div class="note primary flat"><p>å¦‚æœæ‰‹åŠ¨ç‚¹å‡»click ä¼šä¸€ä¸ªå®ä»»åŠ¡å–å‡ºæ¥ä¸€ä¸ªä¸ªæ‰§è¡Œï¼Œå…ˆæ‰§è¡Œclickçš„å®ä»»åŠ¡ï¼Œå–å‡ºå¾®ä»»åŠ¡å»æ‰§è¡Œã€‚ä¼šè¾“å‡º listener1 task1 listener2 task2</p></div></li></ul><p>æ¡ˆä¾‹1<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  <span class="comment">// await xx ==&gt; promise.resolve(()=&gt;&#123;console.log(3)&#125;).then()</span></span><br><span class="line">  <span class="comment">// console.log(3) æ”¾åˆ°promise.resolveæˆ–ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">console</span>.log(<span class="number">3</span>) </span><br><span class="line">  <span class="comment">// ç›¸å½“äºæŠŠconsole.log(4)æ”¾åˆ°äº†then promise.resolve(()=&gt;&#123;console.log(3)&#125;).then(()=&gt;&#123;</span></span><br><span class="line">  <span class="comment">//   console.log(4)</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">  <span class="comment">// å¾®ä»»åŠ¡è°å…ˆæ³¨å†Œè°å…ˆæ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="number">5</span>)&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">6</span>)</span><br><span class="line">  resolve(<span class="number">7</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="params">d</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(d)&#125;)</span><br><span class="line"></span><br><span class="line">asyncFunc()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º 1 6 2 3 8 7 4 5</span></span><br></pre></td></tr></table></figure><br>æ¡ˆä¾‹2<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220406101017.png" alt=""></p><h2 id="JSä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹ï¼Ÿ"><a href="#JSä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹ï¼Ÿ" class="headerlink" title="JSä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹ï¼Ÿ"></a>JSä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹ï¼Ÿ</h2><div class="note primary flat"><p>jsçš„å•çº¿ç¨‹å’Œå®ƒçš„ç”¨é€”æœ‰å…³ï¼Œä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScriptä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ä»¥åŠæ“ä½œDOMã€‚è¿™å†³å®šäº†ä»–åªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚æ¯”å¦‚å‡å®šjsåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸdomèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†èŠ‚ç‚¹ã€‚è¿™ä¸ªæ—¶å€™æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†ï¼Ÿæ‰€ä»¥ä¸ºäº†é¿å…å¤æ‚æ€§ï¼Œä»ä¸€è¯ç”Ÿï¼Œjså°±æ˜¯å•çº¿ç¨‹ï¼Œè¿™å·²ç»æˆä¸ºäº†è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒç‰¹å¾ä»¥åä¹Ÿä¸ä¼šæ”¹å˜ã€‚</p></div><h2 id="æµè§ˆå™¨äº‹ä»¶å¾ªç¯"><a href="#æµè§ˆå™¨äº‹ä»¶å¾ªç¯" class="headerlink" title="æµè§ˆå™¨äº‹ä»¶å¾ªç¯"></a>æµè§ˆå™¨äº‹ä»¶å¾ªç¯</h2><div class="note primary flat"><p>æ¶‰åŠé¢è¯•é¢˜ï¼šå¼‚æ­¥ä»£ç çš„æ‰§è¡Œé¡ºåºï¼Ÿè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯Event Loop</p></div><ul><li>é¦–å…ˆjsæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œåœ¨ä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œé€šè¿‡å°†ä¸åŒå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ‰§è¡Œæ ˆä¸­æ¥ç¡®ä¿ä»£ç çš„æœ‰åºè¿›è¡Œã€‚</li><li>åœ¨æ‰§è¡ŒåŒæ­¥ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°äº†å¼‚æ­¥äº‹ä»¶ï¼Œjså¼•æ“å¹¶ä¸ä¼šä¸€è‡´ç­‰å¾…å…¶è¿”å›ç»“æœï¼Œè€Œæ˜¯ä¼šå°†è¿™ä¸ªäº‹ä»¶æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–ä»»åŠ¡ã€‚</li><li>å½“åŒæ­¥äº‹ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œå†å°†å¼‚æ­¥äº‹ä»¶å¯¹åº”çš„å›è°ƒåŠ å…¥åˆ°ä¸å½“å‰æ‰§è¡Œæ ˆä¸­ä¸åŒçš„å¦ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œ</li><li>ä»»åŠ¡é˜Ÿåˆ—å¯ä»¥åˆ†ä¸ºå®ä»»åŠ¡å¯¹åˆ—å’Œå¾®ä»»åŠ¡å¯¹åˆ—ï¼Œå½“å½“å‰æ‰§è¡Œæ ˆä¸­çš„äº‹ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œjs å¼•æ“é¦–å…ˆä¼šåˆ¤æ–­å¾®ä»»åŠ¡å¯¹åˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡å¯ä»¥æ‰§è¡Œï¼Œå¦‚æœæœ‰å°±å°†å¾®ä»»åŠ¡é˜Ÿé¦–çš„äº‹ä»¶å‹å…¥æ ˆä¸­æ‰§è¡Œ</li><li>å½“å¾®ä»»åŠ¡å¯¹åˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåå†å»åˆ¤æ–­å®ä»»åŠ¡å¯¹åˆ—ä¸­çš„ä»»åŠ¡ã€‚<h2 id="process-nextTick"><a href="#process-nextTick" class="headerlink" title="process.nextTick"></a><code>process.nextTick</code></h2><div class="note primary flat"><p><code>process.nextTick</code>æŒ‡å®šçš„å¼‚æ­¥ä»»åŠ¡æ€»æ˜¯å‘ç”Ÿäºæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ä¹‹å‰ã€‚</p></div></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  resolve()</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;);</span><br><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// 2 5 4 3 1</span></span><br></pre></td></tr></table></figure><h2 id="å¾®ä»»åŠ¡"><a href="#å¾®ä»»åŠ¡" class="headerlink" title="å¾®ä»»åŠ¡"></a>å¾®ä»»åŠ¡</h2><ul><li><code>process.nextTick</code></li><li><code>promise</code></li><li><code>Object.observe</code></li><li><code>MutationObserver</code><h2 id="å®ä»»åŠ¡"><a href="#å®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡"></a>å®ä»»åŠ¡</h2></li><li><code>script</code></li><li><code>setTimeout</code></li><li><code>setInterval</code></li><li><code>setImmediate</code></li><li><code>I/O</code> ç½‘ç»œè¯·æ±‚å®Œæˆã€æ–‡ä»¶è¯»å†™å®Œæˆäº‹ä»¶</li><li><code>UI rendering</code></li><li>ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼ˆæ¯”å¦‚é¼ æ ‡ç‚¹å‡»ã€æ»šåŠ¨é¡µé¢ã€æ”¾å¤§ç¼©å°ç­‰ï¼‰</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¢--åŸå‹åŠå‘¨è¾¹</title>
    <link href="https://zlinni.github.io/posts/1060178397/"/>
    <id>https://zlinni.github.io/posts/1060178397/</id>
    <published>2022-04-20T07:01:39.000Z</published>
    <updated>2022-04-25T02:41:30.081Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h1><div class="note simple"><p>åŸå‹ã€åŸå‹é“¾ã€ç»§æ‰¿</p></div><h1 id="åŸå‹ã€åŸå‹é“¾"><a href="#åŸå‹ã€åŸå‹é“¾" class="headerlink" title="åŸå‹ã€åŸå‹é“¾"></a>åŸå‹ã€åŸå‹é“¾</h1><p><code>__proto__</code>å’Œprototypeçš„å…³ç³»ï¼š<code>__proto__</code>å’Œ<code>constructor</code>æ˜¯å¯¹è±¡ç‹¬æœ‰çš„ï¼Œ<code>prototype</code>æ˜¯å‡½æ•°ç‹¬æœ‰çš„ã€‚</p><div class="note primary flat"><p>åœ¨jsä¸­æˆ‘ä»¬ä½¿ç”¨æ„é€ å‡½æ•°æ¥æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°çš„å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†å¯ä»¥ç”±è¯¥æ„é€ å‡½æ•°çš„æ‰€æœ‰å®ä¾‹å…±äº«çš„æ–¹æ³•å’Œå±æ€§ã€‚å½“æˆ‘ä»¬ä½¿ç”¨æ„é€ å‡½æ•°æ–°å»ºä¸€ä¸ªå¯¹è±¡ä¹‹åï¼Œåœ¨è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨å°†åŒ…å«ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘æ„é€ å‡½æ•°çš„prototypeå±æ€§å¯¹åº”çš„å€¼ï¼Œåœ¨es5ä¸­è¿™ä¸ªæŒ‡é’ˆè¢«ç§°ä¸ºå¯¹è±¡çš„åŸå‹ã€‚ä¸€èˆ¬æ¥è¯´ä¸èƒ½è·å–åˆ°è¿™ä¸ªå€¼ï¼Œä½†æ˜¯æµè§ˆå™¨ä¸‹è½½éƒ½å®ç°äº†<code>proto</code>å±æ€§è®©æˆ‘ä»¬æ¥è®¿é—®ï¼Œä½†æ˜¯æœ€å¥½æ˜¯ä¸è¦ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå› ä¸ºä»–ä¸æ˜¯è§„èŒƒçš„ï¼Œæœ€å¥½ä½¿ç”¨<code>Object.getPrototypeOf()</code>æ¥è·å–å¯¹è±¡çš„åŸå‹</p></div><p>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆä»–å°±ä¼šå»ä»–çš„åŸå‹å¯¹è±¡é‡Œé¢æ‰¾è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡åˆä¼šæœ‰è‡ªå·±çš„åŸå‹ï¼Œäºæ˜¯å°±ä¸€ç›´æ‰¾ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯åŸå‹é“¾çš„æ¦‚å¿µã€‚åŸå‹é“¾çš„å°½å¤´ä¸€èˆ¬æ¥è¯´æ˜¯<code>Object.prototype</code>æ‰€ä»¥è¿™å°±æ˜¯æˆ‘ä»¬æ–°å»ºçš„å¯¹è±¡ä¸ºä»€ä¹ˆèƒ½å¤Ÿä½¿ç”¨<code>toString</code>ç­‰æ–¹æ³•çš„åŸå› </p><div class="note primary flat"><p>ç‰¹ç‚¹ï¼šjsçš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹åŸå‹çš„æ—¶å€™ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚</p></div><ul><li>åŸå‹ï¼Œä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œç”¨äºå®ç°å¯¹è±¡çš„å±æ€§ç»§æ‰¿ã€‚</li><li>æ„é€ å‡½æ•° å¯ä»¥é€šè¿‡newæ¥åˆ›å»ºå¯¹è±¡çš„ä¸€ä¸ªå‡½æ•°</li><li>å®ä¾‹ é€šè¿‡æ„é€ å‡½æ•°å’Œnewåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ã€‚é€šè¿‡<code>__proto__</code>æŒ‡å‘åŸå‹ï¼Œé€šè¿‡<code>constructor</code>æŒ‡å‘æ„é€ å‡½æ•°ã€‚</li></ul><div class="note primary flat"><p>ä»¥<code>Object</code>ä¸ºä¾‹ï¼Œä»–æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå› æ­¤å¯ä»¥ç”¨å®ƒåˆ›å»ºå®ä¾‹</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> instance = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>åˆ™æ­¤æ—¶ï¼Œ å®ä¾‹ä¸ºinstance, æ„é€ å‡½æ•°ä¸ºObjectï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæ„é€ å‡½æ•°æ‹¥æœ‰ä¸€ä¸ªprototypeçš„å±æ€§æŒ‡å‘åŸå‹ï¼Œå› æ­¤åŸå‹ä¸º:</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸå‹</span></span><br><span class="line"><span class="keyword">const</span> prototype = <span class="built_in">Object</span>.prototype</span><br></pre></td></tr></table></figure><p>ä¸‰è€…å…³ç³»ï¼š</p><ul><li><code>å®ä¾‹.__proto__ === åŸå‹</code></li><li><code>åŸå‹.constructor === æ„é€ å‡½æ•°</code></li><li><code>æ„é€ å‡½æ•°.prototype = åŸå‹</code></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220402093146.png" alt=""></p><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2><div class="note primary flat"><p>åŸå‹é“¾æ˜¯ç”±åŸå‹å¯¹è±¡ç»„æˆï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰<code>__proto__</code>å±æ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ã€‚<code>__proto__</code>å°†å¯¹è±¡è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾ï¼Œæ˜¯ä¸€ä¸ªç”¨æ¥å®ç°ç»§æ‰¿å’Œå…±äº«å±æ€§çš„æœ‰é™çš„å¯¹è±¡é“¾ã€‚</p></div><ul><li>å±æ€§æŸ¥æ‰¾æœºåˆ¶ï¼šå½“æŸ¥æ‰¾å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœå®ä¾‹å¯¹è±¡è‡ªèº«ä¸å­˜åœ¨è¯¥å±æ€§ï¼Œåˆ™æ²¿ç€åŸå‹é“¾å¾€ä¸Šä¸€çº§æŸ¥æ‰¾ï¼Œæ‰¾åˆ°æ—¶åˆ™è¾“å‡ºï¼Œä¸å­˜åœ¨æ—¶ï¼Œåˆ™ç»§ç»­æ²¿ç€åŸå‹é“¾å¾€ä¸Šä¸€çº§æŸ¥æ‰¾ï¼Œç›´è‡³æœ€é¡¶çº§çš„åŸå‹å¯¹è±¡<code>Object.prototype</code>ï¼Œå¦‚è¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œåˆ™è¾“å‡º<code>undefined</code>ï¼›</li><li>å±æ€§ä¿®æ”¹æœºåˆ¶: åªä¼šä¿®æ”¹å®ä¾‹å¯¹è±¡æœ¬èº«çš„å±æ€§ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿›è¡Œæ·»åŠ è¯¥å±æ€§ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹åŸå‹çš„å±æ€§æ—¶ï¼Œåˆ™å¯ä»¥ç”¨: <code>b.prototype.x = 2</code>ï¼›ä½†æ˜¯è¿™æ ·ä¼šé€ æˆæ‰€æœ‰ç»§æ‰¿äºè¯¥å¯¹è±¡çš„å®ä¾‹çš„å±æ€§å‘ç”Ÿæ”¹å˜ã€‚</li></ul><h2 id="jsè·å–åŸå‹çš„æ–¹æ³•"><a href="#jsè·å–åŸå‹çš„æ–¹æ³•" class="headerlink" title="jsè·å–åŸå‹çš„æ–¹æ³•"></a>jsè·å–åŸå‹çš„æ–¹æ³•</h2><ul><li><code>p.__proto__</code></li><li><code>p.constructor.prototype</code></li><li><code>Object.getPrototypeOf(p)</code></li></ul><p>å¦å¤–ï¼š</p><ul><li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰<code>prototype</code>å±æ€§ï¼Œé™¤äº†<code>Function.prototype.bind()</code> è¯¥å±æ€§æŒ‡å‘åŸå‹ã€‚</li><li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰<code>__proto__</code>å±æ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹</li><li>å¯¹è±¡å¯ä»¥é€šè¿‡<code>__proto__</code>æ¥å¯»æ‰¾ä¸å±äºè¯¥å¯¹è±¡çš„å±æ€§ï¼Œ<code>__proto__</code> å°†å¯¹è±¡è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾ã€‚</li></ul><h1 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220402094159.png" alt=""><br><div class="note primary flat"><p>æ¶‰åŠé¢è¯•é¢˜ï¼šåŸå‹å¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿclasså¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿclassæœ¬è´¨</p></div><br>é¦–å…ˆè®²ä¸€ä¸‹classï¼Œå…¶å®åœ¨jsä¸­ä¸å­˜åœ¨ç±»ï¼Œclassåªæ˜¯è¯­æ³•ç³–ï¼Œæœ¬è´¨è¿˜æ˜¯å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;&#125;</span><br><span class="line">Person <span class="keyword">instanceof</span> <span class="built_in">Function</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h2><div class="note primary flat"><p>ç»„åˆç»§æ‰¿æ˜¯æœ€å¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = value;</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//é€šè¿‡callçš„æ–¹å¼æ¥ç»§æ‰¿çˆ¶ç±»çš„å±æ€§(è°ƒç”¨æ„é€ x1)</span></span><br><span class="line">    Parent.call(<span class="built_in">this</span>,value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€šè¿‡æ”¹å˜å­ç±»çš„åŸå‹æ¥ç»§æ‰¿çˆ¶ç±»çš„å‡½æ•°ï¼ˆx2 æ­¤æ—¶ç»§æ‰¿äº†æ„é€ å‡½æ•°ï¼Œå¤šäº†ä¸å¿…è¦çš„å±æ€§ï¼‰</span></span><br><span class="line">Child.prototype = <span class="keyword">new</span> Parent();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> children = <span class="keyword">new</span> Child(<span class="string">&#x27;aaa&#x27;</span>);</span><br><span class="line">children.getValue()</span><br><span class="line"><span class="built_in">console</span>.log(children <span class="keyword">instanceof</span> Parent)<span class="comment">//true</span></span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡callæ¥ç»§æ‰¿çˆ¶ç±»çš„å±æ€§ï¼Œç„¶åæ”¹å˜å­ç±»çš„åŸå‹æ¥ç»§æ‰¿çˆ¶ç±»çš„å‡½æ•°ã€‚</li><li>ä¼˜ç‚¹ï¼šæ„é€ å‡½æ•°å¯ä»¥ä¼ å‚ï¼Œä¸ä¼šå’Œçˆ¶ç±»å¼•ç”¨å±æ€§å…±äº«ï¼Œå¯ä»¥å¤ç”¨çˆ¶ç±»çš„å‡½æ•°ã€‚</li><li>ç¼ºç‚¹ï¼šç»§æ‰¿çˆ¶ç±»çš„æ—¶å€™è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼ŒæŠŠçˆ¶ç±»ä¸å¿…è¦çš„å±æ€§ä¹Ÿç»™ç»§æ‰¿äº†ã€‚å†…å­˜ä¸Šé¢æµªè´¹</li></ul><h2 id="å¯„ç”Ÿç»„åˆç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿</h2><div class="note primary flat"><p>è¿™ç§æ–¹æ³•å¯¹ç»„åˆç»§æ‰¿è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç»„åˆç»§æ‰¿çš„ç¼ºç‚¹åœ¨äºç»§æ‰¿çˆ¶ç±»å‡½æ•°æ—¶è°ƒç”¨äº†æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼˜åŒ–æ‰è¿™ç‚¹å³å¯ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.val = value</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getValue = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.val)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">  Parent.call(<span class="built_in">this</span>,value);</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="built_in">Object</span>.create(Parent.prototype,&#123;</span><br><span class="line">  <span class="attr">constructor</span>:&#123;</span><br><span class="line">    <span class="attr">value</span>:Child,</span><br><span class="line">    <span class="attr">enumerable</span>:<span class="literal">false</span>,</span><br><span class="line">    <span class="attr">writable</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>:<span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> Child(<span class="number">1</span>);</span><br><span class="line">child.getValue();</span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Parent)</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>ä»¥ä¸Šç»§æ‰¿å°†çˆ¶ç±»çš„åŸå‹èµ‹å€¼ç»™äº†å­ç±»ï¼Œå¹¶ä¸”å°†æ„é€ å‡½æ•°è®¾ç½®æˆäº†å­ç±»ï¼Œè¿™æ ·è§£å†³äº†æ— ç”¨çš„çˆ¶ç±»å±æ€§é—®é¢˜ï¼Œè¿˜èƒ½æ­£ç¡®çš„æ‰¾åˆ°å­ç±»çš„æ„é€ å‡½æ•°ã€‚</p></div><h2 id="Classç»§æ‰¿"><a href="#Classç»§æ‰¿" class="headerlink" title="Classç»§æ‰¿"></a>Classç»§æ‰¿</h2><div class="note primary flat"><p>ä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½æ˜¯é€šè¿‡åŸå‹å»è§£å†³çš„ï¼Œåœ¨es6ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡classå»å®ç°ç»§æ‰¿ï¼Œå¹¶ä¸”å®ç°èµ·æ¥å¾ˆç®€å•</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.val = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">getValue</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>(value)</span><br><span class="line">    <span class="built_in">this</span>.val = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> child = <span class="keyword">new</span> Child(<span class="number">1</span>);</span><br><span class="line">child.getValue();</span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Parent)</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>classå®ç°ç»§æ‰¿çš„æ ¸å¿ƒåœ¨äºä½¿ç”¨extendsè¡¨æ˜ç»§æ‰¿è‡ªå“ªä¸ªçˆ¶ç±»ï¼Œå¹¶ä¸”åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨super<br>superå¯ä»¥çœ‹ä½œ<code>Parent.call(this,value)</code></p></div><div class="note warning flat"><p>å…¶å®è¿™æ ·åšè¿˜æ˜¯æœ‰ç¼ºé™·çš„ï¼Œæ¯”å¦‚çˆ¶ç±»çš„é™æ€æ–¹æ³•è¿˜æ˜¯ä¸èƒ½ç»§æ‰¿ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯„ç”Ÿç»„åˆç»§æ‰¿</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.val = value</span><br><span class="line">&#125;</span><br><span class="line">Parent.prototype.getValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.val)</span><br><span class="line">&#125;</span><br><span class="line">Parent.staticMethod = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘æ˜¯é™æ€&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    Parent.call(<span class="built_in">this</span>, value);</span><br><span class="line">&#125;</span><br><span class="line">Child.prototype = <span class="built_in">Object</span>.create(Parent.prototype, &#123;</span><br><span class="line">    <span class="attr">constructor</span>: &#123;</span><br><span class="line">        <span class="attr">value</span>: Child,</span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">configurable</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> Child(<span class="number">1</span>);</span><br><span class="line">child.getValue();</span><br><span class="line"><span class="comment">//Child.staticMethod()//æŠ¥é”™</span></span><br><span class="line">Parent.staticMethod()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è€Œclassç»§æ‰¿åˆ™å¯ä»¥<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.val = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">getValue</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="title">caseA</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘æ˜¯é™æ€&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>(value)</span><br><span class="line">    <span class="built_in">this</span>.val = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> child = <span class="keyword">new</span> Child(<span class="number">1</span>);</span><br><span class="line">child.getValue();</span><br><span class="line">Child.caseA()</span><br><span class="line"><span class="built_in">console</span>.log(child <span class="keyword">instanceof</span> Parent)</span><br></pre></td></tr></table></figure></p><h2 id="å…¶ä»–ç»§æ‰¿"><a href="#å…¶ä»–ç»§æ‰¿" class="headerlink" title="å…¶ä»–ç»§æ‰¿"></a>å…¶ä»–ç»§æ‰¿</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>ä½ æ‰€ä¸çŸ¥é“çš„JavaScriptâ‘¡--thisåŠå‘¨è¾¹</title>
    <link href="https://zlinni.github.io/posts/961371178/"/>
    <id>https://zlinni.github.io/posts/961371178/</id>
    <published>2022-04-20T07:01:23.000Z</published>
    <updated>2022-04-25T02:41:30.166Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h1><div class="note simple"><p>thiså…³é”®å­—ã€apply/call/bind åŸç†ã€å˜é‡æå‡ã€æ‰§è¡Œä¸Šä¸‹æ–‡ã€ä½œç”¨åŸŸã€é—­åŒ…ã€newå…³é”®å­—</p></div><h1 id="This"><a href="#This" class="headerlink" title="This"></a><code>This</code></h1><div class="note primary flat"><p>thisæŒ‡å‘è°ƒç”¨å…¶çš„å¯¹è±¡ã€‚é¡ºå¸¦ä¸€æï¼Œes6ä¸­çš„ç®­å¤´å‡½æ•°æ²¡æœ‰<code>this</code>,<code>argument</code>,<code>super</code>ç­‰ã€‚è¿™äº›åªä¾èµ–åŒ…å«ç®­å¤´å‡½æ•°æœ€æ¥è¿‘çš„å‡½æ•°ã€‚</p></div><div class="note primary flat"><p>å…ˆæ¥çœ‹é€‚ç”¨åœºæ™¯</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">foo()<span class="comment">//æŒ‡å‘window windowæ²¡æœ‰a è¾“å‡ºundefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">foo</span>: foo</span><br><span class="line">&#125;</span><br><span class="line">obj.foo() <span class="comment">//æŒ‡å‘obj è¾“å‡º2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> foo() <span class="comment">//æŒ‡å‘c newç»‘å®šäº†c cæ²¡æœ‰a è¾“å‡ºundefined</span></span><br></pre></td></tr></table></figure><div class="note primary flat"><p>ç®­å¤´å‡½æ•°ä¸­çš„this</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a()()())</span><br><span class="line"><span class="comment">//ç®­å¤´å‡½æ•°çš„thisæŒ‡å‘ç¬¬ä¸€ä¸ªåŒ…å«ä»–çš„æ™®é€šå‡½æ•°çš„thisè¿™é‡Œæ˜¯window</span></span><br></pre></td></tr></table></figure><ul><li>å¦å¤–å¯¹ç®­å¤´å‡½æ•°ä½¿ç”¨bindè¿™ç±»å‡½æ•°æ˜¯æ²¡æœ‰ç”¨çš„</li><li>é‚£ä¹ˆè¯´åˆ°bind æœ‰æ²¡æœ‰è€ƒè™‘è¿‡ä¸€ä¸ªå‡½æ•°å¤šæ¬¡bindçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="built_in">this</span>) &#125;</span><br><span class="line">fn.bind().bind(a)() <span class="comment">// =&gt; window</span></span><br><span class="line"><span class="comment">//å¯ä»¥å‘ç°ç»™å‡½æ•°bindå‡ æ¬¡ fnä¸­çš„thisæ°¸è¿œç”±ç¬¬ä¸€æ¬¡bindå†³å®š</span></span><br><span class="line"><span class="comment">//ç›¸å½“äº</span></span><br><span class="line"><span class="comment">// fn.bind().bind(a) ç­‰äº</span></span><br><span class="line"><span class="keyword">let</span> fn2 = <span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn.apply()</span><br><span class="line">  &#125;.apply(a)</span><br><span class="line">&#125;</span><br><span class="line">fn2()</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>thisçš„ç»‘å®šä¼˜å…ˆçº§å¦‚ä¸‹ï¼š<br><code>new</code>æœ€é«˜ï¼Œç„¶åæ˜¯<code>bind</code>ï¼Œä¹‹åæ˜¯<code>obj.foo()</code> æœ€åæ˜¯<code>foo()</code> åŒæ—¶<code>this</code>ä¸€æ—¦è¢«ç»‘å®šï¼Œå°±ä¸ä¼šè¢«ä»»ä½•æ–¹å¼æ”¹å˜ã€‚</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220331091103.png" alt=""></p><p>å› ä¸ºæ»¡è¶³ä¸äº†ä¸šåŠ¡éœ€æ±‚ æ‰€ä»¥äº§ç”Ÿäº†ä¸‰ç§æ–¹å¼è®©æˆ‘ä»¬æ‰‹åŠ¨æ”¹å˜thisçš„æŒ‡å‘<code>call apply bind</code></p><h1 id="apply-call-bind-åŸç†"><a href="#apply-call-bind-åŸç†" class="headerlink" title="apply/call/bind åŸç†"></a>apply/call/bind åŸç†</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220331091536.png" alt=""></p><div class="note primary flat"><p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯æŒ‚è½½åœ¨Functionå¯¹è±¡ä¸Šçš„ä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨è¿™ä¸‰ä¸ªæ–¹æ³•çš„å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func.call(thisArg, param1, param2, ...)</span><br><span class="line">func.apply(thisArg, [param1,param2,...])</span><br><span class="line">func.bind(thisArg, param1, param2, ...)</span><br></pre></td></tr></table></figure><ul><li>åœ¨æµè§ˆå™¨ä¸­ï¼Œå…¨å±€èŒƒå›´å†…çš„thisæŒ‡å‘windowå¯¹è±¡</li><li>åœ¨å‡½æ•°ä¸­ï¼Œthisæ°¸è¿œæŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡</li><li>æ„é€ å‡½æ•°ä¸­ï¼ŒthisæŒ‡å‘è¢«newå‡ºæ¥çš„æ–°å¯¹è±¡</li><li><code>call apply bind</code>ä¸­çš„thisè¢«å¼ºç»‘å®šåœ¨æŒ‡å®šçš„é‚£ä¸ªå¯¹è±¡ä¸Š</li><li>ç®­å¤´å‡½æ•°ä¸­çš„thisæ¯”è¾ƒç‰¹æ®Šã€‚ç®­å¤´å‡½æ•°thisä½œä¸ºçˆ¶ä½œç”¨åŸŸçš„thisï¼Œä¸æ˜¯è°ƒç”¨æ—¶çš„thisï¼Œè¦çŸ¥é“å‰å››ç§æ–¹å¼éƒ½æ˜¯è°ƒç”¨æ—¶ç¡®å®šï¼Œä¹Ÿå°±æ˜¯åŠ¨æ€çš„ï¼Œç„¶è€Œç®­å¤´å‡½æ•°çš„thisæ˜¯é™æ€çš„ï¼Œå£°æ˜çš„æ—¶å€™å°±ç¡®å®šäº†ä¸‹æ¥ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220331092027.png" alt=""></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name)</span><br><span class="line">    <span class="built_in">console</span>.log(age)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.value)</span><br><span class="line">&#125;</span><br><span class="line">getValue.call(a, <span class="string">&#x27;poe&#x27;</span>, <span class="string">&#x27;24&#x27;</span>)</span><br><span class="line">getValue.apply(a, [<span class="string">&#x27;poe&#x27;</span>, <span class="string">&#x27;24&#x27;</span>])</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>bind å’Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•ä½œç”¨ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚å¹¶ä¸”æˆ‘ä»¬å¯ä»¥é€šè¿‡ bind å®ç°æŸ¯é‡ŒåŒ–</p></div><h2 id="åˆ¤æ–­æ•°æ®ç±»å‹"><a href="#åˆ¤æ–­æ•°æ®ç±»å‹" class="headerlink" title="åˆ¤æ–­æ•°æ®ç±»å‹"></a>åˆ¤æ–­æ•°æ®ç±»å‹</h2><div class="note primary flat"><p>ç”¨<code>Object.prototype.toStirng</code>æ¥åˆ¤æ–­ç±»å‹æ˜¯æœ€åˆé€‚çš„ï¼Œå€Ÿç”¨å®ƒæˆ‘ä»¬å‡ ä¹å¯ä»¥åˆ¤æ–­æ‰€æœ‰ç±»å‹çš„æ•°æ®ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> type = <span class="keyword">typeof</span> obj;</span><br><span class="line">  <span class="keyword">if</span>(type!==<span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> type;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj).replace(<span class="regexp">/^$/</span>,<span class="string">&#x27;$1&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç±»æ•°ç»„å€Ÿç”¨æ–¹æ³•"><a href="#ç±»æ•°ç»„å€Ÿç”¨æ–¹æ³•" class="headerlink" title="ç±»æ•°ç»„å€Ÿç”¨æ–¹æ³•"></a>ç±»æ•°ç»„å€Ÿç”¨æ–¹æ³•</h2><div class="note primary flat"><p>var arrayLike = {<br>  0: â€˜javaâ€™,<br>  1: â€˜scriptâ€™,<br>  length: 2<br>}<br>Array.prototype.push.call(arrayLike, â€˜jackâ€™, â€˜lilyâ€™);<br>console.log(typeof arrayLike); // â€˜objectâ€™<br>console.log(arrayLike);<br>// {0: â€œjavaâ€, 1: â€œscriptâ€, 2: â€œjackâ€, 3: â€œlilyâ€, length: 4}</p></div><div class="note primary flat"><p>ç”¨callæ–¹æ³•æ¥å€Ÿç”¨ArrayåŸå‹é“¾ä¸Šé¢çš„pushæ–¹æ³• å®ç°ä¸€ä¸ªç±»æ•°ç»„çš„pushæ–¹æ³•ï¼Œç»™arrayLikeæ·»åŠ å…ƒç´ </p></div><h2 id="è·å–æ•°ç»„æœ€å¤§å€¼-æœ€å°å€¼"><a href="#è·å–æ•°ç»„æœ€å¤§å€¼-æœ€å°å€¼" class="headerlink" title="è·å–æ•°ç»„æœ€å¤§å€¼/æœ€å°å€¼"></a>è·å–æ•°ç»„æœ€å¤§å€¼/æœ€å°å€¼</h2><div class="note primary flat"><p>æˆ‘ä»¬å¯ä»¥ç”¨applyæ¥å®ç°æ•°ç»„ä¸­åˆ¤æ–­æœ€å¤§æœ€å°å€¼ï¼Œapplyç›´æ¥ä¼ é€’æ•°ç»„ä½œä¸ºè°ƒç”¨æ–¹æ³•çš„å‚æ•°ã€‚ä¹Ÿå¯ä»¥å‡å°‘ä¸€æ­¥å±•å¼€æ•°ç»„ï¼Œç›´æ¥ä½¿ç”¨Mathçš„æ–¹æ³•æ¥è·å–æœ€å¤§æœ€å°ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">13</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">16</span>];</span><br><span class="line"><span class="keyword">const</span> max = <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, arr); </span><br><span class="line"><span class="keyword">const</span> min = <span class="built_in">Math</span>.min.apply(<span class="built_in">Math</span>, arr);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(max);  <span class="comment">// 16</span></span><br><span class="line"><span class="built_in">console</span>.log(min);  <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><h2 id="å®ç°ä¸€ä¸ªbindå‡½æ•°"><a href="#å®ç°ä¸€ä¸ªbindå‡½æ•°" class="headerlink" title="å®ç°ä¸€ä¸ªbindå‡½æ•°"></a>å®ç°ä¸€ä¸ªbindå‡½æ•°</h2><p>å¯¹äºå®ç°ä»¥ä¸‹å‡ ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä»å‡ ä¸ªæ–¹é¢æ€è€ƒã€‚</p><ul><li>ä¸ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸ºwindow</li><li>æ”¹å˜äº†thisæŒ‡å‘ï¼Œè®©æ–°çš„å¯¹è±¡å¯ä»¥æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé‚£ä¹ˆæ€è·¯æ˜¯å¦å¯ä»¥å˜æˆç»™æ–°çš„å¯¹è±¡æ·»åŠ ä¸€ä¸ªå‡½æ•° æœ€åæ‰§è¡Œå®Œå†åˆ é™¤ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mybind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;err&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯new æ˜¯çš„è¯å˜æˆæŒ‡å‘function å¦åˆ™æŒ‡å‘context</span></span><br><span class="line">        <span class="keyword">var</span> _this = <span class="built_in">this</span> <span class="keyword">instanceof</span> self ? <span class="built_in">this</span> : context;</span><br><span class="line">        <span class="comment">//æ”¹å˜fçš„åŸå‹é“¾</span></span><br><span class="line">        F.prototype = self.prototype;</span><br><span class="line">        <span class="keyword">return</span> self.apply(_this, args.concat(...arguments));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°ä¸€ä¸ªcallå‡½æ•°"><a href="#å®ç°ä¸€ä¸ªcallå‡½æ•°" class="headerlink" title="å®ç°ä¸€ä¸ªcallå‡½æ•°"></a>å®ç°ä¸€ä¸ªcallå‡½æ•°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  context.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(args)</span><br><span class="line">  <span class="keyword">var</span> result = context.fn(...args);</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°ä¸€ä¸ªapplyå‡½æ•°"><a href="#å®ç°ä¸€ä¸ªapplyå‡½æ•°" class="headerlink" title="å®ç°ä¸€ä¸ªapplyå‡½æ•°"></a>å®ç°ä¸€ä¸ªapplyå‡½æ•°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myapply = <span class="function"><span class="keyword">function</span> (<span class="params">context, args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">    <span class="keyword">let</span> key = <span class="built_in">Symbol</span>(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">    context[key] = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">let</span> result = context[key](...args);</span><br><span class="line">    <span class="keyword">delete</span> context[key];</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h1><div class="note primary flat"><p>å½“æ‰§è¡Œjsä»£ç çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆæ‰§è¡Œç¯å¢ƒï¼Œåªè¦ä»£ç ä¸æ˜¯å†™åœ¨å‡½æ•°ä¸­çš„ï¼Œå°±æ˜¯åœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­ï¼Œå‡½æ•°çš„ä»£ç ä¼šäº§ç”Ÿå‡½æ•°æ‰§è¡Œç¯å¢ƒï¼Œåªæ­¤ä¸¤ç§æ‰§è¡Œç¯å¢ƒã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">b() <span class="comment">// call b</span></span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&#x27;Hello world&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;call b&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>ä¸Šé¢çš„è¾“å‡ºæ˜¯å› ä¸ºå˜é‡æå‡ã€‚é€šå¸¸çš„è§£é‡Šæ˜¯å£°æ˜çš„ä»£ç ç§»åŠ¨åˆ°é¡¶éƒ¨ã€‚ä½†æ›´å‡†ç¡®çš„è§£é‡Šæ˜¯ï¼Œåœ¨ç”Ÿæˆæ‰§è¡Œç¯å¢ƒæ—¶ï¼Œä¼šæœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œä¸€ä¸ªæ˜¯åˆ›å»ºé˜¶æ®µ:jsè§£é‡Šå™¨ä¼šæ‰¾å‡ºéœ€è¦æå‡çš„å˜é‡å’Œå‡½æ•°ï¼Œå¹¶ä¸”ç»™ä»–ä»¬æå‰åœ¨å†…å­˜ä¸­å¼€è¾Ÿå¥½ç©ºé—´ï¼Œå‡½æ•°çš„è¯ä¼šå°†æ•´ä¸ªå‡½æ•°å­˜å…¥å†…å­˜ä¸­ï¼Œå˜é‡åªå£°æ˜å¹¶ä¸”èµ‹å€¼ä¸ºundefinedï¼Œæ‰€ä»¥åœ¨ç¬¬äºŒä¸ªé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æå‰ä½¿ç”¨ã€‚</p></div><ul><li>åœ¨æå‡çš„è¿‡ç¨‹ä¸­ï¼Œç›¸åŒçš„å‡½æ•°ä¼šè¦†ç›–ä¸Šä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å‡½æ•°ä¼˜å…ˆäºå˜é‡æå‡</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">b() <span class="comment">// call b second</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;call b fist&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;call b second&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">&#x27;Hello world&#x27;</span></span><br></pre></td></tr></table></figure><div class="note primary flat"><p><code>var</code>ä¼šäº§ç”Ÿå¾ˆå¤šé”™è¯¯ï¼Œæ‰€ä»¥åœ¨es6ä¸­å¼•å…¥äº†<code>let</code>ï¼Œå®ƒä¸èƒ½åœ¨å£°æ˜å‰ä½¿ç”¨ï¼Œä½†å¹¶ä¸æ˜¯è¯´å®ƒæ²¡æœ‰æå‡ï¼Œä»–æœ‰æå‡ï¼Œä¸”ä¹Ÿåœ¨å£°æ˜çš„æ—¶å€™å¼€è¾Ÿäº†å†…å­˜ï¼Œä½†å› ä¸ºå®ƒçš„è¿™ä¸ªç‰¹æ€§å¯¼è‡´å®ƒä¸èƒ½åœ¨å£°æ˜å‰ä½¿ç”¨ã€‚</p></div><h1 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a>æ‰§è¡Œä¸Šä¸‹æ–‡</h1><div class="note primary flat"><p>å½“æ‰§è¡Œjsä»£ç çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸‰ç§æ‰§è¡Œä¸Šä¸‹æ–‡</p></div><ul><li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</li><li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</li><li><code>eval</code>æ‰§è¡Œä¸Šä¸‹æ–‡</li></ul><div class="note primary flat"><p>æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æœ‰ä¸‰ç§é‡è¦å±æ€§</p></div><ul><li>å˜é‡å¯¹è±¡ï¼ˆVO),åŒ…å«å˜é‡ï¼Œå‡½æ•°å£°æ˜å’Œå‡½æ•°çš„å½¢å‚ï¼Œè¯¥å±æ€§åªèƒ½åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­è®¿é—®ã€‚</li><li>ä½œç”¨åŸŸé“¾ï¼Œjsé‡‡ç”¨è¯æ³•ä½œç”¨åŸŸé“¾ï¼Œä¹Ÿå°±æ˜¯è¯´å˜é‡çš„ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰çš„æ—¶å€™å†³å®šäº†ã€‚</li><li><code>this</code></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>å¯¹äºä¸Šè¿°ä»£ç ä»£ç ä¸­ï¼Œæ‰§è¡Œæ ˆä¸­æœ‰ä¸¤ä¸ªä¸Šä¸‹æ–‡ï¼šå…¨å±€ä¸Šä¸‹æ–‡å’Œå‡½æ•°fooä¸Šä¸‹æ–‡</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stack = [</span><br><span class="line">    globalContext,</span><br><span class="line">    fooContext</span><br><span class="line">]</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>å¯¹äºå…¨å±€ä¸Šä¸‹æ–‡æ¥è¯´ï¼ŒVOå¤§æ¦‚æ˜¯è¿™æ ·çš„</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">globalContext.VO === globe</span><br><span class="line">globalContext.VO = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">undefined</span>,</span><br><span class="line"><span class="attr">foo</span>: &lt;<span class="built_in">Function</span>&gt;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>å¯¹äºå‡½æ•°fooæ¥è¯´ï¼ŒVOä¸èƒ½è®¿é—®ï¼Œåªèƒ½è®¿é—®åˆ°æ´»åŠ¨å¯¹è±¡AO</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fooContext.VO === foo.AO</span><br><span class="line">fooContext.AO &#123;</span><br><span class="line">    <span class="attr">i</span>: <span class="literal">undefined</span>,</span><br><span class="line"><span class="attr">b</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">arguments</span>: <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">// arguments æ˜¯å‡½æ•°ç‹¬æœ‰çš„å¯¹è±¡(ç®­å¤´å‡½æ•°æ²¡æœ‰)</span></span><br><span class="line"><span class="xml">// è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªä¼ªæ•°ç»„ï¼Œæœ‰ `length` å±æ€§ä¸”å¯ä»¥é€šè¿‡ä¸‹æ ‡è®¿é—®å…ƒç´ </span></span><br><span class="line"><span class="xml">// è¯¥å¯¹è±¡ä¸­çš„ `callee` å±æ€§ä»£è¡¨å‡½æ•°æœ¬èº«</span></span><br><span class="line"><span class="xml">// `caller` å±æ€§ä»£è¡¨å‡½æ•°çš„è°ƒç”¨è€…</span></span><br></pre></td></tr></table></figure><div class="note primary flat"><p>IIFEæ³¨æ„äº‹é¡¹</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    foo = <span class="number">10</span></span><br><span class="line">    <span class="built_in">console</span>.log(foo)</span><br><span class="line">&#125;()) <span class="comment">// -&gt; Æ’ foo() &#123; foo = 10 ; console.log(foo) &#125;</span></span><br></pre></td></tr></table></figure><div class="note primary flat"><p>jsè§£é‡Šå™¨åœ¨é‡åˆ°IIFEçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªè¾…åŠ©çš„ç‰¹å®šå¯¹è±¡ï¼Œç„¶åå°†å‡½æ•°çš„åç§°ï¼ˆè¿™é‡Œæ˜¯fooï¼‰ä½œä¸ºè¿™ä¸ªç‰¹å®šå¯¹è±¡çš„å±æ€§ã€‚å› æ­¤å‡½æ•°å†…éƒ¨æ‰å¯ä»¥è®¿é—®åˆ°fooï¼Œä½†è¿™ä¸ªå€¼æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸èƒ½ä¿®æ”¹ ä¹Ÿä¸èƒ½åƒè¿™æ ·å¯¹ä»–èµ‹å€¼æ”¹å˜ï¼Œæ‰€ä»¥æœ€åæ‰“å°çš„è¿˜æ˜¯è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å¤–éƒ¨çš„å€¼ä¹Ÿæ²¡æœ‰æ”¹å˜</p></div><p>æ€»ç»“<br><div class="note primary flat"><p>æ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªå¯¹è±¡</p></div></p><p>å®ƒåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p><ul><li>å˜é‡å¯¹è±¡VO</li><li>ä½œç”¨åŸŸé“¾ è¯æ³•ä½œç”¨åŸŸ</li><li>thisæŒ‡å‘</li></ul><p>å®ƒçš„ç±»å‹</p><ul><li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</li><li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</li><li><code>eval</code>æ‰§è¡Œä¸Šä¸‹æ–‡</li></ul><p>ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹</p><ul><li>åˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ ï¼ˆglobal ECï¼‰</li><li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡(caller)é€è¡Œ è‡ªä¸Šè€Œä¸‹æ‰§è¡Œã€‚é‡åˆ°å‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡(callee)è¢«pushåˆ°æ‰§è¡Œæ ˆé¡¶å±‚</li><li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«æ¿€æ´»åï¼Œæˆä¸º<code>active EC</code> å¼€å§‹æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç ï¼Œ<code>caller</code>è¢«æŒ‚èµ·</li><li>å‡½æ•°æ‰§è¡Œå®Œåï¼Œ<code>callee</code>è¢«popå‡ºæ‰§è¡Œæ ˆï¼Œæ§åˆ¶æƒè¿˜ç»™å…¨å±€ä¸Šä¸‹æ–‡(caller)ç»§ç»­æ‰§è¡Œ</li></ul><h1 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h1><ul><li>ä½œç”¨åŸŸï¼šä½œç”¨åŸŸå°±æ˜¯å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œä»–æœ‰ä¸€å¥—è®¿é—®å˜é‡çš„è§„åˆ™ï¼Œè¿™å¥—è§„åˆ™æ¥ç®¡ç†æµè§ˆå™¨å¼•æ“å¦‚ä½•åœ¨å½“å‰ä½œç”¨åŸŸä»¥åŠåµŒå¥—çš„ä½œç”¨åŸŸä¸­æ ¹æ®å˜é‡ï¼ˆæ ‡è¯†ç¬¦ï¼‰è¿›è¡Œå˜é‡æŸ¥æ‰¾</li><li>ä½œç”¨åŸŸé“¾ï¼šä½œç”¨åŸŸé“¾çš„ä½œç”¨æ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ï¼Œé€šè¿‡ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°å¤–å±‚ç¯å¢ƒçš„å˜é‡å’Œå‡½æ•°</li></ul><div class="note primary flat"><p>ä½œç”¨åŸŸé“¾æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘å˜é‡å¯¹è±¡çš„æŒ‡é’ˆåˆ—è¡¨ã€‚å˜é‡å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ…å«äº†æ‰§è¡Œç¯å¢ƒä¸­æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å¯¹è±¡ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯å§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ã€‚å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ï¼‰å§‹ç»ˆæ˜¯ä½œç”¨åŸŸé“¾çš„æœ€åä¸€ä¸ªå¯¹è±¡</p></div><ul><li>å½“æˆ‘ä»¬æŸ¥æ‰¾ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¦‚æœåœ¨å½“å‰æ‰§è¡Œç¯å¢ƒä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥æ²¿ç€ä½œç”¨åŸŸé“¾å‘åæŸ¥æ‰¾</li><li>ä½œç”¨åŸŸé“¾çš„åˆ›å»ºè¿‡ç¨‹å’Œæ‰§è¡Œä¸Šä¸‹æ–‡çš„å»ºç«‹æœ‰å…³ã€‚</li></ul><div class="note primary flat"><p>ä½œç”¨åŸŸå¯ä»¥ç†è§£ä¸ºå˜é‡çš„å¯è®¿é—®æ€§ æ€»å…±åˆ†ä¸ºä¸‰ç§ç±»å‹ åˆ†åˆ«ä¸ºï¼š</p></div><ul><li>å…¨å±€ä½œç”¨åŸŸ</li><li>å‡½æ•°ä½œç”¨åŸŸ</li><li>å—çº§ä½œç”¨åŸŸ</li></ul><h2 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h2><div class="note primary flat"><p>å…¨å±€å˜é‡æ˜¯æŒ‚è½½åœ¨windowå¯¹è±¡ä¸‹çš„å˜é‡ï¼Œæ‰€ä»¥åœ¨ç½‘é¡µä¸­çš„ä»»ä½•ä½ç½®éƒ½å¯ä»¥ä½¿ç”¨å¹¶ä¸”è®¿é—®åˆ°è¿™ä¸ªå…¨å±€å˜é‡ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> globalName = <span class="string">&#x27;global&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(globalName) <span class="comment">// global</span></span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;inner&#x27;</span></span><br><span class="line">  <span class="built_in">console</span>.log(name) <span class="comment">// inner</span></span><br><span class="line">&#125; </span><br><span class="line">getName();</span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">// </span></span><br><span class="line"><span class="built_in">console</span>.log(globalName); <span class="comment">//global</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  vName = <span class="string">&#x27;setName&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">setName();</span><br><span class="line"><span class="built_in">console</span>.log(vName); <span class="comment">// setName</span></span><br></pre></td></tr></table></figure><ul><li>å…¨å±€å˜é‡åœ¨ä»€ä¹ˆåœ°æ–¹å¯ä»¥è¢«è®¿é—®åˆ°</li><li>ä½†æ˜¯å¯èƒ½ä¼šå¼•èµ·å‘½åå†²çªçš„é—®é¢˜ï¼Œæ‰€ä»¥å®šä¹‰å˜é‡çš„æ—¶å€™æ³¨æ„ä½œç”¨åŸŸ</li></ul><h2 id="å‡½æ•°ä½œç”¨åŸŸ"><a href="#å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="å‡½æ•°ä½œç”¨åŸŸ"></a>å‡½æ•°ä½œç”¨åŸŸ</h2><div class="note primary flat"><p>å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡å«åšå‡½æ•°å˜é‡ï¼Œè¿™ä¸ªæ—¶å€™åªæœ‰åœ¨å‡½æ•°å†…éƒ¨æ‰èƒ½è®¿é—®åˆ°å®ƒï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨åŸŸä¹Ÿå°±æ˜¯å‡½æ•°çš„å†…éƒ¨ç§°ä¸ºå‡½æ•°ä½œç”¨åŸŸ</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&#x27;inner&#x27;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(name); <span class="comment">//inner</span></span><br><span class="line">&#125;</span><br><span class="line">getName();</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>é™¤äº†è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œå…¶ä»–åœ°æ–¹éƒ½æ˜¯ä¸èƒ½è®¿é—®åˆ°å®ƒçš„ï¼ŒåŒæ—¶å½“è¿™ä¸ªå‡½æ•°è¢«æ‰§è¡Œå®Œä¹‹åï¼Œè¿™ä¸ªå±€éƒ¨å˜é‡ä¹Ÿä¼šç›¸åº”è¢«é”€æ¯ï¼Œæ‰€ä»¥å¤–é¢è®¿é—®ä¸åˆ°è¿™ä¸ªå±€éƒ¨å˜é‡</p></div><h2 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸ</h2><div class="note primary flat"><p>es6æ–°å¢äº†å—çº§ä½œç”¨åŸŸï¼Œç›´æ¥çš„è¡¨ç°å°±æ˜¯letå…³é”®å­—ã€‚ä½¿ç”¨å®ƒå®šä¹‰çš„å˜é‡åªèƒ½åœ¨å—çº§ä½œç”¨åŸŸä¸­è¢«è®¿é—®ã€‚æœ‰æš‚æ—¶æ€§æ­»åŒºçš„ç‰¹ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå˜é‡åœ¨å®šä¹‰ä¹‹å‰æ˜¯ä¸èƒ½è¢«ä½¿ç”¨çš„ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">//a is not defined</span></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="string">&#x27;123&#x27;</span>ï¼›</span><br><span class="line">  <span class="built_in">console</span>.log(a)ï¼› <span class="comment">// 123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">//a is not defined</span></span><br><span class="line"><span class="comment">//å¦‚æœè¿™é‡Œæ˜¯var é‚£ä¹ˆç»“æœå°±æ˜¯ä¸‰ä¸ª123</span></span><br></pre></td></tr></table></figure><h1 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h1><div class="note primary flat"><p>é—­åŒ…å…¶å®å°±æ˜¯ä¸€ä¸ªå¯ä»¥è®¿é—®å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œåˆ›å»ºçš„å‡½æ•°å¯ä»¥è®¿é—®åˆ°å½“å‰å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line">fun1();</span><br><span class="line"><span class="keyword">var</span> result = fun1();</span><br><span class="line">result();  <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“åˆé—­åŒ…çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æŠŠè¿™æ®µä»£ç æ”¾åˆ°æ§åˆ¶å°æ‰§è¡Œä¸€ä¸‹ï¼Œå°±å¯ä»¥å‘ç°æœ€åè¾“å‡ºçš„ç»“æœæ˜¯ 1ï¼ˆå³ a å˜é‡çš„å€¼ï¼‰ã€‚é‚£ä¹ˆå¯ä»¥å¾ˆæ¸…æ¥šåœ°å‘ç°ï¼Œa å˜é‡ä½œä¸ºä¸€ä¸ª fun1 å‡½æ•°çš„å†…éƒ¨å˜é‡ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä½œä¸ºå‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼Œæ˜¯æ— æ³•è¢«å¤–éƒ¨è®¿é—®åˆ°çš„ã€‚ä½†æ˜¯é€šè¿‡é—­åŒ…ï¼Œæˆ‘ä»¬æœ€åè¿˜æ˜¯å¯ä»¥æ‹¿åˆ° a å˜é‡çš„å€¼</span></span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…çš„ä¸¤ä¸ªå¸¸ç”¨çš„ç”¨é€”"><a href="#é—­åŒ…çš„ä¸¤ä¸ªå¸¸ç”¨çš„ç”¨é€”" class="headerlink" title="é—­åŒ…çš„ä¸¤ä¸ªå¸¸ç”¨çš„ç”¨é€”"></a>é—­åŒ…çš„ä¸¤ä¸ªå¸¸ç”¨çš„ç”¨é€”</h2><ul><li>é—­åŒ…çš„ç¬¬ä¸€ä¸ªç”¨é€”æ˜¯ä½¿æˆ‘ä»¬åœ¨å‡½æ•°å¤–éƒ¨èƒ½å¤Ÿè®¿é—®åˆ°å†…éƒ¨çš„å˜é‡ã€‚</li><li>å¦å¤–ä¸€ä¸ªç”¨é€”æ˜¯ä½¿å¾—å·²ç»å…è®¸ç»“æŸçš„å‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ç»§ç»­ç•™åœ¨å†…å­˜ä¸­ï¼Œå› ä¸ºé—­åŒ…å‡½æ•°ä¿ç•™äº†è¿™ä¸ªå˜é‡å¯¹è±¡ çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªå˜é‡å¯¹è±¡ä¸ä¼šè¢«å›æ”¶ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="comment">// fn æ˜¯é—­åŒ…</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">  <span class="comment">// è¿™é‡Œä¹Ÿæ˜¯é—­åŒ…</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> fn2 = fn1()</span><br><span class="line">fn2()</span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…äº§ç”Ÿçš„åŸå› "><a href="#é—­åŒ…äº§ç”Ÿçš„åŸå› " class="headerlink" title="é—­åŒ…äº§ç”Ÿçš„åŸå› "></a>é—­åŒ…äº§ç”Ÿçš„åŸå› </h2><div class="note primary flat"><p>é—­åŒ…äº§ç”Ÿçš„æœ¬è´¨æ˜¯ï¼šå½“å‰ç¯å¢ƒä¸­å­˜åœ¨æŒ‡å‘çˆ¶çº§ä½œç”¨åŸŸçš„å¼•ç”¨ã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fun2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);  <span class="comment">//2</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fun2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result = fun1();</span><br><span class="line">result();</span><br></pre></td></tr></table></figure><ul><li>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œresultä¼šæ‹¿åˆ°çˆ¶çº§ä½œç”¨åŸŸçš„å˜é‡è¾“å‡º2ã€‚å› ä¸ºåœ¨å½“å‰çš„ç¯å¢ƒä¸­ï¼Œå«æœ‰å¯¹fun2å‡½æ•°çš„å¼•ç”¨ï¼Œè€Œfun2ä¸­åˆå¼•ç”¨äº†windowå’Œfun1ï¼Œfun2ï¼Œé‚£ä¹ˆæ­¤æ—¶fun2å¯ä»¥è®¿é—®åˆ°fun1ä¸­çš„2 é‚£ä¹ˆå°±è¾“å‡º2</li><li>é‚£æ˜¯ä¸æ˜¯åªæœ‰è¿”å›å‡½æ•°æ‰ç®—æ˜¯äº§ç”Ÿäº†é—­åŒ…ï¼Ÿå…¶å®ä¸æ˜¯ï¼Œå›åˆ°é—­åŒ…çš„æœ¬è´¨ã€‚æˆ‘ä»¬åªéœ€è¦è®©çˆ¶çº§ä½œç”¨åŸŸçš„å¼•ç”¨å­˜åœ¨å³å¯ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fun3;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span></span><br><span class="line">  fun3 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">fun1();</span><br><span class="line">fun3();</span><br></pre></td></tr></table></figure><div class="note primary flat"><p>å¯ä»¥çœ‹å‡ºå…¶ä¸­è¾“å‡ºçš„ç»“æœè¿˜æ˜¯2 å› ä¸ºåœ¨ç»™fun3èµ‹å€¼çš„æ—¶å€™ï¼Œfun3å°±å¯ä»¥è®¿é—®åˆ°window fun1å’Œæœ¬èº«çš„ä½œç”¨åŸŸï¼Œç„¶åç”±ä¸‹å¾€ä¸ŠæŸ¥æ‰¾ æ‰¾åˆ°äº†fun1ä¸­çš„2 è¾“å‡º2</p></div><p>ç»“è®ºï¼š<br>ä¸èƒ½é€šè¿‡æœ€åæœ‰æ²¡æœ‰è¿”å›å‡½æ•°æ¥åˆ¤æ–­é—­åŒ…ã€‚</p><h2 id="é—­åŒ…çš„è¡¨ç°å½¢å¼"><a href="#é—­åŒ…çš„è¡¨ç°å½¢å¼" class="headerlink" title="é—­åŒ…çš„è¡¨ç°å½¢å¼"></a>é—­åŒ…çš„è¡¨ç°å½¢å¼</h2><ol><li>è¿”å›ä¸€ä¸ªå‡½æ•°</li><li>åœ¨å®šæ—¶å™¨ï¼Œäº‹ä»¶ç›‘å¬ï¼Œajaxè¯·æ±‚ï¼Œwebworkersæˆ–è€…ä»»ä½•å¼‚æ­¥ä¸­ï¼Œåªè¦ä½¿ç”¨äº†å›è°ƒå‡½æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ä½¿ç”¨é—­åŒ…ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šæ—¶å™¨</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">&#125;ï¼Œ<span class="number">1000</span>);</span><br><span class="line"><span class="comment">// äº‹ä»¶ç›‘å¬</span></span><br><span class="line">$(<span class="string">&#x27;#app&#x27;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Event Listener&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li>ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’çš„å½¢å¼<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  &#125;</span><br><span class="line">  bar(baz);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// è¿™å°±æ˜¯é—­åŒ…</span></span><br><span class="line">  fn();</span><br><span class="line">&#125;</span><br><span class="line">foo();  <span class="comment">// è¾“å‡º2ï¼Œè€Œä¸æ˜¯1</span></span><br></pre></td></tr></table></figure></li><li>IIFEåˆ›å»ºäº†é—­åŒ… ä¿å­˜äº†å…¨å±€ä½œç”¨åŸŸwindowå’Œå½“å‰å‡½æ•°çš„ä½œç”¨åŸŸã€‚å› æ­¤å¯ä»¥è¾“å‡ºå…¨å±€ä½œç”¨åŸŸçš„å˜é‡ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">IIFE</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a);  <span class="comment">// è¾“å‡º2</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></li></ol><div class="note primary flat"><p>IIFE è¿™ä¸ªå‡½æ•°ä¼šç¨å¾®æœ‰äº›ç‰¹æ®Šï¼Œç®—æ˜¯ä¸€ç§è‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°æ‹¥æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚è¿™ä¸ä»…å¯ä»¥é¿å…äº†å¤–ç•Œè®¿é—®æ­¤ IIFE ä¸­çš„å˜é‡ï¼Œè€Œä¸”åˆä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼Œæˆ‘ä»¬ç»å¸¸èƒ½åœ¨é«˜çº§çš„ JavaScript ç¼–ç¨‹ä¸­çœ‹è§æ­¤ç±»å‡½æ•°ã€‚</p></div><h2 id="å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜ï¼Ÿ"></a>å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜ï¼Ÿ</h2><div class="note primary flat"><p>codeå¦‚ä¸‹</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i ++)&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸éš¾å‘ç° æœ€åçš„ç»“æœæ˜¯äº”ä¸ª6 é‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯äº”ä¸ª6ï¼Ÿå¦‚ä½•å®ç°è¾“å‡º12345ï¼Ÿ</p><ul><li>é¦–å…ˆæ˜¯äº‹ä»¶å¾ªç¯æœºåˆ¶ åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åå†å»æ‰§è¡Œä»»åŠ¡æ ˆä¸­çš„å®ä»»åŠ¡å¾®ä»»åŠ¡ï¼Œsettimeoutæ˜¯å®ä»»åŠ¡ï¼Œå› æ­¤å¾ªç¯ç»“æŸåå®ƒçš„å›è°ƒæ‰ä¾æ¬¡æ‰§è¡Œã€‚</li><li>å› ä¸ºsettimeoutæ˜¯ä¸€ç§é—­åŒ…ï¼Œå¾€ä¸ŠæŸ¥æ‰¾å®ƒçš„çˆ¶çº§ä½œç”¨åŸŸæ˜¯windowï¼Œè€Œå˜é‡iæ˜¯varå£°æ˜ï¼Œæ˜¯windowå¯¹è±¡ä¸Šé¢çš„å…¨å±€å˜é‡ï¼Œæ‰€ä»¥å¼€å§‹æ‰§è¡Œsettimeoutçš„æ—¶å€™iå·²ç»æ˜¯6äº† æ‰€ä»¥æœ€åè¿ç»­è¾“å‡ºçš„éƒ½æ˜¯6</li></ul><div class="note primary flat"><p>é‚£ä¹ˆå¦‚ä½•ä¾æ¬¡è¾“å‡º12345å‘¢ï¼Ÿ</p></div><ol><li>åˆ©ç”¨IIFE <div class="note primary flat"><p>å¯ä»¥åˆ©ç”¨IIFE æ¯æ¬¡forå¾ªç¯çš„æ—¶å€™æŠŠæ­¤æ—¶çš„å˜é‡ä¼ é€’åˆ°å®šæ—¶å™¨é‡Œé¢ï¼Œç„¶åæ‰§è¡Œã€‚</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;=<span class="number">5</span>;i++)&#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(j)</span><br><span class="line">    &#125;,<span class="number">0</span>)</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åˆ©ç”¨es6çš„let<div class="note primary flat"><p>letæœ‰å—çº§ä½œç”¨åŸŸï¼Œä»£ç ä»¥å—çº§æ‰§è¡Œ ç›¸å½“äºä»»åŠ¡æ¯æ¬¡éƒ½æ˜¯ç­‰å¾…å—çº§æ‰§è¡Œå®Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå—çº§</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i ++)&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åˆ©ç”¨å®šæ—¶å™¨ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°<div class="note primary flat"><p>å®šæ—¶å™¨çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¼ å…¥çš„å€¼ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªfunction</p></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i ++)&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params">j</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(j)</span><br><span class="line">  &#125;, <span class="number">0</span>,i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="Newçš„åŸç†"><a href="#Newçš„åŸç†" class="headerlink" title="Newçš„åŸç†"></a>Newçš„åŸç†</h1><h2 id="å¸¸è§è€ƒç‚¹"><a href="#å¸¸è§è€ƒç‚¹" class="headerlink" title="å¸¸è§è€ƒç‚¹"></a>å¸¸è§è€ƒç‚¹</h2><ul><li>newåšäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ</li><li>newè¿”å›ä¸åŒçš„ç±»å‹æ—¶æœ‰å£°æ˜è¡¨ç°ï¼Ÿ</li><li>æ‰‹å†™newçš„å®ç°è¿‡ç¨‹<div class="note primary flat"><p>newå…³é”®å­—çš„ä¸»è¦ä½œç”¨å°±æ˜¯æ‰§è¡Œä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œåœ¨newçš„è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®æ„é€ å‡½æ•°çš„æƒ…å†µï¼Œæ¥ç¡®å®šæ˜¯å¦å¯ä»¥æ¥æ”¶å‚æ•°çš„ä¼ é€’ã€‚ä¸‹é¢è§ä¾‹å­ã€‚</p></div></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = <span class="string">&#x27;Jack&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(); </span><br><span class="line"><span class="built_in">console</span>.log(p.name)  <span class="comment">// Jack</span></span><br></pre></td></tr></table></figure><p>pæ˜¯é€šè¿‡personè¿™ä¸ªæ„é€ å‡½æ•°ç”Ÿæˆçš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚</p><div class="note primary flat"><p>newå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºå‡ºä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”ç»‘å®šä¸Šthisï¼Œæ‰§è¡Œçš„æ­¥éª¤ä¸ºä»¥ä¸‹ï¼š</p></div><ol><li>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</li><li>å°†å¯¹è±¡è¿æ¥åˆ°æ„é€ å‡½æ•°åŸå‹ä¸Šï¼Œå¹¶ç»‘å®šthis thisæŒ‡å‘æ–°å¯¹è±¡</li><li>æ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰</li><li>è¿”å›æ–°å¯¹è±¡</li></ol><p>åœ¨ç¬¬å››æ­¥è¿”å›æ–°å¯¹è±¡çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªæƒ…å†µä¾‹å¤–ï¼š<br><div class="note primary flat"><p>å¦‚æœä¸ç”¨newå…³é”®å­—ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p></div></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = <span class="string">&#x27;Jack&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = Person();</span><br><span class="line"><span class="built_in">console</span>.log(p) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(name) <span class="comment">// Jack</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// &#x27;name&#x27; of undefined</span></span><br></pre></td></tr></table></figure><ul><li>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œä¸ç”¨new ç»“æœæ˜¯undefinedã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹thisæŒ‡å‘window æ‰€ä»¥nameæ˜¯Jack </li><li>é‚£ä¹ˆå¦‚æœæ„é€ å‡½æ•°ä¸­returnä¸€ä¸ªå¯¹è±¡ï¼Œç»“æœä¼šæ˜¯æ€ä¹ˆæ ·å‘¢ï¼Ÿ</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = <span class="string">&#x27;Jack&#x27;</span>; </span><br><span class="line">   <span class="keyword">return</span> &#123;<span class="attr">age</span>: <span class="number">18</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(); </span><br><span class="line"><span class="built_in">console</span>.log(p)  <span class="comment">// &#123;age: 18&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(p.age) <span class="comment">// 18</span></span><br></pre></td></tr></table></figure><div class="note primary flat"><p>é€šè¿‡è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºï¼Œå½“æ„é€ å‡½æ•°æœ€åreturnå‡ºæ¥çš„æ˜¯ä¸€ä¸ªå’Œthisæ— å…³çš„å¯¹è±¡çš„æ—¶å€™ï¼Œnewä¼šç›´æ¥è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯é€šè¿‡newæ‰§è¡Œæ­¥éª¤ç”Ÿæˆçš„thiså¯¹è±¡</p></div><p>ä½†å¦‚æœè¿™é‡Œæ„é€ å‡½æ•°è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ è¿˜æ˜¯ä¼šæŒ‰ç…§newçš„åŸåˆ™è¿”å›æ–°ç”Ÿæˆçš„å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">this</span>.name = <span class="string">&#x27;Jack&#x27;</span>; </span><br><span class="line">   <span class="keyword">return</span> <span class="string">&#x27;tom&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person(); </span><br><span class="line"><span class="built_in">console</span>.log(p)  <span class="comment">// &#123;name: &#x27;Jack&#x27;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name) <span class="comment">// Jack</span></span><br></pre></td></tr></table></figure><div class="note primary flat"><p>æ€»ç»“ï¼šnewå…³é”®å­—æ‰§è¡Œä¹‹åè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¦ä¹ˆæ˜¯å®ä¾‹å¯¹è±¡ï¼Œè¦ä¸æ˜¯returnè¯­å¥æŒ‡å®šçš„å¯¹è±¡</p></div><h2 id="æ‰‹å†™newçš„å®ç°è¿‡ç¨‹"><a href="#æ‰‹å†™newçš„å®ç°è¿‡ç¨‹" class="headerlink" title="æ‰‹å†™newçš„å®ç°è¿‡ç¨‹"></a>æ‰‹å†™newçš„å®ç°è¿‡ç¨‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">fn,...args</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> fn != <span class="string">&#x27;function&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;err&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//æˆ‘ä»¬çŸ¥é“obj.__proto__ = fn.prototypeçš„</span></span><br><span class="line">  <span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(fn.prototype);</span><br><span class="line">  <span class="keyword">var</span> res = fn.apply(obj,args);</span><br><span class="line">  <span class="keyword">return</span> res <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? res : obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>ä½¿ç”¨<code>Object.create</code>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡å¹¶å°†objçš„protoæŒ‡å®šä¸ºæ„é€ å‡½æ•°åŸå‹</li><li>ä½¿ç”¨applyæ–¹æ³• å°†æ„é€ å‡½æ•°å†…çš„thisæŒ‡å‘ä¸ºobj</li><li>åœ¨createè¿”å›çš„æ—¶å€™ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦å†³å®šè¿”å›ç»“æœ</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>CSRFè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ </title>
    <link href="https://zlinni.github.io/posts/2161165336/"/>
    <id>https://zlinni.github.io/posts/2161165336/</id>
    <published>2022-04-20T06:53:53.000Z</published>
    <updated>2022-04-25T02:41:30.106Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>Webå®‰å…¨ä¸€ç›´æ˜¯è€ç”Ÿå¸¸è°ˆçš„ä¸€ä¸ªé—®é¢˜ï¼Œä¸‹é¢å°±è®²è§£å…³äºCSRFçš„å†…å®¹<br>å…³é”®è¯ï¼šCSRFçš„ç”±æ¥ã€CSRFæ”»å‡»æµç¨‹ã€CSRFç±»å‹ã€CSRFç‰¹ç‚¹ã€CSRFå’ŒXSSçš„åŒºåˆ«ã€CSRFé˜²å¾¡æ‰‹æ®µã€‚</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220420202734.png" alt=""></p><h1 id="CSRFæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#CSRFæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="CSRFæ˜¯ä»€ä¹ˆï¼Ÿ"></a>CSRFæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingï¼Œé€šå¸¸ç¼©å†™ä¸º CSRF æˆ–è€… XSRFï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„ Web åº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚å¦‚:æ”»å‡»è€…è¯±å¯¼å—å®³è€…è¿›å…¥ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œåœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸­ï¼Œå‘è¢«æ”»å‡»ç½‘ç«™å‘é€è·¨ç«™è¯·æ±‚ã€‚åˆ©ç”¨å—å®³è€…åœ¨è¢«æ”»å‡»ç½‘ç«™å·²ç»è·å–çš„æ³¨å†Œå‡­è¯ï¼Œç»•è¿‡åå°çš„ç”¨æˆ·éªŒè¯ï¼Œè¾¾åˆ°å†’å……ç”¨æˆ·å¯¹è¢«æ”»å‡»çš„ç½‘ç«™æ‰§è¡ŒæŸé¡¹æ“ä½œçš„ç›®çš„ã€‚</p><h1 id="CSRFæ”»å‡»æµç¨‹"><a href="#CSRFæ”»å‡»æµç¨‹" class="headerlink" title="CSRFæ”»å‡»æµç¨‹"></a>CSRFæ”»å‡»æµç¨‹</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220420160348.png" alt=""></p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œè¦æƒ³å®Œæˆä¸€æ¬¡CSRFæ”»å‡»ï¼Œå°±è¦è¿›è¡Œä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ol><li>ç™»é™†å—ä¿¡ä»»çš„ç½‘ç«™Aå¹¶åœ¨æœ¬åœ°ç”Ÿæˆcookie</li><li>åœ¨æ²¡æœ‰ç™»å‡ºaçš„æƒ…å†µä¸‹è®¿é—®äº†bç½‘ç«™</li></ol><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¹Ÿè®¸ä¼šè¯´ï¼šâ€œå¦‚æœæˆ‘ä¸æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶ä¸­çš„ä¸€ä¸ªï¼Œæˆ‘å°±ä¸ä¼šå—åˆ°CSRFçš„æ”»å‡»â€ã€‚æ˜¯çš„ï¼Œç¡®å®å¦‚æ­¤ï¼Œä½†ä½ ä¸èƒ½ä¿è¯ä»¥ä¸‹æƒ…å†µä¸ä¼šå‘ç”Ÿï¼š</p><ol><li>ä½ ä¸èƒ½ä¿è¯ä½ ç™»å½•äº†ä¸€ä¸ªç½‘ç«™åï¼Œä¸å†æ‰“å¼€ä¸€ä¸ªtabé¡µé¢å¹¶è®¿é—®å¦å¤–çš„ç½‘ç«™ã€‚</li><li>ä½ ä¸èƒ½ä¿è¯ä½ å…³é—­æµè§ˆå™¨äº†åï¼Œä½ æœ¬åœ°çš„Cookieç«‹åˆ»è¿‡æœŸï¼Œä½ ä¸Šæ¬¡çš„ä¼šè¯å·²ç»ç»“æŸã€‚ï¼ˆäº‹å®ä¸Šï¼Œå…³é—­æµè§ˆå™¨ä¸èƒ½ç»“æŸä¸€ä¸ªä¼šè¯ï¼Œä½†å¤§å¤šæ•°äººéƒ½ä¼šé”™è¯¯çš„è®¤ä¸ºå…³é—­æµè§ˆå™¨å°±ç­‰äºé€€å‡ºç™»å½•/ç»“æŸä¼šè¯äº†â€¦â€¦ï¼‰</li><li>ä¸Šå›¾ä¸­æ‰€è°“çš„æ”»å‡»ç½‘ç«™ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªå­˜åœ¨å…¶ä»–æ¼æ´çš„å¯ä¿¡ä»»çš„ç»å¸¸è¢«äººè®¿é—®çš„ç½‘ç«™ã€‚</li></ol><h1 id="CSRFç±»å‹"><a href="#CSRFç±»å‹" class="headerlink" title="CSRFç±»å‹"></a>CSRFç±»å‹</h1><h2 id="GETç±»å‹"><a href="#GETç±»å‹" class="headerlink" title="GETç±»å‹"></a>GETç±»å‹</h2><p>åªéœ€è¦ä¸€ä¸ªgetè¯·æ±‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">&quot;http://bank.example/withdraw?amount=10000&amp;for=hacker&quot;</span> &gt; </span><br></pre></td></tr></table></figure></p><p>å—å®³è€…è®¿é—®åˆ°è¿™ä¸ªé¡µé¢çš„è¯¥imgçš„æ—¶å€™å°±ä¼šå‘è¯¥é“¾æ¥å‘å‡ºä¸€æ¬¡HTTPè¯·æ±‚ã€‚bankexampleå°±ä¼šæ”¶åˆ°åŒ…å«å—å®³è€…ç™»é™†ä¿¡æ¯çš„ä¸€æ¬¡è·¨åŸŸè¯·æ±‚ã€‚</p><h2 id="POSTç±»å‹"><a href="#POSTç±»å‹" class="headerlink" title="POSTç±»å‹"></a>POSTç±»å‹</h2><p>è¿™ç§ç±»å‹çš„CSRFåˆ©ç”¨èµ·æ¥é€šå¸¸æ˜¯ä¸€ä¸ªè‡ªåŠ¨æäº¤çš„è¡¨å•ä¾‹å¦‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> &lt;form action=<span class="string">&quot;http://bank.example/withdraw&quot;</span> method=POST&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;account&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaoming&quot;</span> /&gt;</span></span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;amount&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10000&quot;</span> /&gt;</span></span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;for&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hacker&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"> <span class="built_in">document</span>.forms[<span class="number">0</span>].submit(); </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span> </span><br></pre></td></tr></table></figure></p><p>è®¿é—®è¯¥é¡µé¢ä¹‹åï¼Œè¡¨å•ä¼šè‡ªåŠ¨æäº¤ï¼Œç›¸å½“äºæ¨¡æ‹Ÿç”¨æˆ·å®Œæˆäº†ä¸€æ¬¡postæ“ä½œã€‚</p><p>postç±»å‹çš„æ”»å‡»é€šå¸¸æ¯”getè¦æ±‚æ›´ä¸¥æ ¼ä¸€ç‚¹ï¼Œä½†æ˜¯ä¸å¤æ‚ã€‚ä»»ä½•ä¸ªäººç½‘ç«™ï¼Œåšå®¢ï¼Œè¢«é»‘å®¢ä¸Šä¼ é¡µé¢çš„ç½‘ç«™éƒ½æœ‰å¯èƒ½æ˜¯å‘èµ·æ”»å‡»çš„æ¥æºï¼Œåç«¯æ¥å£ä¸èƒ½å°†å®‰å…¨å¯„æ‰˜åœ¨ä»…å…è®¸postä¸Šé¢ã€‚</p><h2 id="é“¾æ¥ç±»å‹çš„CSRF"><a href="#é“¾æ¥ç±»å‹çš„CSRF" class="headerlink" title="é“¾æ¥ç±»å‹çš„CSRF"></a>é“¾æ¥ç±»å‹çš„CSRF</h2><p>é“¾æ¥ç±»å‹çš„CSRFå¹¶ä¸å¸¸è§ï¼Œæ¯”èµ·å…¶ä»–ä¸¤ç§ç”¨æˆ·æ‰“å¼€é¡µé¢å°±ä¸­æ‹›çš„æƒ…å†µä¸‹ï¼Œè¿™ç§éœ€è¦ç”¨æˆ·ç‚¹å‡»é“¾æ¥æ‰ä¼šè§¦å‘ã€‚è¿™ç§ç±»å‹é€šå¸¸æ˜¯åœ¨è®ºå›ä¸­å‘å¸ƒçš„å›¾ç‰‡ä¸­åµŒå…¥æ¶æ„é“¾æ¥ï¼Œæˆ–è€…ä»¥å¹¿å‘Šçš„å½¢å¼è¯±å¯¼ç”¨æˆ·ä¸­æ‹›ï¼Œæ”»å‡»è€…é€šå¸¸ä»¥æ¯”è¾ƒå¤¸å¼ çš„è¯è¯­è¯±éª—ç”¨æˆ·ç‚¹å‡»eg<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;http://test.com/csrf/withdraw.php?amount=1000&amp;for=hacker&quot;</span> taget=<span class="string">&quot;_blank&quot;</span>&gt;</span><br><span class="line">é‡ç£…æ¶ˆæ¯ï¼ï¼</span><br><span class="line">&lt;a/&gt;</span><br></pre></td></tr></table></figure></p><h1 id="CSRFçš„ç‰¹ç‚¹"><a href="#CSRFçš„ç‰¹ç‚¹" class="headerlink" title="CSRFçš„ç‰¹ç‚¹"></a>CSRFçš„ç‰¹ç‚¹</h1><ul><li>æ”»å‡»å‘ç”Ÿåœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œè€Œä¸æ˜¯è¢«æ”»å‡»çš„ç½‘ç«™ã€‚è¢«æ”»å‡»çš„ç½‘ç«™æ— æ³•é˜²æ­¢æ”»å‡»å‘ç”Ÿã€‚</li><li>æ”»å‡»åˆ©ç”¨å—å®³åœ¨è¢«æ”»å‡»ç½‘ç«™çš„ç™»é™†å‡­è¯ï¼Œå†’å……å—å®³è€…æäº¤æ“ä½œè€Œä¸æ˜¯ç›´æ¥çªƒå–æ•°æ®ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹ä¸èƒ½è·å–ç™»é™†å‡­è¯è€Œæ˜¯å†’ç”¨</li><li>è·¨ç«™è¯·æ±‚å¯ç”¨å„ç§æ–¹å¼ï¼šå›¾ç‰‡URLï¼Œè¶…é“¾æ¥ï¼ŒCORSï¼Œformè¡¨å•æäº¤ç­‰ç­‰ã€‚éƒ¨åˆ†è¯·æ±‚å¯ä»¥ç›´æ¥åµŒå…¥åœ¨ç¬¬ä¸‰æ–¹è®ºå›ï¼Œæ–‡ç« ä¸­ï¼Œéš¾ä»¥è¿›è¡Œè·Ÿè¸ªã€‚</li></ul><p>CSRFæ”»å‡»é€šå¸¸æ˜¯è·¨åŸŸçš„ï¼Œå› ä¸ºå¤–åŸŸæ›´å®¹æ˜“è¢«æ”»å‡»è€…æŒæ§ã€‚ä½†æ˜¯å¦‚æœæœ¬åŸŸä¸‹æœ‰å®¹æ˜“è¢«åˆ©ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¯ä»¥å‘å›¾å’Œé“¾æ¥çš„è®ºå›å’Œè¯„è®ºåŒºï¼Œæ”»å‡»å¯ä»¥ç›´æ¥åœ¨æœ¬åŸŸä¸‹é¢è¿›è¡Œï¼Œè€Œä¸”è¿™ç§æ”»å‡»æ›´åŠ å±é™©ã€‚</p><h1 id="CSRFå’ŒXSSçš„åŒºåˆ«"><a href="#CSRFå’ŒXSSçš„åŒºåˆ«" class="headerlink" title="CSRFå’ŒXSSçš„åŒºåˆ«"></a>CSRFå’ŒXSSçš„åŒºåˆ«</h1><ul><li>é€šå¸¸æ¥è¯´CSRFæ˜¯ç”±XSSå®ç°çš„ï¼ŒCSRFä¹Ÿæ—¶å¸¸è¢«ç§°ä¸ºXSRF</li><li>æœ¬è´¨ä¸Šè®²ï¼ŒXSSæ˜¯ä»£ç é—®é¢˜ï¼ŒCSRFæ˜¯HTTPé—®é¢˜ã€‚XSSæ˜¯å†…å®¹æ²¡æœ‰è¿‡æ»¤å¯¼è‡´æµè§ˆå™¨å°†æ”»å‡»è€…çš„è¾“å…¥å½“ä»£ç æ‰§è¡Œã€‚CSRFåˆ™æ˜¯å› ä¸ºï¼Œæµè§ˆå™¨åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™è‡ªåŠ¨å¸¦ä¸Šäº†cookieï¼Œè€Œä¸€èˆ¬ç½‘ç«™çš„sessionéƒ½å­˜åœ¨cookieé‡Œé¢ï¼ˆtokenéªŒè¯å¯ä»¥é¿å…ï¼‰</li></ul><h1 id="é˜²å¾¡"><a href="#é˜²å¾¡" class="headerlink" title="é˜²å¾¡"></a>é˜²å¾¡</h1><ul><li>éªŒè¯ç ï¼šå¼ºåˆ¶ç”¨æˆ·å¿…é¡»ä¸åº”ç”¨è¿›è¡Œäº¤äº’ï¼Œæ‰èƒ½å®Œæˆæœ€ç»ˆè¯·æ±‚ã€‚æ­¤ç§æ–¹å¼èƒ½å¾ˆå¥½çš„éåˆ¶csrfä½†ç”¨æˆ·ä½“éªŒä¸å¥½ã€‚</li><li>Referer checkï¼šè¯·æ±‚æ¥æºé™åˆ¶ï¼Œæ­¤ç§æ–¹æ³•æˆæœ¬æœ€ä½ï¼Œä½†å¹¶ä¸èƒ½ä¿è¯100%æœ‰æ•ˆï¼Œå› ä¸ºæœåŠ¡å™¨å¹¶ä¸æ˜¯ä»€ä¹ˆæ—¶å€™éƒ½èƒ½å–åˆ°refererï¼Œè€Œä¸”ä½ç‰ˆæœ¬çš„æµè§ˆå™¨é‡æ‘åœ¨ä¼ªé€ refererçš„é£é™©</li><li>tokenï¼›tokenéªŒè¯çš„CSRFæœºåˆ¶æ˜¯å…¬è®¤æœ€åˆé€‚çš„æ–¹æ¡ˆã€‚è‹¥ç½‘ç«™å­˜åœ¨XSSæ¼æ´ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿæ²¡æœ‰ç”¨ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç½‘ç»œç³»åˆ—" scheme="https://zlinni.github.io/categories/%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://zlinni.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>XSSè·¨ç«™è„šæœ¬æ”»å‡»</title>
    <link href="https://zlinni.github.io/posts/3679159268/"/>
    <id>https://zlinni.github.io/posts/3679159268/</id>
    <published>2022-04-20T02:33:01.000Z</published>
    <updated>2022-04-25T02:41:30.111Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="tip cogs"><p>Webå®‰å…¨ä¸€ç›´æ˜¯è€ç”Ÿå¸¸è°ˆçš„ä¸€ä¸ªé—®é¢˜ï¼Œä¸‹é¢å°±è®²è§£å…³äºXSSçš„å†…å®¹<br>å…³é”®è¯ï¼šXSSçš„ç”±æ¥ã€XSSç±»å‹ã€XSSé¢„é˜²æ‰‹æ®µã€XSSæ£€æµ‹ã€‚</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220420122304.png" alt=""></p><h1 id="XSSæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#XSSæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="XSSæ˜¯ä»€ä¹ˆï¼Ÿ"></a>XSSæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>Cross-Site Scriptingï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰ç®€ç§° XSSï¼Œæ˜¯ä¸€ç§ä»£ç æ³¨å…¥æ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡åœ¨ç›®æ ‡ç½‘ç«™ä¸Šé¢æ³¨å…¥æ¶æ„çš„è„šæœ¬ï¼Œè®©å…¶åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šé¢è¿è¡Œã€‚åˆ©ç”¨è¿™äº›è„šæœ¬å°±èƒ½è½»æ˜“è·å–åˆ°ç”¨æˆ·çš„cookieï¼ŒsessionIDç­‰ï¼Œäº§ç”Ÿè¿›ä¸€æ­¥å®‰å…¨å¨èƒã€‚</p><p>åœ¨å‘½åä¸Šä¸ºäº†å’ŒcssåŒºåˆ†ï¼Œæ”¹ä¸ºäº†xss</p><p>åœ¨å¤„ç†è¾“å…¥çš„æ—¶å€™ï¼Œä»¥ä¸‹å†…å®¹ä¸å¯ä¿¡ï¼š</p><ul><li>æ¥è‡ªç”¨æˆ·çš„ UGC ä¿¡æ¯</li><li>æ¥è‡ªç¬¬ä¸‰æ–¹çš„é“¾æ¥</li><li>URL å‚æ•°</li><li>POST å‚æ•°</li><li>Referer ï¼ˆå¯èƒ½æ¥è‡ªä¸å¯ä¿¡çš„æ¥æºï¼‰</li><li>Cookie ï¼ˆå¯èƒ½æ¥è‡ªå…¶ä»–å­åŸŸæ³¨å…¥ï¼‰</li></ul><h1 id="XSSåˆ†ç±»"><a href="#XSSåˆ†ç±»" class="headerlink" title="XSSåˆ†ç±»"></a>XSSåˆ†ç±»</h1><p>æ ¹æ®æ”»å‡»æ¥æºï¼Œå¯ä»¥åˆ†ä¸ºå­˜å‚¨å‹ï¼Œåå°„å‹å’ŒDOMå‹</p><h2 id="å­˜å‚¨å‹"><a href="#å­˜å‚¨å‹" class="headerlink" title="å­˜å‚¨å‹"></a>å­˜å‚¨å‹</h2><p>æ”»å‡»æµç¨‹ï¼š</p><ol><li>æ”»å‡»è€…å°†æ¶æ„ä»£ç æäº¤åˆ°ç½‘ç«™çš„æ•°æ®åº“ä¸­</li><li>ç”¨æˆ·å“åº”æœåŠ¡ç«¯çš„æ¶æ„ä»£ç </li><li>æ¶æ„ä»£ç çªƒå–ç”¨æˆ·æ•æ„Ÿä¿¡æ¯å‘é€åˆ°æ”»å‡»è€…ç½‘ç«™ï¼Œæˆ–å†’å……ç”¨æˆ·è¡Œä¸ºæ‰§è¡Œæ“ä½œã€‚</li></ol><p>å¸¸è§åœºæ™¯ï¼š<br>è®ºå›å‘å¸–ï¼Œå•†å“è¯„è®ºï¼Œç”¨æˆ·ç§ä¿¡</p><h2 id="åå°„å‹"><a href="#åå°„å‹" class="headerlink" title="åå°„å‹"></a>åå°„å‹</h2><p>æ”»å‡»æµç¨‹ï¼š</p><ol><li>æ”»å‡»è€…æ„é€ å‡ºç‰¹æ®Šçš„URLé‡Œé¢åŒ…å«æ¶æ„ä»£ç </li><li>ç”¨æˆ·è¢«è¯±å¯¼ç‚¹å‡»ç‰¹æ®ŠURLï¼Œæ‰§è¡Œæ¶æ„æ“ä½œã€‚</li></ol><p>åå°„å‹å’Œå­˜å‚¨å‹çš„åŒºåˆ«åœ¨äºï¼Œä¸€ä¸ªæ˜¯å­˜åœ¨URLé‡Œé¢ï¼Œä¸€ä¸ªæ˜¯å­˜åœ¨æ•°æ®åº“é‡Œé¢ã€‚</p><p>å¸¸è§åœºæ™¯ï¼š<br>ç½‘ç«™æœç´¢ï¼Œè·³è½¬ã€‚</p><p>éœ€è¦ç”¨æˆ·ä¸»åŠ¨å»ç‚¹å‡»ï¼Œæ‰€ä»¥æ”»å‡»è€…å¸¸æœ‰å¤šç§æ‰‹æ®µè¯±å¯¼ç”¨æˆ·ç‚¹å‡»ã€‚</p><p>å¦å¤–æ³¨æ„POSTä¹Ÿå¯ä»¥è¯±å‘åå°„å‹XSSï¼Œä¸è¿‡éœ€è¦æ„å»ºè¡¨å•æäº¤ç•Œé¢æ‰€ä»¥å°‘è§ã€‚</p><h2 id="DOMå‹"><a href="#DOMå‹" class="headerlink" title="DOMå‹"></a>DOMå‹</h2><p>æ”»å‡»æµç¨‹ï¼š</p><ol><li>æ”»å‡»è€…æ„é€ å‡ºç‰¹æ®Šçš„URLé‡Œé¢åŒ…å«æ¶æ„ä»£ç </li><li>ç”¨æˆ·æ‰“å¼€å¸¦æœ‰æ¶æ„ä»£ç çš„URL</li><li>æµè§ˆå™¨æ‰§è¡Œæ¶æ„ä»£ç </li></ol><p>DOMå‹å’Œå‰ä¸¤ç§çš„åŒºåˆ«åœ¨äºï¼ŒDOMå‹çš„æ”»å‡»æ˜¯ç”±æµè§ˆå™¨ç«¯å®Œæˆçš„ï¼Œå±äºjsè‡ªèº«çš„æ¼æ´ï¼Œå…¶ä»–ä¸¤ç§éƒ½æ˜¯æœåŠ¡å™¨ç«¯çš„å®‰å…¨æ¼æ´</p><h1 id="XSSæ”»å‡»é¢„é˜²"><a href="#XSSæ”»å‡»é¢„é˜²" class="headerlink" title="XSSæ”»å‡»é¢„é˜²"></a>XSSæ”»å‡»é¢„é˜²</h1><p>ä¸Šè¿°äº†è§£åˆ°ï¼ŒXSSæ”»å‡»æœ‰ä¸¤ç§è¦ç´ </p><ol><li>æ”»å‡»è€…æäº¤æ¶æ„ä»£ç </li><li>æµè§ˆå™¨æ‰§è¡Œæ¶æ„ä»£ç </li></ol><p>é’ˆå¯¹ç¬¬ä¸€ä¸ªè¦ç´ ï¼Œæœ‰ä»¥ä¸‹çš„é˜²èŒƒæªæ–½</p><h2 id="è¾“å…¥è¿‡æ»¤"><a href="#è¾“å…¥è¿‡æ»¤" class="headerlink" title="è¾“å…¥è¿‡æ»¤"></a>è¾“å…¥è¿‡æ»¤</h2><p>å‰ç«¯è¿‡æ»¤â€”&gt;åç«¯ï¼Ÿ<br>ä¸å¯è¡Œ ç»•è¿‡è¿‡æ»¤ï¼Œç›´æ¥æ„é€ è¯·æ±‚å°±å¯ä»¥æäº¤äº†</p><p>æ•°æ®åº“è¾“å…¥è¿‡æ»¤â€”&gt;å‰ç«¯ï¼Ÿ<br>ä¸ä¸€å®šå¯è¡Œã€‚<br>eg è¾“å…¥<code>5&lt;7</code> åœ¨å†™å…¥æ•°æ®åº“å‰è¢«è½¬ä¹‰æˆ<code>5 &amp;lt; 7</code><br>é—®é¢˜æ˜¯æˆ‘ä»¬åœ¨æäº¤é˜¶æ®µä¸æ¸…æ¥šå†…å®¹è¦è¾“å‡ºåˆ°å“ªé‡Œã€‚ä¹Ÿå°±æ˜¯æ„å‘³ç€æˆ‘ä»¬çš„å†…å®¹</p><ol><li>ç”¨æˆ·æäº¤åˆ°å‰ç«¯å’Œå®¢æˆ·ç«¯ï¼Œç»è¿‡äº†<code>escapeHTML()</code>è½¬ä¹‰ï¼Œå®¢æˆ·ç«¯å°±ä¹±ç äº†</li><li>å‰ç«¯ä¸åŒåœ°æ–¹éœ€è¦çš„ç¼–ç ä¹Ÿä¸ä¸€æ ·<ul><li>å½“ <code>5 &amp;lt; 7</code> ä½œä¸º HTML æ‹¼æ¥é¡µé¢æ—¶ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼š</li><li>å½“ä½œä¸ºAJAXè¿”å›çš„æ—¶å€™ï¼Œè¿™ä¸ªå†…å®¹è¦ç»è¿‡å¤„ç†æ‰å¯ä»¥æ˜¾ç¤ºã€‚</li></ul></li></ol><p>æ‰€ä»¥åœ¨è¾“å…¥ä¾§æ˜¯å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ä½†æ˜¯æœ‰ä¹±ç å’Œä¸ç¡®å®šæ€§çš„é—®é¢˜ï¼Œå¯¼è‡´å·¥ç¨‹é‡åŠ å¤§ã€‚</p><p>è¾“å…¥ä¾§ä¸è¡Œå°±è¦é€šè¿‡æµè§ˆå™¨æ¥é˜²èŒƒ</p><ol><li>é˜²æ­¢HTMLæ³¨å…¥</li><li>é˜²æ­¢JSæ‰§è¡Œçš„æ—¶å€™æ‰§è¡Œæ¶æ„ä»£ç </li></ol><h2 id="é¢„é˜²å­˜å‚¨å‹å’Œåå°„å‹"><a href="#é¢„é˜²å­˜å‚¨å‹å’Œåå°„å‹" class="headerlink" title="é¢„é˜²å­˜å‚¨å‹å’Œåå°„å‹"></a>é¢„é˜²å­˜å‚¨å‹å’Œåå°„å‹</h2><p>å­˜å‚¨å‹å’Œåå°„å‹éƒ½æ˜¯åœ¨æœåŠ¡ç«¯å–å‡ºæ¶æ„ä»£ç åæ’å…¥åˆ°HTMLé‡Œï¼Œæ”»å‡»è€…å°†æ•°æ®å†…åµŒåˆ°ä»£ç ä¸­ï¼Œè¢«æµè§ˆå™¨æ‰§è¡Œ</p><p>è§£å†³æ–¹æ³•</p><ol><li>çº¯å‰ç«¯æ¸²æŸ“ï¼Œæ•°æ®å’Œä»£ç éš”ç¦»</li><li>å¯¹HTMLåšå……åˆ†è½¬ä¹‰</li></ol><h3 id="çº¯å‰ç«¯æ¸²æŸ“"><a href="#çº¯å‰ç«¯æ¸²æŸ“" class="headerlink" title="çº¯å‰ç«¯æ¸²æŸ“"></a>çº¯å‰ç«¯æ¸²æŸ“</h3><p>è¿‡ç¨‹ï¼š</p><ol><li>åŠ è½½é™æ€HTMLï¼Œæ²¡æœ‰ä»»ä½•ä¸šåŠ¡æ•°æ®</li><li>æµè§ˆå™¨æ‰§è¡ŒHTMLä¸­çš„jsä»£ç </li><li>æ•°æ®é€šè¿‡AJAXåŠ è½½</li></ol><p>å…³é”®åœ¨äºï¼Œæˆ‘ä»¬è¦å‘Šè¯‰æµè§ˆå™¨ä¸‹é¢è¦è®¾ç½®çš„å†…å®¹æ˜¯æ–‡æœ¬ï¼ˆ.innerTextï¼‰ï¼Œè¿˜æ˜¯å±æ€§ï¼ˆ.setAttributeï¼‰ï¼Œè¿˜æ˜¯æ ·å¼ï¼ˆ.styleï¼‰ç­‰ç­‰ã€‚æµè§ˆå™¨ä¸ä¼šè¢«è½»æ˜“çš„è¢«æ¬ºéª—ï¼Œæ‰§è¡Œé¢„æœŸå¤–çš„ä»£ç äº†ã€‚</p><div class="note warning flat"><p>æ³¨æ„é¿å…DOMå‹XSS æ¯”å¦‚onloadäº‹ä»¶å’Œherfä¸­çš„<code>javascript:xxx</code></p></div><p>åœ¨å¾ˆå¤šå†…éƒ¨ã€ç®¡ç†ç³»ç»Ÿä¸­ï¼Œé‡‡ç”¨çº¯å‰ç«¯æ¸²æŸ“æ˜¯éå¸¸åˆé€‚çš„ã€‚ä½†å¯¹äºæ€§èƒ½è¦æ±‚é«˜ï¼Œæˆ–æœ‰ SEO éœ€æ±‚çš„é¡µé¢ï¼Œæˆ‘ä»¬ä»ç„¶è¦é¢å¯¹æ‹¼æ¥ HTML çš„é—®é¢˜ã€‚</p><h3 id="è½¬ä¹‰HTML"><a href="#è½¬ä¹‰HTML" class="headerlink" title="è½¬ä¹‰HTML"></a>è½¬ä¹‰HTML</h3><p>åˆ©ç”¨è½¬ä¹‰åº“æ¥è¿›è¡Œé˜²æŠ¤</p><h3 id="é¢„é˜²DOMå‹XSS"><a href="#é¢„é˜²DOMå‹XSS" class="headerlink" title="é¢„é˜²DOMå‹XSS"></a>é¢„é˜²DOMå‹XSS</h3><p>ä¸è¦ç”¨<code>innerHTML</code>ï¼Œ<code>document.write</code>ç³»åˆ—ä»£ç <br>ç”¨<code>textContent</code>,<code>setAttribute</code>ç³»åˆ—ä»£ç </p><p>åœ¨vue/reactä¸­ä¸”ä¸ä½¿ç”¨<code>v-html/dangerouslySetInnerHTML</code> åŠŸèƒ½ï¼Œå°±åœ¨å‰ç«¯ render é˜¶æ®µé¿å… <code>innerHTMLã€outerHTML</code> çš„ XSS éšæ‚£ã€‚</p><p>DOM ä¸­çš„å†…è”äº‹ä»¶ç›‘å¬å™¨ï¼Œå¦‚ <code>location</code>ã€<code>onclick</code>ã€<code>onerror</code>ã€<code>onload</code>ã€<code>onmouseover</code> ç­‰ï¼Œ<code>&lt;a&gt;</code> æ ‡ç­¾çš„ <code>href</code> å±æ€§ï¼ŒJavaScript çš„ <code>eval()</code>ã€<code>setTimeout()</code>ã€<code>setInterval()</code> ç­‰<br>éƒ½èƒ½è¿›è¡Œxssæ”»å‡»ï¼Œæ³¨æ„é˜²èŒƒå­—ç¬¦ä¸²æ‹¼æ¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å†…è”äº‹ä»¶ç›‘å¬å™¨ä¸­åŒ…å«æ¶æ„ä»£ç  --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">onclick</span>=<span class="string">&quot;UNTRUSTED&quot;</span> <span class="attr">onerror</span>=<span class="string">&quot;UNTRUSTED&quot;</span> <span class="attr">src</span>=<span class="string">&quot;data:image/png,&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- é“¾æ¥å†…åŒ…å«æ¶æ„ä»£ç  --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;UNTRUSTED&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="comment">// setTimeout()/setInterval() ä¸­è°ƒç”¨æ¶æ„ä»£ç </span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="built_in">setTimeout</span>(<span class="string">&quot;UNTRUSTED&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="built_in">setInterval</span>(<span class="string">&quot;UNTRUSTED&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="comment">// location è°ƒç”¨æ¶æ„ä»£ç </span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">location.href = <span class="string">&#x27;UNTRUSTED&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="comment">// eval() ä¸­è°ƒç”¨æ¶æ„ä»£ç </span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="built_in">eval</span>(<span class="string">&quot;UNTRUSTED&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–é˜²èŒƒ"><a href="#å…¶ä»–é˜²èŒƒ" class="headerlink" title="å…¶ä»–é˜²èŒƒ"></a>å…¶ä»–é˜²èŒƒ</h2><div class="note primary flat"><p>ä»¥ä¸‹æ˜¯ä¸€äº›é€šç”¨æ–¹æ¡ˆ</p></div><h3 id="Content-Security-Policy"><a href="#Content-Security-Policy" class="headerlink" title="Content Security Policy"></a>Content Security Policy</h3><p>ä¸¥æ ¼çš„ CSP åœ¨ XSS çš„é˜²èŒƒä¸­å¯ä»¥èµ·åˆ°ä»¥ä¸‹çš„ä½œç”¨ï¼š</p><ul><li>ç¦æ­¢åŠ è½½å¤–åŸŸä»£ç ï¼Œé˜²æ­¢å¤æ‚çš„æ”»å‡»é€»è¾‘ã€‚</li><li>ç¦æ­¢å¤–åŸŸæäº¤ï¼Œç½‘ç«™è¢«æ”»å‡»åï¼Œç”¨æˆ·çš„æ•°æ®ä¸ä¼šæ³„éœ²åˆ°å¤–åŸŸã€‚</li><li>ç¦æ­¢å†…è”è„šæœ¬æ‰§è¡Œï¼ˆè§„åˆ™è¾ƒä¸¥æ ¼ï¼Œç›®å‰å‘ç° GitHub ä½¿ç”¨ï¼‰ã€‚</li><li>ç¦æ­¢æœªæˆæƒçš„è„šæœ¬æ‰§è¡Œï¼ˆæ–°ç‰¹æ€§ï¼ŒGoogle Map ç§»åŠ¨ç‰ˆåœ¨ä½¿ç”¨ï¼‰ã€‚</li><li>åˆç†ä½¿ç”¨ä¸ŠæŠ¥å¯ä»¥åŠæ—¶å‘ç° XSSï¼Œåˆ©äºå°½å¿«ä¿®å¤é—®é¢˜ã€‚</li></ul><p>å…³äº CSP çš„è¯¦æƒ…ï¼Œè¯·å…³æ³¨å‰ç«¯å®‰å…¨ç³»åˆ—åç»­çš„æ–‡ç« ã€‚</p><h3 id="è¾“å…¥å†…å®¹é•¿åº¦æ§åˆ¶"><a href="#è¾“å…¥å†…å®¹é•¿åº¦æ§åˆ¶" class="headerlink" title="è¾“å…¥å†…å®¹é•¿åº¦æ§åˆ¶"></a>è¾“å…¥å†…å®¹é•¿åº¦æ§åˆ¶</h3><p>å¯¹äºä¸å—ä¿¡ä»»çš„è¾“å…¥ï¼Œéƒ½åº”è¯¥é™å®šä¸€ä¸ªåˆç†çš„é•¿åº¦ã€‚è™½ç„¶æ— æ³•å®Œå…¨é˜²æ­¢ XSS å‘ç”Ÿï¼Œä½†å¯ä»¥å¢åŠ  XSS æ”»å‡»çš„éš¾åº¦ã€‚</p><h3 id="å…¶ä»–å®‰å…¨æªæ–½"><a href="#å…¶ä»–å®‰å…¨æªæ–½" class="headerlink" title="å…¶ä»–å®‰å…¨æªæ–½"></a>å…¶ä»–å®‰å…¨æªæ–½</h3><ul><li>HTTP-only Cookie: ç¦æ­¢ JavaScript è¯»å–æŸäº›æ•æ„Ÿ Cookieï¼Œæ”»å‡»è€…å®Œæˆ XSS æ³¨å…¥åä¹Ÿæ— æ³•çªƒå–æ­¤ Cookieã€‚</li><li>éªŒè¯ç ï¼šé˜²æ­¢è„šæœ¬å†’å……ç”¨æˆ·æäº¤å±é™©æ“ä½œã€‚</li></ul><h1 id="XSSæ£€æµ‹"><a href="#XSSæ£€æµ‹" class="headerlink" title="XSSæ£€æµ‹"></a>XSSæ£€æµ‹</h1><ol><li>ä½¿ç”¨é€šç”¨ XSS æ”»å‡»å­—ç¬¦ä¸²æ‰‹åŠ¨æ£€æµ‹ XSS æ¼æ´ã€‚</li><li>ä½¿ç”¨æ‰«æå·¥å…·è‡ªåŠ¨æ£€æµ‹ XSS æ¼æ´ã€‚</li></ol><p>åœ¨<a href="https://github.com/0xsobky/HackVault/wiki/Unleashing-an-Ultimate-XSS-Polyglot">Unleashing an Ultimate XSS</a> Polyglotä¸€æ–‡ä¸­ï¼Œå°æ˜å‘ç°äº†è¿™ä¹ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//github.com/0xsobky/HackVault/wiki/Unleashing-an-Ultimate-XSS-Polyglot</span></span><br></pre></td></tr></table></figure></p><p>å®ƒèƒ½å¤Ÿæ£€æµ‹åˆ°å­˜åœ¨äº HTML å±æ€§ã€HTML æ–‡å­—å†…å®¹ã€HTML æ³¨é‡Šã€è·³è½¬é“¾æ¥ã€å†…è” JavaScript å­—ç¬¦ä¸²ã€å†…è” CSS æ ·å¼è¡¨ç­‰å¤šç§ä¸Šä¸‹æ–‡ä¸­çš„ XSS æ¼æ´ï¼Œä¹Ÿèƒ½æ£€æµ‹ <code>eval()ã€setTimeout()ã€setInterval()ã€Function()ã€innerHTMLã€document.write()</code> ç­‰ DOM å‹ XSS æ¼æ´ï¼Œå¹¶ä¸”èƒ½ç»•è¿‡ä¸€äº› XSS è¿‡æ»¤å™¨ã€‚</p><p>å°æ˜åªè¦åœ¨ç½‘ç«™çš„å„è¾“å…¥æ¡†ä¸­æäº¤è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ–è€…æŠŠå®ƒæ‹¼æ¥åˆ° URL å‚æ•°ä¸Šï¼Œå°±å¯ä»¥è¿›è¡Œæ£€æµ‹äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//xxx/search?keyword=jaVasCript%3A%2F*-%2F*%60%2F*%60%2F*%27%2F*%22%2F**%2F(%2F*%20*%2FoNcliCk%3Dalert()%20)%2F%2F%250D%250A%250d%250a%2F%2F%3C%2FstYle%2F%3C%2FtitLe%2F%3C%2FteXtarEa%2F%3C%2FscRipt%2F--!%3E%3CsVg%2F%3CsVg%2FoNloAd%3Dalert()%2F%2F%3E%3E</span></span><br></pre></td></tr></table></figure><p>é™¤äº†æ‰‹åŠ¨æ£€æµ‹ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æ‰«æå·¥å…·å¯»æ‰¾ XSS æ¼æ´ï¼Œä¾‹å¦‚ <code>Arachniã€Mozilla HTTP Observatoryã€w3af</code> ç­‰ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æˆ‘ä»¬å›åˆ°æœ€å¼€å§‹æå‡ºçš„é—®é¢˜ï¼Œç›¸ä¿¡åŒå­¦ä»¬å·²ç»æœ‰äº†ç­”æ¡ˆï¼š<br><div class="note primary flat"><p>XSS é˜²èŒƒæ˜¯åç«¯ RD çš„è´£ä»»ï¼Œåç«¯ RD åº”è¯¥åœ¨æ‰€æœ‰ç”¨æˆ·æäº¤æ•°æ®çš„æ¥å£ï¼Œå¯¹æ•æ„Ÿå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚</p></div></p><p>ä¸æ­£ç¡®ã€‚å› ä¸ºï¼š</p><p>é˜²èŒƒå­˜å‚¨å‹å’Œåå°„å‹ XSS æ˜¯åç«¯ RD çš„è´£ä»»ã€‚è€Œ DOM å‹ XSS æ”»å‡»ä¸å‘ç”Ÿåœ¨åç«¯ï¼Œæ˜¯å‰ç«¯ RD çš„è´£ä»»ã€‚é˜²èŒƒ XSS æ˜¯éœ€è¦åç«¯ RD å’Œå‰ç«¯ RD å…±åŒå‚ä¸çš„ç³»ç»Ÿå·¥ç¨‹ã€‚<br>è½¬ä¹‰åº”è¯¥åœ¨è¾“å‡º HTML æ—¶è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨æäº¤ç”¨æˆ·è¾“å…¥æ—¶ã€‚</p><div class="note primary flat"><p>æ‰€æœ‰è¦æ’å…¥åˆ°é¡µé¢ä¸Šçš„æ•°æ®ï¼Œéƒ½è¦é€šè¿‡ä¸€ä¸ªæ•æ„Ÿå­—ç¬¦è¿‡æ»¤å‡½æ•°çš„è½¬ä¹‰ï¼Œè¿‡æ»¤æ‰é€šç”¨çš„æ•æ„Ÿå­—ç¬¦åï¼Œå°±å¯ä»¥æ’å…¥åˆ°é¡µé¢ä¸­ã€‚</p></div><p>ä¸æ­£ç¡®ã€‚<br>ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼Œå¦‚ HTML å±æ€§ã€HTML æ–‡å­—å†…å®¹ã€HTML æ³¨é‡Šã€è·³è½¬é“¾æ¥ã€å†…è” JavaScript å­—ç¬¦ä¸²ã€å†…è” CSS æ ·å¼è¡¨ç­‰ï¼Œæ‰€éœ€è¦çš„è½¬ä¹‰è§„åˆ™ä¸ä¸€è‡´ã€‚<br>ä¸šåŠ¡ RD éœ€è¦é€‰å–åˆé€‚çš„è½¬ä¹‰åº“ï¼Œå¹¶é’ˆå¯¹ä¸åŒçš„ä¸Šä¸‹æ–‡è°ƒç”¨ä¸åŒçš„è½¬ä¹‰è§„åˆ™ã€‚</p><p>æ•´ä½“çš„ XSS é˜²èŒƒæ˜¯éå¸¸å¤æ‚å’Œç¹ççš„ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦åœ¨å…¨éƒ¨éœ€è¦è½¬ä¹‰çš„ä½ç½®ï¼Œå¯¹æ•°æ®è¿›è¡Œå¯¹åº”çš„è½¬ä¹‰ã€‚è€Œä¸”è¦é˜²æ­¢å¤šä½™å’Œé”™è¯¯çš„è½¬ä¹‰ï¼Œé¿å…æ­£å¸¸çš„ç”¨æˆ·è¾“å…¥å‡ºç°ä¹±ç ã€‚<br>è™½ç„¶å¾ˆéš¾é€šè¿‡æŠ€æœ¯æ‰‹æ®µå®Œå…¨é¿å… XSSï¼Œä½†æˆ‘ä»¬å¯ä»¥æ€»ç»“ä»¥ä¸‹åŸåˆ™å‡å°‘æ¼æ´çš„äº§ç”Ÿï¼š</p><ul><li>åˆ©ç”¨æ¨¡æ¿å¼•æ“<br>å¼€å¯æ¨¡æ¿å¼•æ“è‡ªå¸¦çš„ HTML è½¬ä¹‰åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š<br>åœ¨ ejs ä¸­ï¼Œå°½é‡ä½¿ç”¨ <code>&lt;%= data %&gt;</code>è€Œä¸æ˜¯ <code>&lt;%- data %&gt;</code>ï¼›<br>åœ¨ doT.js ä¸­ï¼Œå°½é‡ä½¿ç”¨ <code>&#123;&#123;! data &#125;` è€Œä¸æ˜¯` &#123;&#123;= data &#125;`ï¼›åœ¨ FreeMarker ä¸­ï¼Œç¡®ä¿å¼•æ“ç‰ˆæœ¬é«˜äº 2.3.24ï¼Œå¹¶ä¸”é€‰æ‹©æ­£ç¡®çš„ `freemarker.core.OutputFormat`ã€‚* é¿å…å†…è”äº‹ä»¶å°½é‡ä¸è¦ä½¿ç”¨` onLoad="onload('&#123;&#123;data&#125;&#125;&#39;)&quot;</code>ã€<code>onClick=&quot;go(&#39;&#123;&#123;action&#125;&#125;&#39;)&quot;</code> è¿™ç§æ‹¼æ¥å†…è”äº‹ä»¶çš„å†™æ³•ã€‚åœ¨ JavaScript ä¸­é€šè¿‡ <code>.addEventlistener()</code> äº‹ä»¶ç»‘å®šä¼šæ›´å®‰å…¨ã€‚</li><li>é¿å…æ‹¼æ¥ HTML<br>å‰ç«¯é‡‡ç”¨æ‹¼æ¥ HTML çš„æ–¹æ³•æ¯”è¾ƒå±é™©ï¼Œå¦‚æœæ¡†æ¶å…è®¸ï¼Œä½¿ç”¨ <code>createElementã€setAttribute</code> ä¹‹ç±»çš„æ–¹æ³•å®ç°ã€‚æˆ–è€…é‡‡ç”¨æ¯”è¾ƒæˆç†Ÿçš„æ¸²æŸ“æ¡†æ¶ï¼Œå¦‚ Vue/React ç­‰ã€‚</li><li>æ—¶åˆ»ä¿æŒè­¦æƒ•<br>åœ¨æ’å…¥ä½ç½®ä¸º DOM å±æ€§ã€é“¾æ¥ç­‰ä½ç½®æ—¶ï¼Œè¦æ‰“èµ·ç²¾ç¥ï¼Œä¸¥åŠ é˜²èŒƒã€‚</li><li>å¢åŠ æ”»å‡»éš¾åº¦ï¼Œé™ä½æ”»å‡»åæœ<br>é€šè¿‡ CSPã€è¾“å…¥é•¿åº¦é…ç½®ã€æ¥å£å®‰å…¨æªæ–½ç­‰æ–¹æ³•ï¼Œå¢åŠ æ”»å‡»çš„éš¾åº¦ï¼Œé™ä½æ”»å‡»çš„åæœã€‚</li><li>ä¸»åŠ¨æ£€æµ‹å’Œå‘ç°<br>å¯ä½¿ç”¨ XSS æ”»å‡»å­—ç¬¦ä¸²å’Œè‡ªåŠ¨æ‰«æå·¥å…·å¯»æ‰¾æ½œåœ¨çš„ XSS æ¼æ´ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç½‘ç»œç³»åˆ—" scheme="https://zlinni.github.io/categories/%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç½‘ç»œå®‰å…¨" scheme="https://zlinni.github.io/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>æ˜¥æ‹›è½å¹•ï¼Œæš‘æœŸå·²è‡³---æ—¥å¸¸ç¯‡â‘ </title>
    <link href="https://zlinni.github.io/posts/308272463/"/>
    <id>https://zlinni.github.io/posts/308272463/</id>
    <published>2022-04-19T14:31:19.000Z</published>
    <updated>2022-04-25T02:41:30.122Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="tip cogs"><p>emm,æœ€è¿‘éƒ½åœ¨å¿™æ´»å…«è‚¡ç®—æ³•,æ²¡ä»€ä¹ˆæ—¶é—´å»æ¢³ç†ä¸€ä¸‹æœ€è¿‘å‘ç”Ÿçš„äº‹æƒ…,ä»¥æ­¤æ¥åšä¸ªè®°å½•å§.</p></div><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><p>æ—¶è‡³å››æœˆ,æ˜¥æ‹›å¯ä»¥è¯´æ˜¯å®Œå®Œå…¨å…¨çš„èµ°æ‰äº†,è¿™ä¸ªæ˜¥æ‹›é‡Œæˆ‘å°±æ‹¿åˆ°è¿‡ä¸€ä¸ªå°å‚çš„offer,ç”±äºè‡ªå·±è‡ªä¿¡åé¢èƒ½å¤Ÿæ‹¿åˆ°æ›´å¥½çš„å°±æ‹’æ‰äº†(äº‹å®è¯æ˜å¹¶æ²¡æœ‰),æ‰€ä»¥è¿™æ®µæ—¶é—´æ˜¯æ²¡æœ‰å¥½å¥½æŠŠæ¡ä½çš„,æœ‰ç‚¹å¯æƒœ.ä¸è¿‡å®é™…ä¸Šå…«è‚¡æ–‡åŠ ç®—æ³•æ€»å…±çš„å­¦ä¹ æ—¶é—´ä¹Ÿå°±ä»3æœˆä»½å¼€å§‹çš„ä¸€ä¸ªåŠæœˆ,è¿™ä¸€ä¸ªåŠæœˆçš„çŸ¥è¯†æµ“åº¦æ¯”ä¹‹å‰å¤§ç‰¹åˆ«å¤š.æ¯å¤©éƒ½åœ¨æ¶ˆåŒ–å¸æ”¶,æŒ‘æˆ˜è‡ªå·±ä¸ç†Ÿç»ƒçš„,æ²¡æœ‰è§è¿‡çš„ä¸€äº›æ–°äº‹ç‰©,æ¯”å¦‚ç®—æ³•,æ¯”å¦‚è®¡ç½‘.è¿™ä¸¤ä¸ªä¸œè¥¿åº”è¯¥æ˜¯å¾ˆå¤šäººä¸æƒ³é¢å¯¹çš„å§.å¥½åœ¨æˆ‘åšæŒäº†ä¸‹æ¥,è¿™æ®µæ—¶é—´é™†é™†ç»­ç»­çš„åˆ·äº†ä¸€ç™¾å¤šé“ä¸­ç­‰åŠ ç®€å•éš¾åº¦çš„leetcode,æ„Ÿæ‚Ÿéå¸¸çš„æ·±,å…¶å®éƒ¨åˆ†ç®—æ³•é¢˜ä¹Ÿä¸è§å¾—ç‰¹åˆ«å›°éš¾,å¯èƒ½æ˜¯æˆ‘åšçš„éš¾åº¦åŸå› .ç”šè‡³æœ‰äº›é¢˜ç›®èƒ½è®©æˆ‘å›æƒ³èµ·ä»¥å‰OJåˆ·é¢˜æ—¶å€™çš„è®°å¿†,é™¤å¼€æ¯”è¾ƒç”¨æ™ºå•†çš„é¢˜ç›®,å¤§å¤šæ•°çš„é¢˜éƒ½æœ‰ä¸“é—¨çš„æ–¹æ³•å»è§£å†³,ä¹Ÿç®—æ˜¯æ¯”è¾ƒå¥—è·¯åŒ–.æˆªåˆ°ç›®å‰ä¸ºæ­¢,æˆ‘èƒ½ç½—åˆ—å‡ºæ¥çš„ç®—æ³•æœ‰æ»‘åŠ¨çª—å£,åŠ¨æ€è§„åˆ’,dfs,bfs,è´ªå¿ƒ,å›æº¯ä»¥åŠéƒ¨åˆ†æ’åº,è™½ç„¶ä¸èƒ½è¯´å®Œå…¨ç†Ÿæ‚‰ä»–çš„åšé¢˜æ–¹æ³•,ä½†æ˜¯ç¢°åˆ°ç±»ä¼¼çš„é¢˜ç›®ä¹ŸçŸ¥é“è¯¥ç”¨ä»€ä¹ˆæ–¹æ³•å»è§£å†³äº†.ç®—æ˜¯è¿™æ®µæ—¶é—´çš„ä¸€ç‚¹å°è¿›æ­¥.æ•°æ®ç»“æ„æ–¹é¢å¤§æ¦‚å°±æ˜¯ä¸€äº›ç®€å•é¢˜æ˜¾éœ²å‡ºæ¥çš„,å¸¸è€ƒçš„äºŒå‰æ ‘,é“¾è¡¨,æ ˆ.è¿™äº›é¢˜å¥½åƒä¹Ÿä¼šå‡ºç°åœ¨é¢ç»ä¸­,ä½†æ˜¯åŸºæœ¬ä¸ä¼šå‡ºç°åœ¨ç¬”è¯•ä¸­,ç»è¿‡å‰ä¸€æ®µæ—¶é—´çš„ç¬”è¯•(è…¾è®¯+å­—èŠ‚),æ·±åˆ»çš„æ˜ç™½äº†,åŠ¨æ€è§„åˆ’å’Œè´ªå¿ƒæ‰æ˜¯ç¬”è¯•çš„é‡ç‚¹,æ‰€ä»¥åé¢è¦å¤šåˆ·è¿™æ–¹é¢çš„é¢˜ç›®.</p><p>ç„¶åè¯´ä¸€ä»¶æ¯”è¾ƒç—›è‹¦çš„äº‹æƒ…,å°±æ˜¯å­—èŠ‚çš„ç¬”è¯•ç”¨çš„æ˜¯acmæ¨¡å¼,å¯¼è‡´æ•°æ®æ²¡åŠæ³•è¯»å‡ºæ¥,ç„¶åå°±å¯„æ‰äº†â€¦</p><p>è¿™æ®µæ—¶é—´å…«è‚¡æ–‡æ–¹é¢å†™äº†JSçš„çŸ¥è¯†ç‚¹æ€»ç»“,HTTPçµé­‚ä¹‹é—®,Vueçµé­‚ä¹‹é—®,æ‰‹æ’•Javascriptåˆé›†,å…¶ä¸­ç‰¹åˆ«æœ‰æ„æ€çš„æ˜¯,åœ¨HTTPçµé­‚ä¹‹é—®ä¸­,è®²åˆ°æ•°å­—è¯ä¹¦å’Œæ•°å­—ç­¾åçš„è¿™ä¸ªéƒ¨åˆ†,æˆ‘å±…ç„¶å’Œå¥³æœ‹å‹äº‰è¾©äº†åŠä¸ªæ™šä¸Šæ‰æ˜ç™½å…·ä½“çš„åŸç†,è™½ç„¶å¤§éƒ¨åˆ†æ˜¯æˆ‘çš„é—®é¢˜,ä¸è¿‡ä¹Ÿç®—æ˜¯ä¸€ç§æ”¶è·äº†.å†™å®Œäº†è¿™äº›ä¹‹å,ç‰¹åˆ«æ˜¯Vueçš„éƒ¨åˆ†,å› ä¸ºæ²¡æœ‰æ‰‹å†™æºç çš„å…³ç³»å§,å…¶å®å¯¹äºä»–çš„é¢è¯•é¢˜è¿˜æ˜¯æœ‰ç‚¹è™šçš„,å¾—å¤šæ‰¾äº›é¢ç»å†è¡¥ä¸€è¡¥,æœ€åæ„Ÿè§‰è¿˜æ˜¯å¾—æ ¹æ®ä¸€äº›ç‚¹,ç»†è‡´çš„å†™ä¸€ç¯‡æ–‡ç« æ¥ç†è§£.æ¯”å¦‚ä¹‹åæƒ³å†™çš„å…³äºObjectçš„æ–¹æ³•è¯¦è§£,æ•°ç»„apiçš„æ–¹æ³•è¯¦è§£,mapå’Œweakmap..ç­‰.ä½†ä¸çŸ¥é“æ’æœŸåˆ°ä»€ä¹ˆæ—¶å€™,æ¯•ç«Ÿäººçš„æ¶ˆåŒ–å¸æ”¶èƒ½åŠ›æ˜¯æœ‰é™çš„,ç›®å‰æˆ‘æƒ³å…ˆæ‰¾åˆ°ä¸€ä»½å®ä¹ ,ç©ºä½™ä¹‹ä¸‹å†å»è¡¥å……è¿™äº›çŸ¥è¯†ç‚¹.</p><p>å‰ä¸ä¹…è¿˜æƒ³ç€çœ‹webpack,ä½†æ˜¯å†—é•¿çš„ç½‘ç»œè§†é¢‘è®©æˆ‘å¤±å»äº†å­¦ä¹ çš„å…´è¶£,å¤§è‡´çœ‹äº†ä¸ªå¼€å¤´åˆ°cssæŠ½ç¦»å‹ç¼©çš„éƒ¨åˆ†å°±æ²¡çœ‹ä¸‹å»äº†.è™½ç„¶æˆ‘ä¹ŸçŸ¥é“é¢è¯•çš„æ—¶å€™ä¼šé—®ç›¸å…³çš„é—®é¢˜,åªèƒ½è¯´äº¡ç¾Šè¡¥ç‰¢å§,æˆ–è€…è¯´é¢å‘é¢ç»å­¦ä¹ .</p><p>ç°åœ¨çš„å½¢å¼çœŸæ˜¯ä¸€è¨€éš¾å°½å•Š,äº’è”ç½‘å¤§å‚è£å‘˜,hcå°‘,ä»Šå¹´è¿˜æ˜¯å½“åˆç ”ç©¶ç”Ÿæ‰©æ‹›æœ€å¤§çš„ä¸€å¹´,å¤§å®¶éƒ½æŠ¢ç€ä¸€ä¸ªé¥­ç¢—,å¯¼è‡´æ—±çš„æ—±æ­»æ¶çš„æ¶æ­»,æŠ•å‡ºå»çš„ç®€å†ä¸€å°å°ä¹Ÿéƒ½çŸ³æ²‰å¤§æµ·.è¿œæ²¡æœ‰æƒ³åˆ°19å¹´çš„ç–«æƒ…å¯¹æˆ‘ä»¬è€Œè¨€å½±å“è¿™ä¹ˆå¤§.</p><p>åœ¨ç‰›å®¢ä¸Šé¢çœ‹åˆ°ä¸€ä¸ªè¯„è®º:â€ä»Šå¹´æˆ–è®¸æ˜¯å¾€å¹´æ¥æœ€å·®çš„ä¸€å¹´,ä¹Ÿæœ‰å¯èƒ½æ˜¯ä»Šåæœ€å¥½çš„ä¸€å¹´äº†â€,å¤§ç¯å¢ƒå·®è¡¨ç¤ºæˆ‘ä»¬è¦ä»˜å‡ºæ›´å¤šçš„åŠªåŠ›æ‰èƒ½æ¢åˆ°æˆæœäº†,åŠ æ²¹å§æ‰“å·¥äºº!</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="æ—¥å¸¸æ‚è°ˆ" scheme="https://zlinni.github.io/categories/%E6%97%A5%E5%B8%B8%E6%9D%82%E8%B0%88/"/>
    
    
    <category term="æ—¥å¸¸" scheme="https://zlinni.github.io/tags/%E6%97%A5%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æ’•ä¸‡ç‰©Javascriptç¯‡</title>
    <link href="https://zlinni.github.io/posts/972193328/"/>
    <id>https://zlinni.github.io/posts/972193328/</id>
    <published>2022-04-15T06:27:16.000Z</published>
    <updated>2022-04-28T10:22:07.815Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="tip cogs"><p>æœ¬ç¯‡å…³äºå°½å¯èƒ½æ‰‹æ’•ä¸€åˆ‡å¯ä»¥å®ç°çš„ä»£ç ï¼Œå…ˆä»jså¼€å§‹ä¸‹æ‰‹</p></div><h1 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h1><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn,timer</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> t = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> firstClick = !t;</span><br><span class="line">    <span class="keyword">if</span>(firstClick)&#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>,<span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    t = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      t = <span class="literal">null</span>;</span><br><span class="line">    &#125;, timer);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h1><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn,delay</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> begin = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cur = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">if</span>(cur-begin&gt;=delay)&#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>,<span class="built_in">arguments</span>);</span><br><span class="line">      begin = cur;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h1><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">oldObj,newObj=&#123;&#125;</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> oldObj) &#123;</span><br><span class="line">    newObj[item] = oldObj[item];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h1><h2 id="apiç‰ˆæœ¬"><a href="#apiç‰ˆæœ¬" class="headerlink" title="apiç‰ˆæœ¬"></a>apiç‰ˆæœ¬</h2><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newObj = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringfy(oldObj));</span><br></pre></td></tr></table></figure></p><p>ç¼ºé™·ï¼š</p><ul><li>æ— æ³•å®ç°å¯¹å‡½æ•°ï¼Œæ­£åˆ™ç­‰ç‰¹æ®Šå¯¹è±¡çš„å…‹éš†</li><li>ä¼šæŠ›å¼ƒå¯¹è±¡çš„constructor,æ‰€æœ‰çš„æ„é€ å‡½æ•°ä¼šæŒ‡å‘Object</li><li>å¯¹è±¡æœ‰å¾ªç¯å¼•ç”¨ä¼šæŠ¥é”™</li></ul><h2 id="1-0ç‰ˆæœ¬"><a href="#1-0ç‰ˆæœ¬" class="headerlink" title="1.0ç‰ˆæœ¬"></a>1.0ç‰ˆæœ¬</h2><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯å¼•ç”¨ç±»å‹æˆ–è€…null å¦åˆ™è¿”å›æºå¯¹è±¡è¿›è¡Œæµ…æ‹·è´</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span>||obj===<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ï¼Œåˆå§‹åŒ–åœ°å€ã€‚</span></span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</span><br><span class="line">        result = [];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        result = &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€’å½’è°ƒç”¨ </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">            result[key] = deepClone(obj[key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure></p><h2 id="2-0ç‰ˆæœ¬-è§£å†³å¾ªç¯å¼•ç”¨"><a href="#2-0ç‰ˆæœ¬-è§£å†³å¾ªç¯å¼•ç”¨" class="headerlink" title="2.0ç‰ˆæœ¬ è§£å†³å¾ªç¯å¼•ç”¨"></a>2.0ç‰ˆæœ¬ è§£å†³å¾ªç¯å¼•ç”¨</h2><p>å¾ªç¯å¼•ç”¨<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;<span class="attr">b</span>:<span class="number">122</span>&#125;;</span><br><span class="line">a.target = a;</span><br><span class="line">deepClone(obj);<span class="comment">//æŠ¥é”™: RangeError: Maximum call stack size exceeded</span></span><br></pre></td></tr></table></figure><br>å…ˆæ–¹æ³•åˆ¤æ–­å¤æ‚ç±»å‹<br>ç„¶åç”¨mapå­˜å‚¨å¯¹è±¡ å¦‚æœå·²ç»å­˜åœ¨åˆ™ç›´æ¥è¿”å›<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> judObj = (<span class="function">(<span class="params">target</span>)=&gt;</span>(<span class="keyword">typeof</span> target === <span class="string">&#x27;object&#x27;</span>||<span class="keyword">typeof</span> target === <span class="string">&#x27;function&#x27;</span>)&amp;&amp; target!==<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> deepClone2 = (<span class="function">(<span class="params">target,map=<span class="keyword">new</span> <span class="built_in">Map</span>()</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(map.get(target))<span class="keyword">return</span> target;</span><br><span class="line">  <span class="keyword">if</span>(judObj(target))&#123;</span><br><span class="line">    map.set(target,<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">const</span> res = <span class="built_in">Array</span>.isArray(target)?[]:&#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> target)&#123;</span><br><span class="line">      <span class="keyword">if</span>(target.hasOwnProperty(key))&#123;</span><br><span class="line">        res[key] = deepClone2(target[key],map);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> a = &#123;<span class="attr">val</span>:<span class="number">2</span>&#125;;</span><br><span class="line">a.target = a;</span><br><span class="line"><span class="keyword">let</span> newA = deepClone2(a);</span><br><span class="line"><span class="built_in">console</span>.log(newA)<span class="comment">//&#123; val: 2, target: &#123; val: 2, target: [Circular] &#125; &#125;</span></span><br></pre></td></tr></table></figure></p><p>butå­˜åœ¨ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œå°±æ˜¯mapä¸Šçš„keyå’Œmapæ„æˆäº†å¼ºå¼•ç”¨å…³ç³»ï¼Œæ˜¯å¾ˆå±é™©çš„ã€‚<br>ç§‘æ™®å¼ºå¼•ç”¨å’Œå¼±å¼•ç”¨çš„å…³ç³»<br><div class="note primary flat"><p>è¢«å¼±å¼•ç”¨çš„å¯¹è±¡åœ¨ä»€ä¹ˆæ—¶å€™éƒ½å¯ä»¥è¢«å›æ”¶ï¼Œä½†å¼ºå¼•ç”¨çš„ä¸è¡Œï¼Œä¸Šé¢çš„ä»£ç åœ¨ç¨‹åºç»“æŸä¹‹å‰éƒ½ä¸ä¼šé‡Šæ”¾açš„ç©ºé—´</p></div></p><p>æ‰€ä»¥éœ€è¦ç”¨åˆ°weekMapæ„æˆå¼±å¼•ç”¨ï¼ŒæŠŠMapæ”¹æˆweekMapå³å¯</p><h2 id="æ‹·è´ç‰¹æ®Šå¯¹è±¡"><a href="#æ‹·è´ç‰¹æ®Šå¯¹è±¡" class="headerlink" title="æ‹·è´ç‰¹æ®Šå¯¹è±¡"></a>æ‹·è´ç‰¹æ®Šå¯¹è±¡</h2><p>ç‰¹æ®Šå¯¹è±¡<br>å¯éå†çš„ç‰¹æ®Šå¯¹è±¡ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;object Map&quot;</span>]</span><br><span class="line">[<span class="string">&quot;object Set&quot;</span>]</span><br><span class="line">[<span class="string">&quot;object Array&quot;</span>]</span><br><span class="line">[<span class="string">&quot;object Object&quot;</span>]</span><br><span class="line">[<span class="string">&quot;object Arguments&quot;</span>]</span><br></pre></td></tr></table></figure><br>ä¸å¯éå†çš„ç‰¹æ®Šå¯¹è±¡ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> boolTag = <span class="string">&#x27;[object Boolean]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> numberTag = <span class="string">&#x27;[object Number]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> stringTag = <span class="string">&#x27;[object String]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> dateTag = <span class="string">&#x27;[object Date]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> errorTag = <span class="string">&#x27;[object Error]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> regexpTag = <span class="string">&#x27;[object RegExp]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> funcTag = <span class="string">&#x27;[object Function]&#x27;</span>;</span><br></pre></td></tr></table></figure><br>ç”¨æœ€å‡†ç¡®çš„é‚£ä¸ªæ–¹æ³•åˆ¤æ–­<br>ç„¶åå¯¹äºä¸èƒ½éå†çš„å¯¹è±¡ç›´æ¥è¿”å›<br>å¯¹äºèƒ½éå†çš„å¯¹è±¡åˆ†ç±»<br>å¦‚æœæ˜¯mapçš„è¯ foreach ä»–çš„itemå’Œindexèµ‹å€¼<br>å¦‚æœæ˜¯set foreach ä»–çš„item<br>å…¶ä»–çš„æ•°ç»„å’Œå¯¹è±¡ å°±ç›´æ¥ç”¨ä¹‹å‰çš„æ–¹æ³•éå†é€’å½’<br>æ³¨æ„è¦ä¿ç•™å¯¹è±¡çš„åŸå‹<br>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> judObj = (<span class="function">(<span class="params">target</span>)=&gt;</span>(<span class="keyword">typeof</span> target === <span class="string">&#x27;object&#x27;</span>||<span class="keyword">typeof</span> target === <span class="string">&#x27;function&#x27;</span>)&amp;&amp; target!==<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getObj = (<span class="function">(<span class="params">target</span>)=&gt;</span><span class="built_in">Object</span>.prototype.toString.call(target));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> canTranverse = &#123;</span><br><span class="line">    <span class="string">&#x27;[object Map]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;[object Set]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;[object Array]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;[object Object]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;[object Arguments]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> deepClone3 = (<span class="function">(<span class="params">target,map=<span class="keyword">new</span> <span class="built_in">Map</span></span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!judObj)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">let</span> type = getObj(target);</span><br><span class="line">    <span class="keyword">let</span> cloneTarget;</span><br><span class="line">    <span class="keyword">if</span>(!canTranverse[type])&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> ctor = target.prototype;</span><br><span class="line">        cloneTarget = <span class="keyword">new</span> ctor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(map.get(cloneTarget))&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        map.set(cloneTarget,<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(type === <span class="string">&#x27;[object Map]&#x27;</span>)&#123;</span><br><span class="line">        target.forEach(<span class="function">(<span class="params">item,index</span>) =&gt;</span> &#123;</span><br><span class="line">            cloneTarget.set(deepClone3(item),deepClone3(index));</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(type === <span class="string">&#x27;[object Set]&#x27;</span>)&#123;</span><br><span class="line">        target.forEach(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">            cloneTarget.add(deepClone3(item));</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> target) &#123;</span><br><span class="line">            <span class="keyword">if</span> (target.hasOwnProperty(key)) &#123;</span><br><span class="line">                cloneTarget[key] = deepClone3(target[key],map);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cloneTarget;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="3-0-final"><a href="#3-0-final" class="headerlink" title="3.0 final"></a>3.0 final</h2><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getType = <span class="function"><span class="params">obj</span> =&gt;</span> <span class="built_in">Object</span>.prototype.toString.call(obj);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isObject = <span class="function">(<span class="params">target</span>) =&gt;</span> (<span class="keyword">typeof</span> target === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> target === <span class="string">&#x27;function&#x27;</span>) &amp;&amp; target !== <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> canTraverse = &#123;</span><br><span class="line">  <span class="string">&#x27;[object Map]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&#x27;[object Set]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&#x27;[object Array]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&#x27;[object Object]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&#x27;[object Arguments]&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> mapTag = <span class="string">&#x27;[object Map]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> setTag = <span class="string">&#x27;[object Set]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> boolTag = <span class="string">&#x27;[object Boolean]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> numberTag = <span class="string">&#x27;[object Number]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> stringTag = <span class="string">&#x27;[object String]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> symbolTag = <span class="string">&#x27;[object Symbol]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> dateTag = <span class="string">&#x27;[object Date]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> errorTag = <span class="string">&#x27;[object Error]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> regexpTag = <span class="string">&#x27;[object RegExp]&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> funcTag = <span class="string">&#x27;[object Function]&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleRegExp = <span class="function">(<span class="params">target</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; source, flags &#125; = target;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> target.constructor(source, flags);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleFunc = <span class="function">(<span class="params">func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç®­å¤´å‡½æ•°ç›´æ¥è¿”å›è‡ªèº«</span></span><br><span class="line">  <span class="keyword">if</span>(!func.prototype) <span class="keyword">return</span> func;</span><br><span class="line">  <span class="keyword">const</span> bodyReg = <span class="regexp">/(?&lt;=&#123;)(.|\n)+(?=&#125;)/m</span>;</span><br><span class="line">  <span class="keyword">const</span> paramReg = <span class="regexp">/(?&lt;=\().+(?=\)\s+&#123;)/</span>;</span><br><span class="line">  <span class="keyword">const</span> funcString = func.toString();</span><br><span class="line">  <span class="comment">// åˆ†åˆ«åŒ¹é… å‡½æ•°å‚æ•° å’Œ å‡½æ•°ä½“</span></span><br><span class="line">  <span class="keyword">const</span> param = paramReg.exec(funcString);</span><br><span class="line">  <span class="keyword">const</span> body = bodyReg.exec(funcString);</span><br><span class="line">  <span class="keyword">if</span>(!body) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">if</span> (param) &#123;</span><br><span class="line">    <span class="keyword">const</span> paramArr = param[<span class="number">0</span>].split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(...paramArr, body[<span class="number">0</span>]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Function</span>(body[<span class="number">0</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleNotTraverse = <span class="function">(<span class="params">target, tag</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> Ctor = target.constructor;</span><br><span class="line">  <span class="keyword">switch</span>(tag) &#123;</span><br><span class="line">    <span class="keyword">case</span> boolTag:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="built_in">Boolean</span>.prototype.valueOf.call(target));</span><br><span class="line">    <span class="keyword">case</span> numberTag:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="built_in">Number</span>.prototype.valueOf.call(target));</span><br><span class="line">    <span class="keyword">case</span> stringTag:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="built_in">String</span>.prototype.valueOf.call(target));</span><br><span class="line">    <span class="keyword">case</span> symbolTag:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="built_in">Symbol</span>.prototype.valueOf.call(target));</span><br><span class="line">    <span class="keyword">case</span> errorTag: </span><br><span class="line">    <span class="keyword">case</span> dateTag:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Ctor(target);</span><br><span class="line">    <span class="keyword">case</span> regexpTag:</span><br><span class="line">      <span class="keyword">return</span> handleRegExp(target);</span><br><span class="line">    <span class="keyword">case</span> funcTag:</span><br><span class="line">      <span class="keyword">return</span> handleFunc(target);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Ctor(target);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> deepClone = <span class="function">(<span class="params">target, map = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(!isObject(target)) </span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">  <span class="keyword">let</span> type = getType(target);</span><br><span class="line">  <span class="keyword">let</span> cloneTarget;</span><br><span class="line">  <span class="keyword">if</span>(!canTraverse[type]) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†ä¸èƒ½éå†çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> handleNotTraverse(target, type);</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™æ³¢æ“ä½œç›¸å½“å…³é”®ï¼Œå¯ä»¥ä¿è¯å¯¹è±¡çš„åŸå‹ä¸ä¸¢å¤±ï¼</span></span><br><span class="line">    <span class="keyword">let</span> ctor = target.constructor;</span><br><span class="line">    cloneTarget = <span class="keyword">new</span> ctor();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(map.get(target)) </span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">  map.set(target, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(type === mapTag) &#123;</span><br><span class="line">    <span class="comment">//å¤„ç†Map</span></span><br><span class="line">    target.forEach(<span class="function">(<span class="params">item, key</span>) =&gt;</span> &#123;</span><br><span class="line">      cloneTarget.set(deepClone(key, map), deepClone(item, map));</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(type === setTag) &#123;</span><br><span class="line">    <span class="comment">//å¤„ç†Set</span></span><br><span class="line">    target.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      cloneTarget.add(deepClone(item, map));</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤„ç†æ•°ç»„å’Œå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> prop <span class="keyword">in</span> target) &#123;</span><br><span class="line">    <span class="keyword">if</span> (target.hasOwnProperty(prop)) &#123;</span><br><span class="line">        cloneTarget[prop] = deepClone(target[prop], map);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cloneTarget;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="å®ç°å‘å¸ƒè®¢é˜…EventEmitter"><a href="#å®ç°å‘å¸ƒè®¢é˜…EventEmitter" class="headerlink" title="å®ç°å‘å¸ƒè®¢é˜…EventEmitter"></a>å®ç°å‘å¸ƒè®¢é˜…EventEmitter</h1><p>è®¢é˜… å–æ¶ˆ åªèƒ½è®¢é˜…ä¸€æ¬¡ è§¦å‘<br>ä»£ç å¦‚ä¸‹:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventEmitter</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.event = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">on</span>(<span class="params">type,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.event)<span class="built_in">this</span>.event = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.event[type])&#123;</span><br><span class="line">      <span class="built_in">this</span>.event[type]=[callback]</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.event[type].push(callback);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">off</span>(<span class="params">type,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">this</span>.event)<span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">this</span>.event[type] = <span class="built_in">this</span>.event[type].find(<span class="function"><span class="params">item</span>=&gt;</span>item!==callback);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">once</span>(<span class="params">type,callback</span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      callback();</span><br><span class="line">      <span class="built_in">this</span>.off(type,fn); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.on(type,fn);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">emit</span>(<span class="params">type,...args</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.event[type]&amp;&amp;<span class="built_in">this</span>.event[type].forEach(<span class="function"><span class="params">fn</span>=&gt;</span>fn.apply(<span class="built_in">this</span>,args));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h1><p>åŸç† æ‰¾åˆ°å®ä¾‹å¯¹è±¡çš„åŸå‹ç„¶åä¸æ–­å¾€ä¸ŠæŸ¥æ‰¾,å¦‚æœå’Œç±»å®ä¾‹çš„åŸå‹ç›¸åŒåˆ™ä¸ºçœŸ,å¦‚æœæ˜¯nullåˆ™ä¸ºå‡<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myinstanceof</span>(<span class="params">example,classFunc</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> proto = <span class="built_in">Object</span>.getPrototypeOf(example);</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(proto===<span class="literal">null</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span>(proto===classFunc.prototype)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      proto = <span class="built_in">Object</span>.getPrototypeOf(proto);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="new"><a href="#new" class="headerlink" title="new"></a>new</h1><p>æ¨¡æ‹Ÿnewå°±è¦çŸ¥é“newæ“ä½œç¬¦åšäº†ä»€ä¹ˆäº‹æƒ…</p><ul><li>å°†å¯¹è±¡çš„éšå¼åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹prototype</li><li>æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œä½¿ç”¨call/applyæ”¹å˜thisæŒ‡å‘</li><li>è¿”å›å€¼ä¸ºobjectç±»å‹åˆ™ä½œä¸ºnewæ–¹æ³•çš„è¿”å›å€¼è¿”å›ï¼Œå¦åˆ™è¿”å›ä¸Šè¿°å…¨æ–°å¯¹è±¡ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mynew</span>(<span class="params">fn,...args</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> instance = <span class="built_in">Object</span>.create(fn.prototype);</span><br><span class="line">    <span class="keyword">let</span> res = fn.apply(instance,args);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> res === <span class="string">&#x27;object&#x27;</span>?res:instance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="call"><a href="#call" class="headerlink" title="call"></a>call</h1><p>callä¸ä¼ å…¥å‚æ•°åˆ™é»˜è®¤ç»‘å®šçš„window<br>æ–°å»ºå‡½æ•°å°†å‡½æ•°è®¾ç½®å½“å‰this<br>ç„¶ååˆ é™¤è¯¥å‡½æ•°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">    context.fn = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> result = context.fn(...args);</span><br><span class="line">    <span class="keyword">delete</span> context.fn;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç”¨æ³•ï¼šf.call(obj,arg1)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">f.myCall(obj, <span class="number">1</span>, <span class="number">2</span>) <span class="comment">//å¦åˆ™thisæŒ‡å‘window</span></span><br></pre></td></tr></table></figure></p><h1 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h1><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myapply = <span class="function"><span class="keyword">function</span>(<span class="params">context,args</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">    <span class="keyword">let</span> key = <span class="built_in">Symbol</span>(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">    context[key] = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">var</span> res = context[key](...args);</span><br><span class="line">    <span class="keyword">delete</span> context[key];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h1><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.mybind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;err&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span>;</span><br><span class="line">    <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æ˜¯new æ˜¯çš„è¯å˜æˆæŒ‡å‘function å¦åˆ™æŒ‡å‘context</span></span><br><span class="line">        <span class="keyword">var</span> _this = <span class="built_in">this</span> <span class="keyword">instanceof</span> self ? <span class="built_in">this</span> : context;</span><br><span class="line">        <span class="comment">//æ”¹å˜fçš„åŸå‹é“¾</span></span><br><span class="line">        F.prototype = self.prototype;</span><br><span class="line">        <span class="keyword">return</span> self.apply(_this, args.concat(...arguments));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">proto</span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    F.prototype = proto;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç±»çš„ç»§æ‰¿"><a href="#ç±»çš„ç»§æ‰¿" class="headerlink" title="ç±»çš„ç»§æ‰¿"></a>ç±»çš„ç»§æ‰¿</h1><h1 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve"></a><code>Promise.resolve</code></h1><ol><li>å€¼æ˜¯promiseå¯¹è±¡åˆ™ç›´æ¥è¿”å›</li><li>è¿”å›ä¸€ä¸ªnew promiseä¸”å¦‚æœä»–æ˜¯thenè°ƒç”¨ï¼Œåˆ™è¿”å›thenæ–¹æ³•</li><li>å…¶ä»–æƒ…å†µï¼Œè¿”å›æˆåŠŸçŠ¶æ€çš„promise<br>code<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. promise return</span></span><br><span class="line"><span class="comment">// =&gt; new promise</span></span><br><span class="line"><span class="comment">// 2. param.then === &#x27;fun&#x27;</span></span><br><span class="line"><span class="comment">// =&gt; param.then(res,rej)</span></span><br><span class="line"><span class="comment">// 3. return resolve(param) </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve = (<span class="function"><span class="params">param</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (param <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) <span class="keyword">return</span> param;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (param &amp;&amp; param.then &amp;&amp; <span class="keyword">typeof</span> param.then === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> param.then(resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> resolve(param)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h1 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject"></a><code>Promise.reject</code></h1><p>rejectä¼ å…¥çš„å‚æ•°ä¼šä½œä¸ºä¸€ä¸ªreasonåŸå°ä¸åŠ¨çš„å¾€ä¸‹ä¼ <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.reject = <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        reject(reason);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally"></a><code>Promise.prototype.finally</code></h1><p>ä¸ç®¡çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œå¹¶ä¸”å¾€ä¸‹ä¼ å€¼.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.prototype.finally = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.then(<span class="function"><span class="params">value</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve((cb()).then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;))</span><br><span class="line">  &#125;,<span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve((cb()).then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> error;</span><br><span class="line">    &#125;))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a><code>Promise.all</code></h1><p>codeå¦‚ä¸‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.myall = <span class="function"><span class="keyword">function</span>(<span class="params">iterable</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="comment">//ä¼ å…¥çš„æ˜¯å¯è¿­ä»£å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">let</span> index = <span class="number">0</span>; <span class="comment">//è¿™é‡Œä¸ä¸€å®šæ˜¯æ•°ç»„,ä¸ä¸€å®šæœ‰length,æ‰€ä»¥è¦å˜é‡è®¡ç®—.</span></span><br><span class="line">      <span class="keyword">let</span> elementCount = <span class="number">0</span>; <span class="comment">//è§£å†³çš„promiseæ•°é‡</span></span><br><span class="line">      <span class="keyword">let</span> anErrorOccurred = <span class="literal">false</span>;<span class="comment">//åˆ¤æ–­æ˜¯å¦é”™è¯¯</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> promise <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">            <span class="keyword">const</span> curIndex = index; <span class="comment">//å°é—­indexçš„ä½œç”¨åŸŸ</span></span><br><span class="line">            promise.then(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(anErrorOccurred)<span class="keyword">return</span>;</span><br><span class="line">                result[curIndex] = value;</span><br><span class="line">                elementCount++;</span><br><span class="line">                <span class="keyword">if</span>(elementCount === result.length)&#123;</span><br><span class="line">                    resolve(result)<span class="comment">//å¦‚æœå…¨éƒ¨ä»»åŠ¡éƒ½æˆåŠŸ,è¿”å›æ•°ç»„</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(anErrorOccurred)<span class="keyword">return</span>;</span><br><span class="line">                anErrorOccurred=<span class="literal">true</span>;</span><br><span class="line">                reject(err);</span><br><span class="line">            &#125;)</span><br><span class="line">            index++;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>(index === <span class="number">0</span>)&#123;</span><br><span class="line">          resolve([]);<span class="comment">//é•¿åº¦æ˜¯0 è¿”å›ç©ºæ•°ç»„</span></span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(index);<span class="comment">//è¦åœ¨æœ€åå†™result å› ä¸ºindexæ˜¯åœ¨å¾ªç¯åæ‰è®¡ç®—å‡ºæ¥.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a><code>Promise.race</code></h1><p>raceæ–¹æ³•åªè¦æœ‰ä¸€ä¸ªç‡å…ˆæ”¹å˜äº†çŠ¶æ€,åé¢å°±ç›´æ¥resolve<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.myrace = <span class="function"><span class="keyword">function</span> (<span class="params">iterable</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> settlementOccurred = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> promise <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    promise.then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (settlementOccurred) <span class="keyword">return</span>;</span><br><span class="line">      settlementOccurred = <span class="literal">true</span>;</span><br><span class="line">      resolve(value);<span class="comment">//ç›´æ¥resolve</span></span><br><span class="line">    &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (settlementOccurred) <span class="keyword">return</span>;</span><br><span class="line">      settlementOccurred = <span class="literal">true</span>;</span><br><span class="line">      reject(err);<span class="comment">//ç›´æ¥reject</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled"></a><code>Promise.allSettled</code></h1><p>æ‰§è¡Œå®Œåä¸ä¼šå¤±è´¥,æŒ‰é¡ºåºè¿”å›æ¯ä¸ªpromiseçŠ¶æ€<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resolved = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> rejected = <span class="built_in">Promise</span>.reject(-<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> allSettledPromise = <span class="built_in">Promise</span>.allSettled([resolved, rejected]);</span><br><span class="line">allSettledPromise.then(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è¿”å›ç»“æœï¼š</span></span><br><span class="line"><span class="comment">// [</span></span><br><span class="line"><span class="comment">//    &#123; status: &#x27;fulfilled&#x27;, value: 2 &#125;,</span></span><br><span class="line"><span class="comment">//    &#123; status: &#x27;rejected&#x27;, reason: -1 &#125;</span></span><br><span class="line"><span class="comment">// ]</span></span><br></pre></td></tr></table></figure></p><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.allSettled = <span class="function"><span class="keyword">function</span> (<span class="params">promiseArgs</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!promiseArgs.length) <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve([]);</span><br><span class="line">  <span class="comment">// åŒ…è£…ä¸æ˜¯promiseçš„é¡¹</span></span><br><span class="line">  <span class="keyword">const</span> promises = promiseArgs.map(<span class="function"><span class="params">p</span> =&gt;</span> p <span class="keyword">instanceof</span> <span class="built_in">Promise</span> ? p : <span class="built_in">Promise</span>.resolve(p));</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> res = [];</span><br><span class="line">    <span class="keyword">let</span> unSettledCount = promises.length;</span><br><span class="line">    promises.forEach(<span class="function">(<span class="params">p, index</span>) =&gt;</span> &#123;</span><br><span class="line">      p.then(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">        res[index] = &#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="string">&quot;resolve&quot;</span>,</span><br><span class="line">          reason</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">        res[index] = &#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="string">&quot;reject&quot;</span>,</span><br><span class="line">          reason</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).finally(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        --unSettledCount;</span><br><span class="line">        <span class="keyword">if</span> (!unSettledCount) <span class="keyword">return</span> resolve(res);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="Promise-retryè¶…æ—¶è¯·æ±‚"><a href="#Promise-retryè¶…æ—¶è¯·æ±‚" class="headerlink" title="Promise.retryè¶…æ—¶è¯·æ±‚"></a>Promise.retryè¶…æ—¶è¯·æ±‚</h1><p>ç®€æ˜“ç‰ˆ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.retrySimple = <span class="function"><span class="keyword">function</span> (<span class="params">fn, maxRetry, timeout</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Expected a function&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  maxRetry = maxRetry || <span class="number">3</span>;</span><br><span class="line">  timeout = timeout || <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> retryCount = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> run = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn().then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        resolve(value);</span><br><span class="line">      &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (retryCount &gt;= maxRetry) &#123;</span><br><span class="line">          reject(err);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">setTimeout</span>(run,timeout);</span><br><span class="line">        retryCount++;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    run();</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰ç¼“å­˜ç‰ˆ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®Œæ•´ç‰ˆ - æœ‰ç¼“å­˜</span></span><br><span class="line"><span class="built_in">Promise</span>.retry = <span class="function"><span class="keyword">function</span> (<span class="params">fn, options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å‚æ•°æ£€æŸ¥</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> fn !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Expected a function&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    options = options || &#123;&#125;;</span><br><span class="line">    <span class="comment">// é»˜è®¤å‚æ•°</span></span><br><span class="line">    options = <span class="built_in">Object</span>.assign(&#123;</span><br><span class="line">        <span class="attr">maxRetry</span>: <span class="number">3</span>, <span class="comment">// é»˜è®¤é‡è¯•æ¬¡æ•°</span></span><br><span class="line">        <span class="attr">retryDelay</span>: <span class="number">1000</span>, <span class="comment">// é»˜è®¤é‡è¯•æ—¶é—´é—´éš”</span></span><br><span class="line">        <span class="attr">cache</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦ç¼“å­˜ç»“æœ</span></span><br><span class="line">        <span class="attr">cacheKey</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// ç¼“å­˜ key</span></span><br><span class="line">        <span class="attr">cacheExpire</span>: <span class="number">0</span>, <span class="comment">// ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’</span></span><br><span class="line">        <span class="attr">cacheMax</span>: <span class="number">0</span> <span class="comment">// ç¼“å­˜æœ€å¤§å€¼ï¼Œè¶…è¿‡åæ¸…ç©ºç¼“å­˜</span></span><br><span class="line">    &#125;, options);</span><br><span class="line">    <span class="keyword">let</span> retryCount = <span class="number">0</span>; <span class="comment">// å·²é‡è¯•æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å†…éƒ¨å‡½æ•°ï¼Œè¿›è¡Œä¸€æ¬¡å°è¯•</span></span><br><span class="line">        <span class="keyword">const</span> run = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            fn().then(</span><br><span class="line">                <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">// æˆåŠŸæ”¶åˆ°å“åº”ï¼Œå¦‚æœéœ€è¦ç¼“å­˜ï¼Œåˆ™ç¼“å­˜ç»“æœï¼ŒåŒæ—¶è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´</span></span><br><span class="line">                    <span class="keyword">if</span> (options.cache) &#123;</span><br><span class="line">                        <span class="built_in">localStorage</span>.setItem(options.cacheKey, <span class="built_in">JSON</span>.stringify(&#123;</span><br><span class="line">                            value,</span><br><span class="line">                            <span class="attr">expire</span>: <span class="built_in">Date</span>.now() + options.cacheExpire</span><br><span class="line">                        &#125;));</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// å°è£…çš„ promise è§£å†³</span></span><br><span class="line">                    resolve(value);</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">// è¶…è¿‡äº†æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ‹’ç»</span></span><br><span class="line">                    <span class="keyword">if</span> (retryCount &gt;= options.maxRetry) &#123;</span><br><span class="line">                        reject(err);</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// æ²¡æœ‰è¶…è¿‡é‡è¯•æ¬¡æ•°ï¼Œå¦‚æœæœ‰ç¼“å­˜ï¼Œåˆ™è¯»å–ç¼“å­˜</span></span><br><span class="line">                    <span class="keyword">if</span> (options.cache) &#123;</span><br><span class="line">                        <span class="keyword">const</span> cache = <span class="built_in">localStorage</span>.getItem(options.cacheKey);</span><br><span class="line">                        <span class="keyword">if</span> (cache) &#123;</span><br><span class="line">                            <span class="keyword">const</span> cacheObj = <span class="built_in">JSON</span>.parse(cache);</span><br><span class="line">                            <span class="keyword">if</span> (cacheObj.expire &gt; <span class="built_in">Date</span>.now()) &#123;</span><br><span class="line">                                resolve(cacheObj.value);</span><br><span class="line">                                <span class="keyword">return</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// é‡è¯•</span></span><br><span class="line">                    <span class="built_in">setTimeout</span>(run, options.retryDelay);</span><br><span class="line">                    retryCount++;</span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        run();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h1 id="è§£æURL-Paramså¯¹è±¡"><a href="#è§£æURL-Paramså¯¹è±¡" class="headerlink" title="è§£æURL Paramså¯¹è±¡"></a>è§£æURL Paramså¯¹è±¡</h1><h1 id="å®ç°JSå‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å®ç°JSå‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å®ç°JSå‡½æ•°æŸ¯é‡ŒåŒ–"></a>å®ç°JSå‡½æ•°æŸ¯é‡ŒåŒ–</h1><div class="note primary flat"><p>æŸ¯é‡ŒåŒ–çš„å®šä¹‰ï¼šæ¥æ”¶ä¸€éƒ¨åˆ†å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°æ¥æ”¶å‰©ä½™å‚æ•°ï¼Œæ¥æ”¶è¶³å¤Ÿå‚æ•°åï¼Œè¿”å›åŸå‡½æ•°ã€‚</p></div><p>æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li>åˆ©ç”¨lengthå±æ€§è·å–å‡½æ•°çš„å½¢å‚ä¸ªæ•°</li><li>æ‰‹åŠ¨æŒ‡å®šéœ€è¦çš„å½¢å‚ä¸ªæ•°</li></ol><p>ES5ç‰ˆæœ¬ï¼ˆæ¶‰åŠåˆ°argumentsçš„es5è½¬æ¢æ³•ï¼‰<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mycurry</span>(<span class="params">fn,args</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> len = fn.length;</span><br><span class="line">    <span class="keyword">var</span> args = args || [];</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//argumentsçš„é€æ¬¡åˆ†å‰²</span></span><br><span class="line">        <span class="keyword">var</span> newArgs = args.concat(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>));</span><br><span class="line">        <span class="comment">//ä¸æ»¡è¶³æºå¸¦newArgsé€’å½’</span></span><br><span class="line">        <span class="keyword">if</span>(newArgs.length&lt;len)&#123;</span><br><span class="line">            <span class="keyword">return</span> mycurry.call(<span class="built_in">this</span>,fn,newArgs);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//æ»¡è¶³ç›´æ¥è¿”å›</span></span><br><span class="line">            <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>,newArgs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">multiFn</span>(<span class="params">a,b,c</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a*b*c</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn = mycurry(multiFn);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>))</span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="number">2</span>,<span class="number">3</span>)(<span class="number">4</span>))</span><br></pre></td></tr></table></figure></p><p>ES6ç‰ˆæœ¬<br>es6å¯ä»¥ç›´æ¥ç”¨æ‹“å±•è¿ç®—ç¬¦æ‰€ä»¥ä¼šå†™èµ·æ¥ç®€å•ä¸€ç‚¹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="æ•°ç»„æ‰å¹³åŒ–"><a href="#æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="æ•°ç»„æ‰å¹³åŒ–"></a>æ•°ç»„æ‰å¹³åŒ–</h1><p>è¦æ±‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,[<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>],<span class="number">5</span>],<span class="number">6</span>]</span><br><span class="line">=&gt;</span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•1ï¼šapiç‰ˆæœ¬<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,[<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>],<span class="number">5</span>],<span class="number">6</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.flat(<span class="literal">Infinity</span>))</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•2ï¼šreduce<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,[<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>],<span class="number">5</span>],<span class="number">6</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.reduce(<span class="function">(<span class="params">pre,cur</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pre.concat(cur <span class="keyword">instanceof</span> <span class="built_in">Array</span>?flatten(cur):cur);</span><br><span class="line">    &#125;,[])</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(flatten(arr))</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•3ï¼šè½¬å­—ç¬¦ä¸²<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,[<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>],<span class="number">5</span>],<span class="number">6</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr = arr.join(<span class="string">&quot;,&quot;</span>).split(<span class="string">&quot;,&quot;</span>).map(<span class="function"><span class="params">item</span>=&gt;</span>~~item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(flatten(arr))</span><br></pre></td></tr></table></figure></p><h1 id="è§£æURL"><a href="#è§£æURL" class="headerlink" title="è§£æURL"></a>è§£æURL</h1><p>è¦æ±‚ï¼šå¯ä»¥ä¼ å…¥æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œç¼–å†™ä¸€ä¸ªmyURLSearchParamsç±»ï¼ŒåŒ…å«getï¼Œsetï¼Œhasï¼Œappend<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;foo=1&amp;bar=2&quot;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="string">&quot;2&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(searchParams.get(<span class="string">&quot;foo&quot;</span>)) <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(searchParams2.get(<span class="string">&quot;foo&quot;</span>)) <span class="comment">//1</span></span><br><span class="line">searchParams.set(<span class="string">&quot;foo&quot;</span>,<span class="string">&quot;33&quot;</span>); </span><br><span class="line">searchParams2.set(<span class="string">&quot;foo&quot;</span>,<span class="string">&quot;33&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(searchParams) <span class="comment">//&#123; url: &#x27;foo=33&amp;bar=2&#x27; &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(searchParams2) <span class="comment">//&#123; url: &#123; foo: &#x27;33&#x27;, bar: &#x27;2&#x27; &#125; &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(searchParams.has(<span class="string">&quot;foo&quot;</span>)) <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(searchParams2.has(<span class="string">&quot;foo&quot;</span>)) <span class="comment">//true</span></span><br><span class="line">searchParams.append(<span class="string">&quot;foo&quot;</span>,<span class="string">&quot;3casc3&quot;</span>); <span class="comment">//&#123; url: &#x27;foo=33&amp;bar=2&amp;foo=3casc3&#x27; &#125;</span></span><br><span class="line">searchParams2.append(<span class="string">&quot;foo&quot;</span>,<span class="string">&quot;3casc3&quot;</span>); <span class="comment">// url: &#123; foo: &#x27;3casc3&#x27;, bar: &#x27;2&#x27; &#125; &#125;</span></span><br></pre></td></tr></table></figure></p><p>code<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myURLSearchParams</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">url</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.url = url;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.url <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.url[target]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> arr = <span class="built_in">this</span>.url.split(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">                <span class="keyword">let</span> [key, val] = item.split(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">                <span class="keyword">if</span> (key === target) &#123;</span><br><span class="line">                    <span class="keyword">return</span> val;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">append</span>(<span class="params">key,value</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.url <span class="keyword">instanceof</span> <span class="built_in">Object</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.url[key] = value;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.url+=(<span class="string">&quot;&amp;&quot;</span>+key+<span class="string">&quot;=&quot;</span>+value);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">key,value</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.url <span class="keyword">instanceof</span> <span class="built_in">Object</span>)&#123;</span><br><span class="line">            <span class="built_in">this</span>.url[key] = value;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> arr = <span class="built_in">this</span>.url.split(<span class="string">&#x27;&amp;&#x27;</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">                <span class="keyword">let</span> [keys, val] = item.split(<span class="string">&#x27;=&#x27;</span>);</span><br><span class="line">                <span class="keyword">if</span> (keys === key) &#123;</span><br><span class="line">                    <span class="keyword">let</span> rep = <span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;val&#125;</span>`</span></span><br><span class="line">                    <span class="keyword">let</span> rep2 = <span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;value&#125;</span>`</span></span><br><span class="line">                    <span class="built_in">this</span>.url = <span class="built_in">this</span>.url.replace(rep,rep2)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">has</span>(<span class="params">target</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.url <span class="keyword">instanceof</span> <span class="built_in">Object</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.url[target]?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.url.match(target)?<span class="literal">true</span>:<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> searchParams = <span class="keyword">new</span> myURLSearchParams(<span class="string">&quot;foo=1&amp;bar=2&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> searchParams2 = <span class="keyword">new</span> myURLSearchParams(&#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="string">&quot;2&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h1 id="åˆ é™¤æŒ‡å®šçš„URLä¸­çš„æŸä¸ªå‚æ•°"><a href="#åˆ é™¤æŒ‡å®šçš„URLä¸­çš„æŸä¸ªå‚æ•°" class="headerlink" title="åˆ é™¤æŒ‡å®šçš„URLä¸­çš„æŸä¸ªå‚æ•°"></a>åˆ é™¤æŒ‡å®šçš„URLä¸­çš„æŸä¸ªå‚æ•°</h1><p>éœ€æ±‚ï¼šåˆ é™¤URLä¸­çš„æŸä¸ªå‚æ•°å¹¶ä¸”ç¡®ä¿æ²¡æœ‰é‡å¤çš„å‡ºç°<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> query = <span class="string">&#x27;https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;key2=99&amp;key2=99&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myQueryDelete</span>(<span class="params">query,target</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> queryArr = query.split(<span class="string">&quot;?&quot;</span>)[<span class="number">1</span>].split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(queryArr)</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> len = queryArr.length-<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> queryArr) &#123;</span><br><span class="line">        <span class="keyword">let</span> [key,value] = item.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(key === target)&#123;</span><br><span class="line">            <span class="keyword">if</span>(index===len)&#123;</span><br><span class="line">                query = query.replace(<span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;value&#125;</span>`</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                query = query.replace(<span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;value&#125;</span>&amp;`</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(query[query.length-<span class="number">1</span>]===<span class="string">&#x27;&amp;&#x27;</span>)&#123;</span><br><span class="line">        query = query.slice(<span class="number">0</span>,-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(query)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myQueryDelete(query,<span class="string">&quot;key2&quot;</span>)</span><br><span class="line"><span class="comment">//https://www.baidu.com/s?ie=utf-8&amp;f=8</span></span><br></pre></td></tr></table></figure></p><h1 id="jsç”ŸæˆäºŒå‰æ ‘"><a href="#jsç”ŸæˆäºŒå‰æ ‘" class="headerlink" title="jsç”ŸæˆäºŒå‰æ ‘"></a>jsç”ŸæˆäºŒå‰æ ‘</h1><p>éœ€æ±‚ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> testData = [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">parent</span>: <span class="number">4</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">parent</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">parent</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">parent</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">parent</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">parent</span>: -<span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line">è½¬äºŒå‰ç»“æ„</span><br></pre></td></tr></table></figure></p><p>codeå¦‚ä¸‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toTree = (<span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> map = &#123;&#125;;</span><br><span class="line">    <span class="keyword">let</span> res = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">        map[item.id] = &#123;</span><br><span class="line">            ...item,</span><br><span class="line">            <span class="attr">children</span>: []</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">        <span class="keyword">let</span> id = item.id;</span><br><span class="line">        <span class="keyword">let</span> pid = item.parent;</span><br><span class="line">        <span class="keyword">let</span> treeItem = map[id];</span><br><span class="line">        <span class="keyword">if</span> (pid === -<span class="number">1</span>) &#123;</span><br><span class="line">            res.push(treeItem);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map[pid].children.push(treeItem)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(map)</span><br><span class="line">&#125;)</span><br><span class="line">toTree(testData)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="é¢è¯•æŒ‡å—" scheme="https://zlinni.github.io/categories/%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>Vuejsçµé­‚ä¹‹é—®</title>
    <link href="https://zlinni.github.io/posts/4033900294/"/>
    <id>https://zlinni.github.io/posts/4033900294/</id>
    <published>2022-04-14T03:04:12.000Z</published>
    <updated>2022-04-28T03:10:36.154Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="tip cogs"><p>æœ¬æ–‡æ•´ç†äº†é«˜é¢‘vueé¢è¯•è€ƒç‚¹ï¼Œå¹¶å°†éš¾åº¦åˆ†ä¸ºç®€å•ä¸­ç­‰å›°éš¾ä¸‰ä¸ªéš¾åº¦ã€‚</p></div><h1 id="ç®€å•"><a href="#ç®€å•" class="headerlink" title="ç®€å•"></a>ç®€å•</h1><h1 id="MVCå’ŒMVVMçš„åŒºåˆ«"><a href="#MVCå’ŒMVVMçš„åŒºåˆ«" class="headerlink" title="MVCå’ŒMVVMçš„åŒºåˆ«"></a>MVCå’ŒMVVMçš„åŒºåˆ«</h1><h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>MVCçš„å…¨ç§°æ˜¯ Model View Controller æ˜¯æ¨¡å‹ï¼Œè§†å›¾ï¼Œæ§åˆ¶å™¨çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡è§„èŒƒã€‚</p><ul><li>Modelæ¨¡å‹:æ˜¯åº”ç”¨ç¨‹åºä¸­ç”¨äºå¤„ç†ç¨‹åºæ•°æ®é€»è¾‘çš„éƒ¨åˆ†ã€‚é€šå¸¸æ¨¡å‹å¯¹è±¡è´Ÿè´£ä»æ•°æ®åº“é‡Œé¢å­˜å–æ•°æ®</li><li>Viewè§†å›¾:æ˜¯åº”ç”¨ç¨‹åºä¸­å¤„ç†æ•°æ®æ˜¾ç¤ºçš„éƒ¨åˆ†ã€‚é€šå¸¸è§†å›¾æ˜¯ä¾æ®æ¨¡å‹æ•°æ®æ¸²æŸ“çš„ã€‚</li><li>Controller:æ˜¯åº”ç”¨ç¨‹åºä¸­å¤„ç†ç”¨æˆ·äº¤äº’çš„éƒ¨åˆ†ã€‚é€šå¸¸æ§åˆ¶å™¨è´Ÿè´£ä»è§†å›¾è¯»å–æ•°æ®ï¼Œæ§åˆ¶ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å‘æ¨¡å‹å‘é€æ•°æ®ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414153548.png" alt=""></p><p>MVCçš„æ€æƒ³:ä¸€å¥è¯å°±æ˜¯Controllerè´Ÿè´£å°†Modelçš„æ•°æ®å–å‡ºæ¥ç”¨Viewæ˜¾ç¤ºå‡ºæ¥ï¼Œæ¢å¥è¯è¯´å°±æ˜¯åœ¨Controlleré‡Œé¢æŠŠModelçš„å€¼èµ‹ç»™View</p><h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>MVVMæ–°å¢äº†VMç±»<br>ViewModelå±‚:åšäº†ä¸¤ä»¶äº‹æƒ…å®Œæˆäº†åŒå‘ç»‘å®šã€‚</p><ol><li>å°†Modelæ¨¡å‹è½¬åŒ–ä¸ºäº†Viewè§†å›¾ã€‚å³å°†åç«¯çš„æ•°æ®è½¬åŒ–ä¸ºæ‰€çœ‹åˆ°çš„é¡µé¢ã€‚ä½¿ç”¨çš„æ–¹å¼æ˜¯æ•°æ®ç»‘å®šã€‚</li><li>å°†Viewè§†å›¾è½¬åŒ–ä¸ºäº†Modelæ¨¡å‹ã€‚å³å°†é¡µé¢è½¬åŒ–ä¸ºäº†åç«¯çš„æ•°æ®ã€‚ä½¿ç”¨çš„æ–¹å¼æ˜¯DOMäº‹ä»¶ç›‘å¬ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414154052.png" alt=""></p><p>MVVMå’ŒMVCæœ€å¤§çš„åŒºåˆ«å°±æ˜¯:ä»–å®ç°äº†Viewå’ŒModelçš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“Modelçš„å±æ€§æ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨å»æ“ä½œDOMå…ƒç´ ï¼Œæ¥æ”¹å˜Viewçš„æ˜¾ç¤ºï¼Œè€Œæ˜¯æ”¹å˜äº†å±æ€§ä¹‹åViewä¸­çš„å…ƒç´ ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚</p><div class="note warning flat"><p>æ³¨æ„ Vueå¹¶æ²¡æœ‰å®Œå…¨éµå¾ªMVVMçš„æ€æƒ³ï¼Œå› ä¸ºMVVMçš„æ€æƒ³æ˜¯ä¸å…è®¸Modelå’ŒViewç›´æ¥é€šä¿¡ ä½†æ˜¯Vueæä¾›äº†<code>$refs</code>è¿™ä¸ªå±æ€§è®©æˆ‘ä»¬å¯ä»¥é€šä¿¡æ“ä½œdom</p></div><h1 id="ä¸ºä»€ä¹ˆdataæ˜¯ä¸€ä¸ªå‡½æ•°"><a href="#ä¸ºä»€ä¹ˆdataæ˜¯ä¸€ä¸ªå‡½æ•°" class="headerlink" title="ä¸ºä»€ä¹ˆdataæ˜¯ä¸€ä¸ªå‡½æ•°"></a>ä¸ºä»€ä¹ˆdataæ˜¯ä¸€ä¸ªå‡½æ•°</h1><p>æ•°æ®ä»¥å‡½æ•°è¿”å›å€¼çš„å½¢å¼å®šä¹‰ï¼Œæ¯å¤ç”¨ä¸€æ¬¡ç»„ä»¶å°±è¿”å›ä¸€ä»½å…¨æ–°çš„dataï¼Œç±»ä¼¼ç»™ç»„ä»¶çš„å®ä¾‹åˆ›å»ºä¸€ä¸ªç§æœ‰çš„æ•°æ®ç©ºé—´ï¼Œè¿™æ ·å®ä¾‹ä¹‹é—´äº’ä¸å½±å“ã€‚å¦‚æœç›´æ¥å†™æˆå¯¹è±¡çš„å½¢å¼ï¼Œå®ä¾‹ä¹‹é—´å°±å…±äº«äº†åŒä¸€ä»½dataæ•°æ®ã€‚</p><h1 id="Vueç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ"><a href="#Vueç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ" class="headerlink" title="Vueç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ"></a>Vueç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220428102007.png" alt=""></p><ol><li>propsçˆ¶å­é—´å‘å­ç»„ä»¶ä¼ é€’é€šè¿‡propsï¼Œ</li><li>çˆ¶é€šè¿‡<code>$refs</code>è·å–å­ç»„ä»¶ä¿¡æ¯ç”¨<code>$on</code>æŒ‚è½½äº‹ä»¶å›è°ƒå‡½æ•°ï¼Œå­é€šè¿‡emitè§¦å‘äº‹ä»¶ã€‚</li><li><code>$parent</code>,<code>$children</code>è·å–å½“å‰çš„çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶è¯¦ç»†çš„æ–¹æ³•å¹¶è°ƒç”¨ã€‚</li><li>å…¨å±€äº‹ä»¶æ€»çº¿ï¼ˆmainjsçš„beforeCreateé‡Œé¢æŒ‚è½½åˆ°vueå®ä¾‹ä¸Šï¼‰ï¼ˆvue3å–æ¶ˆ ä½¿ç”¨mittæ’ä»¶ï¼‰ã€‚</li><li>localStorage</li><li>Vuex</li><li>provideå’Œinject</li><li>pubsubjs</li></ol><h1 id="Vueçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨é‚£ä¸€æ­¥å‘é€è¯·æ±‚"><a href="#Vueçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨é‚£ä¸€æ­¥å‘é€è¯·æ±‚" class="headerlink" title="Vueçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨é‚£ä¸€æ­¥å‘é€è¯·æ±‚"></a>Vueçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨é‚£ä¸€æ­¥å‘é€è¯·æ±‚</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220428110928.png" alt=""></p><h2 id="beforeCreate"><a href="#beforeCreate" class="headerlink" title="beforeCreate"></a>beforeCreate</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µè¢«ä½¿ç”¨ï¼šå®ä¾‹åˆå§‹åŒ–ä¹‹å‰ï¼Œæ•°æ®æ£€æµ‹å’Œæ•°æ®ä»£ç†ä¹‹å‰ä½¿ç”¨</p><p>ä¸èƒ½åšä»€ä¹ˆ?ä¸èƒ½è®¿é—®data methods computed watchä¸­çš„æ•°æ®å’Œæ–¹æ³•</p><p>å…·ä½“åœºæ™¯ï¼š</p><ol><li>é¡µé¢çš„æ‹¦æˆªï¼Œçœ‹æƒ…å†µåˆ¤æ–­èƒ½å¦é€šè¡Œï¼Œå¦‚æœä¸èƒ½çœæ‰åˆ›å»ºvueå®ä¾‹</li><li>é¡µé¢çš„é‡å®šå‘ï¼Œä¸æ­£ç¡®è¿›å…¥é‡å®šå‘åˆ°åˆ«çš„é¡µé¢</li><li>loading åœ¨mountedä¹‹åé”€æ¯</li></ol><h2 id="created"><a href="#created" class="headerlink" title="created"></a>created</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µè¢«ä½¿ç”¨ï¼šåˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®ä»£ç†å’Œæ•°æ®æ£€æµ‹å¼€å§‹</p><p>å¯ä»¥è®¿é—®åˆ°data methods computed watchä¸­çš„æ•°æ®å’Œæ–¹æ³•</p><p>ä¸èƒ½åšä»€ä¹ˆï¼Ÿå› ä¸ºå®ä¾‹è¿˜æ²¡æœ‰è¢«æŒ‚è½½ æ‰€ä»¥ä¸èƒ½è·å–domèŠ‚ç‚¹ï¼ˆéè¦è·å–nexttickï¼‰</p><p>å…·ä½“åœºæ™¯ï¼š</p><ol><li>æ•°æ®çš„åˆå§‹åŒ–</li><li>æ•°æ®äº¤äº’ axiosï¼ˆä¸éœ€è¦ç”¨åˆ°domï¼‰</li></ol><h2 id="beforeMount"><a href="#beforeMount" class="headerlink" title="beforeMount"></a>beforeMount</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µè¢«ä½¿ç”¨ï¼šåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</p><p>ä¸èƒ½åšä»€ä¹ˆï¼Ÿæ­¤æ—¶é¡µé¢å‘ˆç°çš„æ˜¯æœªç»vueç¼–è¯‘çš„domç»“æ„ï¼Œæ‰€æœ‰å¯¹domçš„æ“ä½œæœ€åéƒ½ä¸å¥æ•ˆ</p><h2 id="mounted"><a href="#mounted" class="headerlink" title="mounted"></a>mounted</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µè¢«ä½¿ç”¨ï¼šçœŸå®DOMæŒ‚è½½å®Œæ¯•ï¼Œæ•°æ®å®ŒæˆåŒå‘ç»‘å®šï¼Œå¯ä»¥è®¿é—®åˆ°DOMèŠ‚ç‚¹</p><p>å…·ä½“åœºæ™¯ï¼š</p><ol><li>æ•°æ®äº¤äº’(æ¶‰åŠåˆ°dom)</li></ol><h2 id="beforeUpdate"><a href="#beforeUpdate" class="headerlink" title="beforeUpdate"></a>beforeUpdate</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µä½¿ç”¨ï¼šæ•°æ®æ›´æ–°çš„æ—¶å€™è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ã€‚</p><p>å¯ä»¥åšä»€ä¹ˆï¼šå¯ä»¥è¿›ä¸€æ­¥æ›´æ”¹çŠ¶æ€ä¸ä¼šè§¦å‘é‡æ¸²æŸ“</p><h2 id="updated"><a href="#updated" class="headerlink" title="updated"></a>updated</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µä½¿ç”¨ï¼šæ›´æ–°å·²ç»å®Œæˆ</p><p>ä¸èƒ½åšä»€ä¹ˆï¼šé¿å…å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™é€ æˆæ— é™å¾ªç¯ã€‚</p><h2 id="beforeDestroy"><a href="#beforeDestroy" class="headerlink" title="beforeDestroy"></a>beforeDestroy</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µä½¿ç”¨ï¼šå®ä¾‹é”€æ¯ä¹‹å‰ä½¿ç”¨</p><p>å…·ä½“åœºæ™¯ï¼šæ¸…é™¤å®šæ—¶å™¨ï¼Œå–æ¶ˆäº‹ä»¶ã€‚</p><h2 id="destroyed"><a href="#destroyed" class="headerlink" title="destroyed"></a>destroyed</h2><p>åœ¨ä»€ä¹ˆé˜¶æ®µä½¿ç”¨ï¼šå®ä¾‹é”€æ¯å</p><h2 id="activated"><a href="#activated" class="headerlink" title="activated"></a>activated</h2><p>keep-aliveä¸“å±ï¼Œç»„ä»¶è¢«æ¿€æ´»çš„æ—¶å€™è°ƒç”¨ã€‚</p><h2 id="deactivated"><a href="#deactivated" class="headerlink" title="deactivated"></a>deactivated</h2><p>keep-aliveä¸“å±ï¼Œç»„ä»¶è¢«é”€æ¯çš„æ—¶å€™è°ƒç”¨ã€‚</p><div class="note primary flat"><p>å¼‚æ­¥è¯·æ±‚åœ¨å“ªä¸€æ­¥å‘èµ·ï¼Ÿ</p></div><p>å¯ä»¥åœ¨createdï¼ŒbeforeMountï¼Œmountedä¸­è¿›è¡Œï¼Œå› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­ä¸­dataå·²ç»åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡å™¨è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ã€‚</p><ul><li>å¯¹DOMæœ‰éœ€æ±‚çš„è¯ä¸€èˆ¬æ˜¯æ”¾åœ¨moutedä¸­ï¼Œæ­¤æ—¶DOMå·²ç»åŠ è½½å®Œæ¯•</li><li>å¯¹DOMæ²¡æœ‰éœ€æ±‚å¯ä»¥æ”¾createdï¼Œä½†æ˜¯åªæ˜¯åœ¨createdå‘å‡ºäº†è¯·æ±‚ï¼ŒçœŸæ­£çš„æ•°æ®è¿˜æ˜¯åœ¨moutedé˜¶æ®µæ‰è·å–ã€‚</li></ul><h1 id="v-ifå’Œv-showçš„åŒºåˆ«"><a href="#v-ifå’Œv-showçš„åŒºåˆ«" class="headerlink" title="v-ifå’Œv-showçš„åŒºåˆ«"></a>v-ifå’Œv-showçš„åŒºåˆ«</h1><p>v-ifæ˜¯çœŸæ­£çš„æ¡ä»¶æ¸²æŸ“ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šè½¬åŒ–æˆä¸‰å…ƒè¡¨è¾¾å¼ï¼Œæ¡ä»¶ä¸æ»¡è¶³ä¸æ¸²æŸ“æ­¤èŠ‚ç‚¹ã€‚<br>v-showä¼šè¢«ç¼–è¯‘æˆæŒ‡ä»¤ï¼Œå¦‚æœæ¡ä»¶ä¸æ»¡è¶³å¯¹åº”çš„èŠ‚ç‚¹éšè—ï¼Œç›¸å½“äº<code>display:none</code></p><p>ä½¿ç”¨åœºæ™¯<br>v-ifé€‚ç”¨äºè¿è¡Œçš„æ—¶å€™å¾ˆå°‘æ”¹å˜æ¡ä»¶ï¼Œä¸éœ€è¦é¢‘ç¹åˆ‡æ¢çš„åœºæ™¯ã€‚å› ä¸ºä¼šå¾ˆå½±å“æ€§èƒ½ã€‚<br>v-showé€‚ç”¨äºé¢‘ç¹åˆ‡æ¢çš„åœºæ™¯ã€‚</p><p>æ‹“å±•<br><div class="note primary flat"><p><code>display:none</code>,<code>opacity:0</code>,<code>visibility:hidden</code>ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</p></div></p><p>ä¸‰è€…éƒ½æ˜¯éšè—ã€‚</p><ol><li>æ˜¯å¦å æ®ç©ºé—´<br>å…³é”®åœ¨äºdisplayéšè—åä¸å æ®ä½ç½®ã€‚visibilityå’Œopacityè¿˜æ˜¯å æ®å…ƒç´ ä½ç½®ã€‚</li><li>å­å…ƒç´ æ˜¯å¦ç»§æ‰¿ã€‚<br>displayçš„çˆ¶å…ƒç´ éƒ½ä¸å­˜åœ¨äº†ï¼Œè‡ªç„¶å­å…ƒç´ ä¸ä¼šè¢«ç»§æ‰¿ã€‚<br>visibilityä¼šè¢«å­å…ƒç´ ç»§æ‰¿ï¼Œå¯ä»¥ä½¿ç”¨visibleæ¥æ˜¾ç¤ºå­å…ƒç´ <br>opacityä¼šè¢«å­å…ƒç´ ç»§æ‰¿ï¼Œä½†ä¸å¯ä»¥è®¾ç½®1æ¥é‡æ–°æ˜¾ç¤ºå­å…ƒç´ ã€‚</li><li>äº‹ä»¶ç»‘å®š<br>displayçš„å…ƒç´ ä¸å­˜åœ¨äº†ï¼Œè‡ªç„¶æ— æ³•ä½¿ç”¨ä»–ç»‘å®šçš„å…ƒç´ <br>visibilityä¸ä¼šè§¦å‘ä»–ä¸Šé¢ç»‘å®šçš„äº‹ä»¶<br>opacityä¼šè§¦å‘ã€‚</li><li>è¿‡åº¦åŠ¨ç”»<br>æƒ³è¦ä½¿ä¸€ä¸ªå…ƒç´ æ…¢æ…¢æ¶ˆå¤±ï¼Œåªèƒ½ç”¨opacityã€‚</li></ol><h1 id="è¯´è¯´Vueçš„å†…ç½®æŒ‡ä»¤ã€‚"><a href="#è¯´è¯´Vueçš„å†…ç½®æŒ‡ä»¤ã€‚" class="headerlink" title="è¯´è¯´Vueçš„å†…ç½®æŒ‡ä»¤ã€‚"></a>è¯´è¯´Vueçš„å†…ç½®æŒ‡ä»¤ã€‚</h1><p>v-once å®šä¹‰å®ƒçš„å…ƒç´ åªæ¸²æŸ“ä¸€æ¬¡åŒ…æ‹¬å®ƒçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œé¦–æ¬¡æ¸²æŸ“å®Œä¹‹åå°†è§†ä¸ºé™æ€å†…å®¹ã€‚<br>v-clock è¯¥æŒ‡ä»¤ä¿å­˜åœ¨å…ƒç´ ä¸Šç›´åˆ°å…³è”å®ä¾‹ç»“æŸç¼–è¯‘ï¼Œè§£å†³åˆå§‹åŒ–æ…¢å¯¼è‡´é¡µé¢é—ªåŠ¨çš„æœ€ä½³å®è·µã€‚<br>v-bind ç»‘å®šå±æ€§ï¼ŒåŠ¨æ€æ›´æ”¹HTMLå…ƒç´ ä¸Šçš„å±æ€§å¯ä»¥ç®€å†™æˆ:<br>v-on ç›‘å¬domäº‹ä»¶ å¯ä»¥ç®€å†™æˆ@<br>v-html å’Œ<code>innerHTML</code>ä¸€æ · æ³¨æ„é˜²æ­¢xssæ”»å‡»<br>v-text æ›´æ–°å…ƒç´ çš„textContent<br>v-model å˜ä¸ºvalueå’Œinputçš„è¯­æ³•ç³–<br>v-if/v-else/v-else-if é…åˆtemplateä½¿ç”¨ã€‚<br>v-show ä½¿ç”¨æŒ‡ä»¤æ¥å®ç°éšè—å’Œæ˜¾ç¤º<br>v-for </p><ul><li>å¾ªç¯æ˜¾ç¤ºæ¸²æŸ“åˆ—è¡¨</li><li>ä¼˜å…ˆçº§æ¯”v-ifé«˜ï¼Œæœ€å¥½ä¸è¦ä¸€èµ·ä½¿ç”¨â€”ç”¨computed</li><li>æ³¨æ„å¢åŠ å”¯ä¸€çš„keyâ€”ä¸è¦ä½¿ç”¨indexä½œä¸ºkey<br>v-pre è·³è¿‡è¿™ä¸ªå…ƒç´ ä»¥åŠå®ƒçš„å­å…ƒç´ çš„ç¼–è¯‘ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦ã€‚</li></ul><h1 id="æ€ä¹ˆç†è§£Vueçš„å•å‘æ•°æ®æµ"><a href="#æ€ä¹ˆç†è§£Vueçš„å•å‘æ•°æ®æµ" class="headerlink" title="æ€ä¹ˆç†è§£Vueçš„å•å‘æ•°æ®æµ"></a>æ€ä¹ˆç†è§£Vueçš„å•å‘æ•°æ®æµ</h1><p>æ•°æ®æ€»æ˜¯ä»çˆ¶ç»„ä»¶æµåˆ°å­ç»„ä»¶ï¼Œå­ç»„ä»¶ç†åº”æ²¡æœ‰æƒé™ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´æ•°æ®æµé”™ä¹±ã€‚<br>å½“ç„¶å¦‚æœéœ€è¦ä¿®æ”¹çˆ¶ç»„ä»¶propsç©¿è¿‡æ¥çš„æ•°æ®ã€‚æœ€å¥½å®šä¹‰ä¸€ä¸ªdataæ¥æ”¶è¿™ä¸ªå€¼å†æ”¹å˜ã€‚</p><h1 id="computedå’Œwatchçš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯"><a href="#computedå’Œwatchçš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯" class="headerlink" title="computedå’Œwatchçš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯"></a>computedå’Œwatchçš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯</h1><p>computedå’Œwatchéƒ½æ˜¯å¯¹å±æ€§çš„å˜åŒ–åšå‡ºæ”¹å˜çš„ä¸€ä¸ªå‡½æ•°äº†ã€‚åŒºåˆ«åœ¨äºcomputedæ˜¯è®¡ç®—å±æ€§ï¼Œæ›´åå‘äºè®¡ç®—çš„ç»“æœè¿™ä¸ªçŠ¶æ€ï¼Œè€Œwatchæ˜¯ç›‘è§†å±æ€§ï¼Œå¯ä»¥çœ‹å±æ€§çš„oldå’Œnewå€¼ï¼Œåå‘äºçŸ¥é“è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚<br>åœºæ™¯ï¼š<br>computedç”¨åœ¨æ¨¡æ¿æ¸²æŸ“æ¯”è¾ƒå¤šï¼ŒæŸä¸ªå€¼æœ‰ä¾èµ–å…¶ä»–çš„å“åº”å¼å¯¹è±¡ç”šè‡³æ˜¯è®¡ç®—å±æ€§è®¡ç®—è€Œæ¥ã€‚<br>watchç”¨åœ¨è§‚æµ‹æŸä¸ªå€¼çš„å˜åŒ–å®Œæˆå¤æ‚çš„é€»è¾‘åŠŸèƒ½ã€‚</p><p>computedä¸èƒ½è®¡ç®—å¼‚æ­¥ watchå¯ä»¥ç›‘è§†å¼‚æ­¥</p><h1 id="v-ifå’Œv-forä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚"><a href="#v-ifå’Œv-forä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚" class="headerlink" title="v-ifå’Œv-forä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚"></a>v-ifå’Œv-forä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚</h1><p>é¦–å…ˆæ˜¯v-forçš„ä¼˜å…ˆçº§é«˜äºv-if ä¼šå…ˆè§£æv-foråœ¨å»è§£æv-if æ‰€ä»¥æ¯æ¬¡åˆ¤æ–­éƒ½ä¼šéå†æ•´ä¸ªæ¸²æŸ“çš„æ•°æ®å†å»æ‰¾é‡Œé¢ä¸éœ€è¦çš„å†…å®¹ã€‚æ”¹è¿›çš„æ–¹æ³•æ˜¯ä½¿ç”¨computed ä¸ç”¨ifã€‚</p><h1 id="ä¸­ç­‰"><a href="#ä¸­ç­‰" class="headerlink" title="ä¸­ç­‰"></a>ä¸­ç­‰</h1><h1 id="Vueå“åº”å¼æ•°æ®çš„åŸç†"><a href="#Vueå“åº”å¼æ•°æ®çš„åŸç†" class="headerlink" title="Vueå“åº”å¼æ•°æ®çš„åŸç†"></a>Vueå“åº”å¼æ•°æ®çš„åŸç†</h1><p>æ•´ä½“æ€è·¯æ˜¯æ•°æ®åŠ«æŒ+è§‚æµ‹è€…æ¨¡å¼</p><p>åœ¨å¯¹è±¡å†…éƒ¨ä½¿ç”¨<code>Object.defineProperty</code>å°†å±æ€§è¿›è¡ŒåŠ«æŒï¼ˆåªä¼šåŠ«æŒå·²ç»å­˜åœ¨çš„å±æ€§ï¼‰ï¼Œæ•°ç»„åˆ™æ˜¯é€šè¿‡é‡å†™æ•°ç»„æ–¹æ³•æ¥å®ç°ã€‚å½“é¡µé¢ä½¿ç”¨å¯¹åº”çš„å±æ€§çš„æ—¶å€™ï¼Œæ¯ä¸ªå±æ€§éƒ½æœ‰è‡ªå·±çš„depå±æ€§ï¼Œå­˜æ”¾å¥¹æ‰€ä¾èµ–çš„watcherï¼Œå½“å±æ€§å˜åŒ–åä¼šé€šçŸ¥watcheræ´¾å‘æ›´æ–°ã€‚</p><p>æ‰‹å†™</p><h1 id="Vueå¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–"><a href="#Vueå¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–" class="headerlink" title="Vueå¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–"></a>Vueå¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–</h1><p>æ•°ç»„è€ƒè™‘æ€§èƒ½åŸå› æ²¡æœ‰ä½¿ç”¨definePropertyå¯¹æ•°ç»„æ¯ä¸€é¡¹è¿›è¡Œæ‹¦æˆªï¼Œè€Œæ˜¯é€‰æ‹©å¯¹7ç§æ•°ç»„æ–¹æ³•è¿›è¡Œé‡å†™(push,shift,pop,splice,unshift,sort,reverse)</p><p>æ‰€ä»¥åœ¨vueç§ä¿®æ”¹æ•°ç»„çš„ç´¢å¼•å’Œé•¿åº¦æ˜¯æ— æ³•æ£€æµ‹åˆ°çš„ã€‚éœ€è¦é€šè¿‡ä»¥ä¸Šä¸ƒç§å˜å¼‚æ–¹æ³•è§¦å‘æ•°ç»„å¯¹åº”çš„watcheræ‰èƒ½æ›´æ–°ã€‚</p><p>æ¢è¨€ä¹‹ï¼Œå¦‚æœä½¿ç”¨äº†å…¶ä»–æ–¹æ³•æ“ä½œvueä¸­çš„æ•°ç»„ï¼Œéƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚</p><h1 id="vue3-0ç”¨è¿‡å—-äº†è§£å¤šå°‘"><a href="#vue3-0ç”¨è¿‡å—-äº†è§£å¤šå°‘" class="headerlink" title="vue3.0ç”¨è¿‡å— äº†è§£å¤šå°‘"></a>vue3.0ç”¨è¿‡å— äº†è§£å¤šå°‘</h1><ul><li>å“åº”å¼åŸç†çš„æ”¹å˜ã€‚ä½¿ç”¨äº†Proxyæ›¿ä»£äº†<code>Object.defineProperty</code></li><li>ä½¿ç”¨äº†Composition APIï¼Œç»„ä»¶çš„å…¥å£å˜æˆäº†setup</li><li>ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„å˜åŒ– setupçš„é›†æˆã€‚</li><li>æ€§èƒ½ä¸Šé¢çš„æå‡</li></ul><h1 id="Vue3å’Œ2çš„å“åº”å¼åŸç†åŒºåˆ«"><a href="#Vue3å’Œ2çš„å“åº”å¼åŸç†åŒºåˆ«" class="headerlink" title="Vue3å’Œ2çš„å“åº”å¼åŸç†åŒºåˆ«"></a>Vue3å’Œ2çš„å“åº”å¼åŸç†åŒºåˆ«</h1><p>æˆ‘ä»¬çŸ¥é“vue2ç§çš„å“åº”å¼ä¸èƒ½å¾ˆå¥½çš„è§£å†³æ•°ç»„çš„é—®é¢˜ï¼Œä¿®æ”¹æ•°ç»„ç´¢å¼•å’Œé•¿åº¦æ— æ³•æ£€æµ‹ï¼Œä¸”å¯¹è±¡åˆ é™¤å’Œå¢åŠ çš„æ“ä½œä¹Ÿæ— æ³•æ£€æµ‹åˆ°ã€‚</p><p>vue3å°±åˆ©ç”¨äº†Proxyé’ˆå¯¹è¿™å‡ é¡¹è¿›è¡Œäº†æ”¹å˜ã€‚å¯ä»¥ç›´æ¥ç›‘å¬å¯¹è±¡å’Œæ•°ç»„çš„å˜åŒ–ã€‚å¹¶ä¸”æœ‰å¤šè¾¾13ç§æ‹¦æˆªæ–¹æ³•ã€‚</p><h1 id="Vueçš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº"><a href="#Vueçš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº" class="headerlink" title="Vueçš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº"></a>Vueçš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº</h1><ul><li><p>åŠ è½½è¿‡ç¨‹ å¾ˆå®¹æ˜“ç†è§£ å› ä¸ºçˆ¶ç»„ä»¶éœ€è¦å…ˆæœ‰é›å½¢æ‰èƒ½æ”¾å­ç»„ä»¶ï¼Œå¯ä»¥ç†è§£ä¸ºè¿›è¡Œåˆ°beforeMountæ‰èƒ½æ”¾å­ç»„ä»¶<br>çˆ¶beforeCreate<br>çˆ¶created<br>çˆ¶beforeMount<br>å­beforeCreate<br>å­created<br>å­beforeMount<br>å­mounted<br>çˆ¶mounted<br>æ³¨æ„åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ˜¯å­å…ˆmounted</p></li><li><p>å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹<br>çˆ¶beforeUpdate<br>å­beforeUpdate<br>å­updated<br>çˆ¶updated</p></li><li><p>çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹<br>çˆ¶beforeUpdate<br>çˆ¶updated</p></li><li><p>é”€æ¯è¿‡ç¨‹<br>çˆ¶ beforeDestroy-&gt;å­ beforeDestroy-&gt;å­ destroyed-&gt;çˆ¶ destroyed</p></li></ul><h1 id="è™šæ‹ŸDOMæ˜¯ä»€ä¹ˆ-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹"><a href="#è™šæ‹ŸDOMæ˜¯ä»€ä¹ˆ-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹" class="headerlink" title="è™šæ‹ŸDOMæ˜¯ä»€ä¹ˆ æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹"></a>è™šæ‹ŸDOMæ˜¯ä»€ä¹ˆ æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹</h1><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¸€ç›´æ“ä½œçœŸå®DOMæ˜¯å¾ˆæµªè´¹æ€§èƒ½çš„ï¼Œè¿™å°±æ˜¯è™šæ‹ŸDOMäº§ç”Ÿçš„åŸå› ã€‚vue2çš„virtual DOMæœ¬è´¨å°±æ˜¯ç”¨ä¸€ä¸ªåŸç”Ÿçš„jså¯¹è±¡å»æè¿°ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œæ˜¯å¯¹çœŸå®DOMçš„ä¸€å±‚æŠ½è±¡ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>ä¿æŠ¤æ€§èƒ½ä¸‹é™ï¼Œæ¡†æ¶çš„è™šæ‹ŸDOMéœ€è¦é€‚é…ä»»ä½•ä¸Šå±‚APIå¯èƒ½çš„æ“ä½œï¼Œä»–çš„ä¸€äº›DOMæ“ä½œå¿…é¡»æ˜¯èƒ½å¤Ÿæœ‰é…åˆçš„ï¼Œæ‰€ä»¥ä»–çš„æ€§èƒ½å¹¶ä¸æ˜¯æœ€ä¼˜çš„ã€‚ä½†æ˜¯æ¯”èµ·æˆ‘ä»¬ç²—æš´çš„æ“ä½œDOMæ€§èƒ½è¦å¥½å¾ˆå¤šã€‚å› æ­¤æ¡†æ¶çš„è™šæ‹ŸDOMè‡³å°‘èƒ½å¤Ÿä¿è¯åœ¨ä½ ä¸éœ€è¦æ€§èƒ½ä¼˜åŒ–çš„å‰æä¸‹ä¾ç„¶è¿˜å¯ä»¥æä¾›ä¸é”™çš„æ€§èƒ½ã€‚</li><li>æ— éœ€æ‰‹åŠ¨æ“ä½œDOMï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨æ“ä½œDOMï¼Œåªéœ€è¦å†™å¥½viewmodelçš„é€»è¾‘ï¼Œæ¡†æ¶å°±ä¼šæ ¹æ®è™šæ‹ŸDOMå’Œæ•°æ®è¿›è¡ŒåŒå‘ç»‘å®šï¼Œå¸®åŠ©æˆ‘ä»¬æ›´æ–°è§†å›¾æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚</li><li>è·¨å¹³å°ï¼šè™šæ‹Ÿdomæœ¬è´¨ä¸Šæ˜¯jså¯¹è±¡ï¼Œè€ŒDOMå’Œå¹³å°å¼ºç›¸å…³ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œè™šæ‹Ÿdomå¯ä»¥æ›´æ–¹ä¾¿çš„è¿›è¡Œè·¨å¹³å°æ“ä½œï¼Œæ¯”å¦‚æœåŠ¡å™¨æ¸²æŸ“ï¼Œweexå¼€å‘ç­‰ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>åˆšåˆšä¹Ÿè¯´äº†ï¼Œè™šæ‹ŸDOMåªèƒ½ä¿è¯æˆ‘ä»¬çš„æ€§èƒ½ä¸‹é™ï¼Œå› æ­¤å¯¹äºæ€§èƒ½è¦æ±‚é«˜çš„å¼•ç”¨æ¥è¯´ï¼Œè™šæ‹ŸDOMæ— æ³•é’ˆå¯¹æ€§çš„è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼›</li><li>å½“é¦–æ¬¡æ¸²æŸ“å¤§é‡DOMçš„æ—¶å€™ï¼Œç”±äºå¤šäº†ä¸€å±‚è™šæ‹ŸDOMçš„è®¡ç®—ï¼Œæ‰€ä»¥ä¼šæ¯”innerHTMLæ’å…¥æ…¢ã€‚</li></ul><h1 id="v-modelçš„åŸç†"><a href="#v-modelçš„åŸç†" class="headerlink" title="v-modelçš„åŸç†"></a>v-modelçš„åŸç†</h1><p>v-modelæœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå¤„ç†valueå’Œinput</p><p>ä»–åœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„propertyå¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶ã€‚</p><ul><li>textå’Œtextareaå…ƒç´ ä½¿ç”¨value propertyå’Œinputäº‹ä»¶</li><li>checkboxå’Œradioä½¿ç”¨checked propertyå’Œchangeäº‹ä»¶</li><li>selectå­—æ®µå°†valueä½œä¸ºpropå¹¶å°†changeä½œä¸ºäº‹ä»¶ã€‚</li></ul><div class="note primary flat"><p>æ³¨æ„å¯¹äºéœ€è¦ä½¿ç”¨è¾“å…¥æ³•çš„è¯­è¨€ï¼Œä½ ä¼šå‘ç°v-modelå¹¶ä¸ä¼šåœ¨è¾“å…¥æ³•ç»„åˆæ–‡å­—çš„è¿‡ç¨‹ä¸­å¾—åˆ°æ›´æ–°ã€‚</p></div><p>åœ¨æ™®é€šæ ‡ç­¾ä¸Š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model=<span class="string">&quot;sth&quot;</span> /&gt;  <span class="comment">//è¿™ä¸€è¡Œç­‰äºä¸‹ä¸€è¡Œ</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;sth&quot;</span> <span class="attr">v-on:input</span>=<span class="string">&quot;sth = $event.target.value&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>åœ¨ç»„ä»¶ä¸Š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;currency-input v-model=<span class="string">&quot;price&quot;</span>&gt;&lt;/currentcy-input&gt;</span><br><span class="line">&lt;!--ä¸Šè¡Œä»£ç æ˜¯ä¸‹è¡Œçš„è¯­æ³•ç³–</span><br><span class="line"> &lt;currency-input :value=<span class="string">&quot;price&quot;</span> @input=<span class="string">&quot;price = arguments[0]&quot;</span>&gt;&lt;/currency-input&gt;</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å­ç»„ä»¶å®šä¹‰ --&gt;</span><br><span class="line">Vue.component(<span class="string">&#x27;currency-input&#x27;</span>, &#123;</span><br><span class="line"> <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;span&gt;</span></span><br><span class="line"><span class="string">   &lt;input</span></span><br><span class="line"><span class="string">    ref=&quot;input&quot;</span></span><br><span class="line"><span class="string">    :value=&quot;value&quot;</span></span><br><span class="line"><span class="string">    @input=&quot;$emit(&#x27;input&#x27;, $event.target.value)&quot;</span></span><br><span class="line"><span class="string">   &gt;</span></span><br><span class="line"><span class="string">  &lt;/span&gt;</span></span><br><span class="line"><span class="string"> `</span>,</span><br><span class="line"> <span class="attr">props</span>: [<span class="string">&#x27;value&#x27;</span>],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h1 id="v-forä¸ºä»€ä¹ˆè¦åŠ key"><a href="#v-forä¸ºä»€ä¹ˆè¦åŠ key" class="headerlink" title="v-forä¸ºä»€ä¹ˆè¦åŠ key"></a>v-forä¸ºä»€ä¹ˆè¦åŠ key</h1><p>å¦‚æœä¸ä½¿ç”¨keyï¼Œvueä¼šä½¿ç”¨ä¸€ç§æœ€å¤§é™åº¦å‡å°‘åŠ¨æ€å…ƒç´ å¹¶ä¸”å°è¯•å°±åœ°ä¿®æ”¹å¤ç”¨ç›¸åŒç±»å‹å…ƒç´ çš„ç®—æ³•ã€‚keyæ˜¯ä¸ºVueä¸­çš„vnodeçš„å”¯ä¸€æ ‡è®°ï¼Œé€šè¿‡è¿™ä¸ªæ ‡è®°ï¼Œæˆ‘ä»¬çš„diffæ“ä½œå¯ä»¥æ›´å‡†ç¡®ï¼Œæ›´è¿…é€Ÿã€‚</p><p>æ›´å‡†ç¡®ï¼šå› ä¸ºå¸¦keyå°±ä¸æ˜¯å°±åœ°å¤ç”¨äº†ï¼Œåœ¨sameNodeå‡½æ•°açš„keyå’Œbçš„keyå¯¹æ¯”ä¸­å¯ä»¥é¿å…å°±åœ°å¤ç”¨çš„æƒ…å†µã€‚æ‰€ä»¥ä¼šæ›´åŠ å‡†ç¡®ã€‚</p><p>æ›´å¿«é€Ÿï¼šåˆ©ç”¨keyçš„å”¯ä¸€æ€§ç”Ÿæˆmapå¯¹è±¡æ¥è·å–å¯¹åº”èŠ‚ç‚¹ï¼Œæ¯”éå†æ–¹æ³•æ›´å¿«ã€‚</p><h1 id="vueäº‹ä»¶ç»‘å®šåŸç†"><a href="#vueäº‹ä»¶ç»‘å®šåŸç†" class="headerlink" title="vueäº‹ä»¶ç»‘å®šåŸç†"></a>vueäº‹ä»¶ç»‘å®šåŸç†</h1><p>åŸç”Ÿäº‹ä»¶ç»‘å®šæ˜¯é€šè¿‡<code>addEventListener</code>ç»‘å®šç»™çœŸå®å…ƒç´ çš„ï¼Œç»„ä»¶äº‹ä»¶ç»‘å®šæ˜¯é€šè¿‡Vueè‡ªå®šä¹‰çš„$onæ¥å®ç°çš„ã€‚å¦‚æœè¦åœ¨ç»„ä»¶ä¸Šä½¿ç”¨åŸç”Ÿäº‹ä»¶ï¼Œéœ€è¦åŠ <code>.native</code>ä¿®é¥°ç¬¦ï¼Œè¿™æ ·å°±ç›¸å½“äºåœ¨çˆ¶ç»„ä»¶ä¸­æŠŠå­ç»„ä»¶å½“ä½œæ™®é€šçš„HTMLæ ‡ç­¾ï¼Œç„¶ååŠ ä¸ŠåŸç”Ÿäº‹ä»¶ã€‚</p><p><code>$on</code>,<code>$emit</code>æ˜¯åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å¼çš„ï¼Œç»´æŠ¤ä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒï¼Œonçš„æ—¶å€™å°†äº‹ä»¶æŒ‰åç§°å­˜åœ¨äº‹ä»¶ä¸­å¿ƒä¸­ï¼Œç§°ä¹‹ä¸ºè®¢é˜…è€…ï¼Œç„¶åemitå°†å¯¹åº”çš„äº‹ä»¶è¿›è¡Œå‘å¸ƒï¼Œå»æ‰§è¡Œäº‹ä»¶ä¸­å¿ƒé‡Œå¯¹åº”çš„çš„ç›‘å¬å™¨ã€‚</p><p>æ‰‹å†™å‘å¸ƒè®¢é˜…</p><h1 id="vue-routerè·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ-æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ"><a href="#vue-routerè·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ-æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ" class="headerlink" title="vue-routerè·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ"></a>vue-routerè·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ</h1><p>é’©å­å‡½æ•°ç§ç±»æœ‰å…¨å±€å®ˆå«ï¼Œè·¯ç”±å®ˆå«ï¼Œç»„ä»¶å®ˆå«</p><p>å…¨å±€å®ˆå«3ä¸ªï¼š<br>1.router.beforeEach å…¨å±€å‰ç½®å®ˆå«<br>2.router.beforeResolve å…¨å±€è§£æå®ˆå« åœ¨beforeRouteEnterè°ƒç”¨åè°ƒç”¨ã€‚<br>3.router.afterEach å…¨å±€åç½®é’©å­ è¿›å…¥è·¯ç”±å</p><p>è·¯ç”±ç‹¬äº«å®ˆå«1ä¸ªï¼š<br>beforeEnter</p><p>ç»„ä»¶å®ˆå«3ä¸ªï¼š<br>1.beforeRouteEnter è¿›å…¥è·¯ç”±å‰ ä¸èƒ½è®¿é—®this<br>2.beforeRouteUpdate è·¯ç”±å¤ç”¨åŒä¸€ä¸ªç»„ä»¶æ—¶<br>3.beforeRouteLeave ç¦»å¼€å½“å‰è·¯ç”±æ—¶ã€‚æˆ‘ä»¬ç”¨å®ƒæ¥ç¦æ­¢ç”¨æˆ·ç¦»å¼€ï¼Œæ¯”å¦‚è¿˜æœªä¿å­˜è‰ç¨¿ï¼Œæˆ–è€…åœ¨ç”¨æˆ·ç¦»å¼€å‰ï¼Œå°†setIntervalé”€æ¯ï¼Œé˜²æ­¢ç¦»å¼€ä¹‹åï¼Œå®šæ—¶å™¨è¿˜åœ¨è°ƒç”¨ã€‚</p><p>å®Œæ•´çš„å¯¼èˆªè§£æè¿‡ç¨‹ï¼š</p><ol><li>å¯¼èˆªè¢«è§¦å‘</li><li>åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨beforeRouteLeaveå®ˆå«<br>3ï¼Œè°ƒç”¨å…¨å±€çš„beforeEachå®ˆå«</li><li>åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨beforeRouteUpdateå®ˆå«<br>5ï¼Œåœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨beforeEnter</li><li>è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶</li><li>åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨beforeRouteEnter</li><li>è°ƒç”¨å…¨å±€çš„beforeResolveå®ˆå«</li><li>å¯¼èˆªè¢«ç¡®è®¤</li><li>è°ƒç”¨å…¨å±€çš„afterEachå®ˆå«</li><li>è§¦å‘DOMæ›´æ–°</li><li>è°ƒç”¨beforeRouteEnterå®ˆå«ä¸­ä¼ ç»™nextçš„å›è°ƒå‡½æ•°ï¼Œåˆ›å»ºå¥½çš„ç»„ä»¶å®ä¾‹ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220415100347.png" alt=""></p><h1 id="vue-router-åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜"><a href="#vue-router-åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜" class="headerlink" title="vue-router åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜"></a>vue-router åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜</h1><p>æˆ‘ä»¬ç»å¸¸éœ€è¦æŠŠæŸç§æ¨¡å¼åŒ¹é…åˆ°çš„è·¯ç”±å…¨éƒ¨æ˜ å°„åˆ°åŒä¸ªç»„ä»¶ã€‚ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªUserç»„ä»¶ï¼Œå¯¹äºæ‰€æœ‰IDå„ä¸ç›¸åŒçš„ç”¨æˆ·ï¼Œéƒ½éœ€è¦ç”¨è¿™ä¸ªç»„ä»¶æ¥æ¸²æŸ“ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨vue-routerçš„è·¯ç”±è·¯å¾„ä¸­ä½¿ç”¨åŠ¨æ€è·¯ç”±å‚æ•°æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> User <span class="keyword">from</span> <span class="string">&#x27;user.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  <span class="attr">routes</span>:[</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/:id&quot;</span>,<span class="attr">component</span>:User&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><div class="note primary flat"><p>vue-routerç»„ä»¶å¤ç”¨å¯¼è‡´è·¯ç”±å‚æ•°å¤±æ•ˆæ€ä¹ˆåŠï¼Ÿ</p></div><ol><li>é€šè¿‡watchç›‘å¬è·¯ç”±å‚æ•°å†å‘è¯·æ±‚ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">watch:&#123;</span><br><span class="line">  <span class="string">&quot;$route&quot;</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.getData(<span class="built_in">this</span>.$route.params.xxx);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç”¨keyæ¥é˜²æ­¢å¤ç”¨<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view :key=<span class="string">&quot;$router.fullPath&quot;</span>&gt;</span><br></pre></td></tr></table></figure></li></ol><h1 id="Vuexçš„ç†è§£"><a href="#Vuexçš„ç†è§£" class="headerlink" title="Vuexçš„ç†è§£"></a>Vuexçš„ç†è§£</h1><p>vuexæ˜¯ä¸“é—¨ä¸ºvueè®¾è®¡çš„å…¨å±€çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œç”¨äºå¤šä¸ªç»„ä»¶ä¸­æ•°æ®å…±äº«ã€‚æ•°æ®ç¼“å­˜ç­‰ã€‚ä½†æ— æ³•æŒä¹…åŒ–ï¼Œå†…éƒ¨çš„æ ¸å¿ƒåŸç†æ˜¯åˆ›é€ ä¸€ä¸ªå…¨å±€å®ä¾‹new vue<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220415101158.png" alt=""></p><p>ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p><ul><li>State å®šä¹‰äº†åº”ç”¨çŠ¶æ€çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®é»˜è®¤çš„åˆå§‹çŠ¶æ€</li><li>Getter å…è®¸ç»„ä»¶ä»Storeä¸­è·å–æ•°æ®ï¼ŒmapGettersè¾…åŠ©å‡½æ•°ä»…ä»…æ˜¯å°†storeä¸­çš„getteræ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§</li><li>Mutation æ˜¯å”¯ä¸€æ›´æ”¹storeä¸­çŠ¶æ€çš„æ–¹æ³•ï¼Œä¸”å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</li><li>Action ç”¨äºæäº¤mutation è€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ï¼Œå¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</li><li>Module å…è®¸å°†å•ä¸€çš„Storeæ‹†åˆ†ä¸ºå¤šä¸ªstoreä¸”åŒæ—¶ä¿å­˜åœ¨å•ä¸€çš„çŠ¶æ€æ ‘ä¸­ã€‚</li></ul><h1 id="Vuexé¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³"><a href="#Vuexé¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³" class="headerlink" title="Vuexé¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³"></a>Vuexé¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³</h1><p>æ•°æ®æŒä¹…åŒ–ä½¿ç”¨æœ¬åœ°å­˜å‚¨æˆ–è€…ç¬¬ä¸‰æ–¹æ’ä»¶vuex-persist</p><h1 id="Vuexä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´"><a href="#Vuexä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´" class="headerlink" title="Vuexä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´"></a>Vuexä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´</h1><p>æ¨¡å—ï¼šç”±äºä½¿ç”¨å•ä¸€çš„çŠ¶æ€æ ‘ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ä¼šé›†ä¸­åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ã€‚å½“åº”ç”¨å˜å¾—å¤æ‚çš„æ—¶å€™ï¼Œstoreå¯¹è±¡å°±æœ‰å¯èƒ½å˜å¾—ç›¸å½“è‡ƒè‚¿ã€‚ä¸ºäº†è§£å†³ä»¥ä¸Šçš„é—®é¢˜ï¼ŒVuexå…è®¸æˆ‘ä»¬å°†storeåˆ†å‰²æˆæ¨¡å—moduleã€‚æ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„stateï¼Œmutationï¼Œactionå’Œgetter</p><p>å‘½åç©ºé—´ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—å†…éƒ¨çš„actionï¼Œmutationï¼Œgetteræ˜¯æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´çš„â€”-è¿™æ ·èƒ½å¤Ÿä½¿å¾—å¤šä¸ªæ¨¡å—èƒ½å¤Ÿå¯¹åŒä¸€ä¸ªmutationæˆ–è€…actionåšå‡ºç›¸åº”ã€‚å¦‚æœæƒ³è¦æ¨¡å—æœ‰æ›´é«˜çš„å°è£…åº¦å’Œå¤ç”¨æ€§ï¼Œå»ºè®®æ·»åŠ namespaced:trueçš„æ–¹å¼ä½¿å¾—ä»–æˆä¸ºå‘½åç©ºé—´ã€‚å½“æ¨¡å—è¢«æ³¨å†Œçš„æ—¶å€™ï¼Œä»–çš„æ‰€æœ‰getterï¼Œactionä»¥åŠmutationéƒ½ä¼šæ›´å…·æ¨¡å—æ³¨å†Œçš„è·¯å¾„è°ƒæ•´åå­—ã€‚</p><h1 id="ä½¿ç”¨è¿‡Vue-SSRå—ï¼Ÿè¯´ä¸€è¯´SSR"><a href="#ä½¿ç”¨è¿‡Vue-SSRå—ï¼Ÿè¯´ä¸€è¯´SSR" class="headerlink" title="ä½¿ç”¨è¿‡Vue SSRå—ï¼Ÿè¯´ä¸€è¯´SSR"></a>ä½¿ç”¨è¿‡Vue SSRå—ï¼Ÿè¯´ä¸€è¯´SSR</h1><p>SSRä¹Ÿå°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œä¹Ÿå°±æ˜¯å°†vueåœ¨å®¢æˆ·ç«¯æŠŠæ ‡ç­¾æ¸²æŸ“æˆHTMLçš„å·¥ä½œæ”¾åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œç„¶åå†æŠŠhtmlç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>ä¼˜ç‚¹ï¼š<br>SSRæœ‰æ›´å¥½çš„SEOï¼Œå¹¶ä¸”æ˜¯å› ä¸ºæŒ‰éœ€åˆ†é…ï¼Œé¦–å±çš„åŠ è½½é€Ÿåº¦æ›´å¿«</p><p>ç¼ºç‚¹ï¼š<br>å¼€å‘æ¡ä»¶å—åˆ°é™åˆ¶ã€‚æœåŠ¡ç«¯æ¸²æŸ“åªæ”¯æŒbeforeCreateå’Œcreatedä¸¤ä¸ªé’©å­ã€‚å½“æˆ‘ä»¬éœ€è¦ä¸€äº›å¤–éƒ¨æ‹“å±•åº“çš„æ—¶å€™éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºä¹Ÿéœ€è¦å¤„äºnodejsçš„è¿è¡Œç¯å¢ƒã€‚</p><p>ä¸”æœåŠ¡ç«¯ä¼šæœ‰æ›´å¤§çš„è´Ÿè½½éœ€æ±‚ã€‚</p><h1 id="Vueä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼"><a href="#Vueä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼" class="headerlink" title="Vueä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼"></a>Vueä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼</h1><ol><li>å·¥å‚æ¨¡å¼-ä¼ å…¥å‚æ•°å³å¯åˆ›å»ºå®ä¾‹ã€‚<br>è™šæ‹Ÿdomæ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›åŸºç¡€æ ‡ç­¾çš„vnodeå’Œç»„ä»¶vnode</li><li>å•ä¾‹æ¨¡å¼-æ•´ä¸ªç¨‹åºæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹<br>vueå’Œvue-routerçš„æ’ä»¶æ³¨å†Œæ–¹æ³•installåˆ¤æ–­å¦‚æœç³»ç»Ÿå­˜åœ¨å®ä¾‹å°±ç›´æ¥è¿”å›æ‰</li><li>å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆvueäº‹ä»¶æœºåˆ¶ï¼‰<br>4ï¼Œè§‚å¯Ÿè€…æ¨¡å¼-å“åº”å¼æ•°æ®åŸç†</li><li>è£…é¥°æ¨¡å¼-@è£…é¥°å™¨ç”¨æ³•</li><li>ç­–ç•¥æ¨¡å¼-ç­–ç•¥æ¨¡å¼æŒ‡å¯¹è±¡æœ‰æŸä¸ªè¡Œä¸ºï¼Œä½†åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œè¯¥è¡Œä¸ºæœ‰ä¸åŒçš„å®ç°æ–¹æ¡ˆï¼Œæ¯”å¦‚é€‰é¡¹çš„åˆå¹¶ç­–ç•¥ã€‚</li></ol><h1 id="ä½ åšè¿‡å“ªäº›vueçš„æ€§èƒ½ä¼˜åŒ–"><a href="#ä½ åšè¿‡å“ªäº›vueçš„æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ä½ åšè¿‡å“ªäº›vueçš„æ€§èƒ½ä¼˜åŒ–"></a>ä½ åšè¿‡å“ªäº›vueçš„æ€§èƒ½ä¼˜åŒ–</h1><div class="note primary flat"><p>ä»¥ä¸‹é’ˆå¯¹vue</p></div><ul><li>å¯¹è±¡å±‚çº§ä¸è¦å¤ªæ·±ï¼Œå¦åˆ™æ€§èƒ½å°±ä¼šå·®ã€‚</li><li>ä¸éœ€è¦å“åº”å¼çš„æ•°æ®ä¸è¦æ”¾åœ¨dataä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>Object.freeze</code>å†»ç»“æ•°æ®</li><li>v-ifå’Œv-showåŒºåˆ«ä½¿ç”¨</li><li>computedå’ŒwatchåŒºåˆ«ä½¿ç”¨åœºæ™¯ã€‚</li><li>v-foréå†å¿…é¡»åŠ key keyæœ€å¥½æ˜¯id ä¸”é¿å…ä½¿ç”¨v-if</li><li>å¤§æ•°æ®åˆ—è¡¨å’Œè¡¨æ ¼æ€§èƒ½ä¼˜åŒ–-è™šæ‹Ÿåˆ—è¡¨/è™šæ‹Ÿè¡¨æ ¼</li><li>é˜²æ­¢å†…éƒ¨æ³„æ¼ï¼Œç»„ä»¶é”€æ¯åæŠŠå…¨å±€å˜é‡å’Œäº‹ä»¶é”€æ¯ã€‚</li><li>å›¾ç‰‡æ‡’åŠ è½½</li><li>è·¯ç”±æ‡’åŠ è½½</li><li>ç¬¬ä¸‰æ–¹æ’ä»¶æŒ‰éœ€å¼•å…¥</li><li>é€‚å½“é‡‡ç”¨keep-aliveç¼“å­˜ç»„ä»¶</li><li>é˜²æŠ–èŠ‚æµé¿å…åå¤è¯·æ±‚</li><li>æœåŠ¡ç«¯æ¸²æŸ“SSR or é¢„æ¸²æŸ“</li></ul><h1 id="å›°éš¾"><a href="#å›°éš¾" class="headerlink" title="å›°éš¾"></a>å›°éš¾</h1><h1 id="Vue-mixinçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†"><a href="#Vue-mixinçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†" class="headerlink" title="Vue.mixinçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†"></a>Vue.mixinçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†</h1><p>åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°åœ¨ä¸åŒçš„ç»„ä»¶ä¸­ä¼šéœ€è¦ç”¨åˆ°ä¸€äº›ç›¸åŒæˆ–è€…ç±»ä¼¼çš„ä»£ç ï¼Œè¿™äº›ä»£ç çš„åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œå¯ä»¥é€šè¿‡vueçš„mixinæŠ½ç¦»å…¬å…±çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŸç†ç±»ä¼¼äºåŸå‹é“¾çš„ç»§æ‰¿ï¼Œå½“ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™ä¼šè°ƒç”¨mergeOptionsæ–¹æ³•è¿›è¡Œåˆå¹¶ï¼Œé‡‡ç”¨ç­–ç•¥æ¨¡å¼é’ˆå¯¹ä¸åŒçš„å±æ€§è¿›è¡Œå’Œå¹¶ã€‚å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡æ‹¥æœ‰åŒåçš„é€‰é¡¹çš„æ—¶å€™ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼â€œåˆå¹¶â€</p><p>æ‰‹æ’•mixin</p><h1 id="nextTickçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†"><a href="#nextTickçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†" class="headerlink" title="nextTickçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†"></a>nextTickçš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†</h1><p>nextTickä¸­çš„å›è°ƒæ˜¯åœ¨ä¸‹æ¬¡DOMå¾ªç¯æ›´æ–°ç»“æŸä¹‹åæ‰§è¡Œçš„å›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹åˆ»ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„DOMã€‚ä¸»è¦çš„æ€è·¯æ˜¯é‡‡ç”¨å¾®ä»»åŠ¡ä¼˜å…ˆçš„æ–¹å¼è°ƒç”¨å¼‚æ­¥æ–¹æ³•å»æ‰§è¡ŒnextTickåŒ…è£…çš„æ–¹æ³•ã€‚</p><p>æ‰‹æ’•nextTick</p><h1 id="keep-aliveä½¿ç”¨åœºæ™¯"><a href="#keep-aliveä½¿ç”¨åœºæ™¯" class="headerlink" title="keep-aliveä½¿ç”¨åœºæ™¯"></a>keep-aliveä½¿ç”¨åœºæ™¯</h1><p>keep-aliveæ˜¯vueå†…ç½®çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥å®ç°ç»„ä»¶ç¼“å­˜ï¼Œå½“ç»„ä»¶åˆ‡æ¢çš„æ—¶å€™ä¸ä¼šå¯¹å½“å‰ç»„ä»¶è¿›è¡Œå¸è½½ã€‚</p><ul><li>å¸¸ç”¨çš„ä¸¤ä¸ªå±æ€§includeå’Œexclude å…è®¸ç»„ä»¶æœ‰æ¡ä»¶çš„è¿›è¡Œç¼“å­˜</li><li>ç”Ÿå‘½å‘¨æœŸä¸¤ä¸ª activated å’Œ deactivatedã€‚ç”¨æ¥çŸ¥é“ç»„ä»¶æ˜¯å¦å¤„äºæ¿€æ´»çŠ¶æ€</li><li>keep-aliveä¸­è¯è¿ç”¨äº†LRUç®—æ³•ï¼Œé€‰æ‹©æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„ç»„ä»¶è¿›è¡Œæ·˜æ±°</li></ul><p>æ‰‹æ’•keep-alive</p><div class="note primary flat"><p>æ‹“å±• LRUç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p></div><p>LRU çš„æ ¸å¿ƒæ€æƒ³æ˜¯å¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å‘½ä¸­ç¼“å­˜çš„ç»„ä»¶ key é‡æ–°æ’å…¥åˆ° this.keys çš„å°¾éƒ¨ï¼Œè¿™æ ·ä¸€æ¥ï¼Œthis.keys ä¸­è¶Šå¾€å¤´éƒ¨çš„æ•°æ®å³å°†æ¥è¢«è®¿é—®å‡ ç‡è¶Šä½ï¼Œæ‰€ä»¥å½“ç¼“å­˜æ•°é‡è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œæˆ‘ä»¬å°±åˆ é™¤å°†æ¥è¢«è®¿é—®å‡ ç‡æœ€ä½çš„æ•°æ®ï¼Œå³ this.keys ä¸­ç¬¬ä¸€ä¸ªç¼“å­˜çš„ç»„ä»¶ã€‚</p><h1 id="Vue-setæ–¹æ³•åŸç†"><a href="#Vue-setæ–¹æ³•åŸç†" class="headerlink" title="Vue.setæ–¹æ³•åŸç†"></a>Vue.setæ–¹æ³•åŸç†</h1><p>äº†è§£äº†vueå“åº”å¼åŸç†çš„åŒå­¦éƒ½çŸ¥é“åœ¨ä¸¤ç§æƒ…å†µä¸‹ä¿®æ”¹æ•°æ®vueæ˜¯ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°çš„ã€‚</p><p>1æ˜¯ç»™å®ä¾‹æ·»åŠ æ–°çš„å±æ€§<br>2æ˜¯ç›´æ¥æ›´æ”¹æ•°ç»„çš„ä¸‹æ ‡æ¥ä¿®æ”¹æ•°ç»„çš„å€¼</p><p>è€Œsetçš„åŸç†å°±æ˜¯æˆ‘ä»¬ç»™æ•°ç»„å’Œå¯¹è±¡æœ¬èº«éƒ½å¢åŠ äº†<em>ob</em>å±æ€§ï¼Œä»£è¡¨çš„æ˜¯observerå®ä¾‹ã€‚å½“ç»™å¯¹è±¡æ–°å¢ä¸å­˜åœ¨çš„å±æ€§ï¼Œé¦–å…ˆä¼šæŠŠæ–°çš„å±æ€§è¿›è¡Œå“åº”å¼çš„è·Ÿè¸ªï¼Œç„¶åè§¦å‘å¯¹è±¡obçš„depæ”¶é›†åˆ°çš„watcherå»æ›´æ–°ï¼Œå½“ä¿®æ”¹æ•°ç»„ç´¢å¼•çš„æ—¶å€™æˆ‘ä»¬è°ƒç”¨æ•°ç»„æœ¬èº«çš„spliceæ–¹æ³•å»æ›´æ–°æ•°ç»„ã€‚</p><p>æ‰‹æ’•vueset</p><h1 id="Vue-extendåŸç†"><a href="#Vue-extendåŸç†" class="headerlink" title="Vue.extendåŸç†"></a>Vue.extendåŸç†</h1><p>ä»–çš„åŸç†æ˜¯ä½¿ç”¨åŸºç¡€vueæ„é€ å™¨ï¼Œåˆ›å»ºä¸€ä¸ªå­ç±»ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«ç»„ä»¶é€‰é¡¹çš„å¯¹è±¡ã€‚</p><p>å…¶å®å°±æ˜¯ä¸€ä¸ªå­ç±»æ„é€ å™¨ï¼Œæ˜¯vueç»„ä»¶çš„æ ¸å¿ƒapi</p><p>å®ç°çš„æ€è·¯æ˜¯ä½¿ç”¨åŸå‹ç»§æ‰¿çš„æ–¹æ³•è¿”å›äº†vueçš„å­ç±»ï¼Œå¹¶ä¸”åˆ©ç”¨mergeOptionæŠŠä¼ å…¥ç»„ä»¶çš„optionså’Œçˆ¶ç±»çš„optionsè¿›è¡Œäº†åˆå¹¶</p><p>æ‰‹æ’•vueextend</p><h1 id="å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å—-åŸç†æ˜¯å•¥"><a href="#å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å—-åŸç†æ˜¯å•¥" class="headerlink" title="å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å— åŸç†æ˜¯å•¥"></a>å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å— åŸç†æ˜¯å•¥</h1><p>æŒ‡ä»¤æœ¬è´¨ä¸Šæ˜¯è£…é¥°å™¨ï¼Œæ˜¯vueå¯¹htmlå…ƒç´ çš„æ‹“å±•ï¼Œç»™htmlå…ƒç´ å¢åŠ è‡ªå®šä¹‰åŠŸèƒ½ã€‚vueç¼–è¯‘domçš„æ—¶å€™ï¼Œä¼šæ‰¾åˆ°æŒ‡ä»¤å¯¹è±¡ï¼Œæ‰§è¡ŒæŒ‡ä»¤ç›¸å…³çš„æ–¹æ³•ã€‚</p><p>è‡ªå®šä¹‰æŒ‡ä»¤æœ‰äº”ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ†åˆ«æ˜¯bindï¼Œinsertedï¼Œupdateï¼ŒcomponentUpdatedï¼Œunbind<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> bind åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ çš„æ—¶å€™è°ƒç”¨ï¼Œåœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚</span><br><span class="line"><span class="number">2.</span> inserted è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹çš„æ—¶å€™è°ƒç”¨ï¼Œåªä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­</span><br><span class="line"><span class="number">3.</span> update è¢«ç»‘å®šäºå…ƒç´ æ‰€åœ¨çš„æ¨¡æ¿æ›´æ–°æ—¶è°ƒç”¨ï¼Œè€Œæ— è®ºç»‘å®šå€¼æ˜¯å¦å˜åŒ–ã€‚é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„ç»‘å®šå€¼ï¼Œå¯ä»¥å¿½ç•¥ä¸å¿…è¦çš„æ›´æ–°ã€‚</span><br><span class="line"><span class="number">4.</span> componentUpdated è¢«ç»‘å®šå…ƒç´ æ‰€åœ¨æ¨¡æ¿å®Œæˆä¸€æ¬¡æ›´æ–°çš„æ—¶å€™è°ƒç”¨ã€‚</span><br><span class="line"><span class="number">5.</span> unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘çš„æ—¶å€™è°ƒç”¨ã€‚</span><br></pre></td></tr></table></figure></p><p>åŸç†</p><ol><li>åœ¨ç”Ÿæˆastè¯­æ³•æ ‘æ—¶ï¼Œé‡åˆ°æŒ‡ä»¤ä¼šç»™å½“å‰å…ƒç´ æ·»åŠ directiveså±æ€§</li><li>é€šè¿‡genDirectivesç”ŸæˆæŒ‡ä»¤ä»£ç </li><li>åœ¨patchå‰å°†æŒ‡ä»¤çš„é’©å­æå–åˆ°cbsä¸­ï¼Œåœ¨patchè¿‡ç¨‹ä¸­è°ƒç”¨å¯¹åº”çš„é’©å­</li><li>å½“æ‰§è¡ŒæŒ‡ä»¤å¯¹åº”çš„é’©å­å‡½æ•°çš„æ—¶å€™ï¼Œè°ƒç”¨å¯¹åº”æŒ‡ä»¤å®šä¹‰çš„æ–¹æ³•ã€‚</li></ol><h1 id="Vueä¿®é¥°ç¬¦æœ‰å“ªäº›"><a href="#Vueä¿®é¥°ç¬¦æœ‰å“ªäº›" class="headerlink" title="Vueä¿®é¥°ç¬¦æœ‰å“ªäº›"></a>Vueä¿®é¥°ç¬¦æœ‰å“ªäº›</h1><p>äº‹ä»¶ä¿®é¥°ç¬¦<br>ä¸ºäº†æ–¹ä¾¿ ä¸‹é¢çš„æŒ‡ä»¤éƒ½çœç•¥.</p><ul><li>stopé˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­</li><li>prevent é˜»æ­¢æ ‡ç­¾é»˜è®¤è¡Œä¸º</li><li>capture ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ï¼Œå³å…ƒç´ è‡ªèº«è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„ç†ï¼Œç„¶åäº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç†</li><li>self åªå½“åœ¨<code>event.target</code>æ˜¯å½“å‰å…ƒç´ çš„æ—¶å€™æ‰è§¦å‘å¤„ç†å‡½æ•°</li><li>once äº‹ä»¶åªä¼šè§¦å‘ä¸€æ¬¡</li><li>passive å‘Šè¯‰æµè§ˆå™¨ä¸è¦é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</li></ul><p>v-modelä¿®é¥°ç¬¦</p><ul><li>lazy é€šè¿‡è¿™ä¸ªä¿®é¥°ç¬¦ï¼Œè½¬å˜ä¸ºåœ¨changeäº‹ä»¶å†åŒæ­¥</li><li>number è‡ªåŠ¨å°†ç”¨æˆ·è¾“å…¥çš„å€¼è½¬æ¢ä¸ºæ•°å€¼ç±»å‹</li><li>trim è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–ä½ç©ºæ ¼</li></ul><p>é”®ç›˜äº‹ä»¶çš„ä¿®é¥°ç¬¦</p><ul><li>enter</li><li>tab</li><li>deleteï¼ˆæ•è·åˆ é™¤ å’Œ é€€æ ¼é”®ï¼‰</li><li>esc</li><li>space</li><li>up down left right</li></ul><p>ç³»ç»Ÿä¿®é¥°ç¬¦</p><ul><li>ctrl </li><li>alt</li><li>shift</li><li>meta</li></ul><p>é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦</p><ul><li>left right middle</li></ul><h1 id="Vueæ¨¡æ¿ç¼–è¯‘åŸç†"><a href="#Vueæ¨¡æ¿ç¼–è¯‘åŸç†" class="headerlink" title="Vueæ¨¡æ¿ç¼–è¯‘åŸç†"></a>Vueæ¨¡æ¿ç¼–è¯‘åŸç†</h1><p>vueçš„ç¼–è¯‘è¿‡ç¨‹å°±æ˜¯å°†templateè½¬åŒ–ä¸ºrenderå‡½æ•°çš„è¿‡ç¨‹ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š<br>ç¬¬ä¸€æ­¥ æ¨¡æ¿å­—ç¬¦ä¸² è½¬åŒ–ä¸ºelements ASTsâ€”è§£æå™¨<br>ç¬¬äºŒæ­¥ å¯¹ASTè¿›è¡Œé™æ€èŠ‚ç‚¹æ ‡è®°ï¼Œä¸»è¦ç”¨æ¥åšè™šæ‹ŸDOMçš„æ¸²æŸ“ä¼˜åŒ–â€”ä¼˜åŒ–å™¨<br>ç¬¬ä¸‰æ­¥ ä½¿ç”¨elements ASTs ç”Ÿæˆrenderå‡½æ•°ä»£ç å­—ç¬¦ä¸²â€”ä»£ç ç”Ÿæˆå™¨</p><p>æ‰‹æ’•æ¨¡æ¿ç¼–è¯‘</p><h1 id="ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„"></a>ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„</h1><p>vueç”Ÿå‘½å‘¨æœŸé’©å­çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼å…ˆæŠŠç”¨æˆ·ä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸé’©å­è®¢é˜…å¥½ï¼Œå†…éƒ¨é‡‡ç”¨æ•°ç»„çš„æ–¹å¼å­˜å‚¨ï¼Œç„¶ååœ¨åˆ›å»ºç»„ä»¶å®ä¾‹çš„è¿‡ç¨‹ä¸­ä¼šä¸€æ¬¡æ‰§è¡Œå¯¹åº”çš„é’©å­æ–¹æ³•â€”å‘å¸ƒ</p><p>æ‰‹æ’•ç”Ÿå‘½å‘¨æœŸé’©å­å®ç°</p><h1 id="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†"><a href="#å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†"></a>å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†</h1><p>å‡½æ•°å¼ç»„ä»¶ä¸æ™®é€šç»„ä»¶çš„åŒºåˆ«</p><ol><li>å‡½æ•°å¼ç»„ä»¶éœ€è¦åœ¨å£°æ˜ç»„ä»¶çš„æ—¶å€™æŒ‡å®š<code>functional:true</code></li><li>ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œæ‰€ä»¥æ²¡æœ‰thisï¼Œä»–çš„thisé€šè¿‡renderå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°contextæ¥ä»£æ›¿</li><li>æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨computedå’Œwatch</li><li>ä¸èƒ½é€šè¿‡emitå¯¹å¤–æš´éœ²äº‹ä»¶ï¼Œè°ƒç”¨äº‹ä»¶åªèƒ½é€šè¿‡<code>context.listeners.click</code>çš„æ–¹å¼è°ƒç”¨å¤–éƒ¨ä¼ å…¥çš„äº‹ä»¶.</li><li>å› ä¸ºå‡½æ•°å¼ç»„ä»¶æ˜¯æ²¡æœ‰å®ä¾‹åŒ–çš„ï¼Œæ‰€ä»¥åœ¨å¤–éƒ¨é€šè¿‡refå»å¼•ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œå®é™…å¼•ç”¨çš„æ˜¯HTMLElement</li><li>å‡½æ•°å¼ç»„ä»¶çš„propså¯ä»¥ä¸ç”¨æ˜¾ç¤ºå£°æ˜ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰propsé‡Œé¢å£°æ˜çš„å±æ€§éƒ½ä¼šè¢«éšå¼çš„è§£æä¸ºpropã€‚</li></ol><p>ä¼˜ç‚¹</p><ol><li>ç”±äºå‡½æ•°å¼ç»„ä»¶ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œæ— çŠ¶æ€ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥æ¸²æŸ“æ€§èƒ½è¦å¥½äºæ™®é€šç»„ä»¶</li><li>å‡½æ•°å¼ç»„ä»¶çš„ç»“æ„æ¯”è¾ƒç®€å•ï¼Œä»£ç ç»“æ„æ¸…æ™°</li></ol><p>ä½¿ç”¨åœºæ™¯ï¼š<br>ä¸€ä¸ªç®€å•çš„å±•ç¤ºç»„ä»¶ï¼Œä½œä¸ºå®¹å™¨ç»„ä»¶çš„ä½¿ç”¨ï¼Œæ¯”å¦‚router-viewå°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶</p><p>é«˜é˜¶ç»„ä»¶â€”ç”¨äºæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè¢«åŒ…è£…çš„ç»„ä»¶</p><p>ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isTrue(Ctor.options.functional)) &#123;</span><br><span class="line">  <span class="comment">// å¸¦æœ‰functionalçš„å±æ€§çš„å°±æ˜¯å‡½æ•°å¼ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">return</span> createFunctionalComponent(Ctor, propsData, data, context, children);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> listeners = data.on;</span><br><span class="line">data.on = data.nativeOn;</span><br><span class="line">installComponentHooks(data); <span class="comment">// å®‰è£…ç»„ä»¶ç›¸å…³é’©å­ ï¼ˆå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰è°ƒç”¨æ­¤æ–¹æ³•ï¼Œä»è€Œæ€§èƒ½é«˜äºæ™®é€šç»„ä»¶ï¼‰</span></span><br></pre></td></tr></table></figure></p><h1 id="èƒ½è¯´ä¸‹vue-routerä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†å—"><a href="#èƒ½è¯´ä¸‹vue-routerä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†å—" class="headerlink" title="èƒ½è¯´ä¸‹vue-routerä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†å—"></a>èƒ½è¯´ä¸‹vue-routerä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†å—</h1><p>hashæ¨¡å¼</p><ol><li>location.hashçš„å€¼å®é™…å°±æ˜¯URLåé¢#çš„ä¸œè¥¿ï¼Œä»–çš„ç‰¹ç‚¹åœ¨äºhashè™½ç„¶å‡ºç°URLä¸­ï¼Œä½†ä¸ä¼šè¢«åŒ…å«åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥æ”¹å˜hashä¸ä¼šé‡æ–°åŠ è½½é¡µé¢</li><li>å¯ä»¥ä¸ºhashçš„æ”¹å˜æ·»åŠ ç›‘å¬äº‹ä»¶<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;hashchange&quot;</span>, funcRef, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>3.æ¯æ”¹å˜ä¸€æ¬¡hashéƒ½ä¼šåœ¨æµè§ˆå™¨çš„è®¿é—®å†å²ä¸­å¢åŠ ä¸€ä¸ªè®°å½•åˆ©ç”¨hashçš„ä»¥ä¸Šç‰¹ç‚¹ï¼Œå°±å¯ä»¥å®ç°å‰ç«¯è·¯ç”±æ›´æ–°è§†å›¾ä½†ä¸è¯·æ±‚é¡µé¢çš„åŠŸèƒ½äº†ã€‚</li></ol><div class="note primary flat"><p>ç‰¹ç‚¹ï¼šå…¼å®¹æ€§å¥½ä½†æ˜¯ä¸ç¾è§‚</p></div><p>historyæ¨¡å¼<br>åˆ©ç”¨äº†HTML5 History Interface ä¸­æ–°å¢çš„pushStateå’ŒreplaceStateæ–¹æ³•</p><p>è¿™ä¸¤ä¸ªæ–¹æ³•åº”ç”¨äºæµè§ˆå™¨çš„å†å²è®°å½•ç«™ï¼Œåœ¨å½“å‰å·²æœ‰çš„backï¼Œforwardï¼Œgoçš„åŸºç¡€ä¸Šï¼Œå®ƒä»¬æä¾›äº†å¯¹å†å²è®°å½•è¿›è¡Œä¿®æ”¹çš„åŠŸèƒ½ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šå½“è°ƒç”¨å®ƒä»¬ä¿®æ”¹çš„æµè§ˆå™¨å†å²è®°å½•æ ˆåï¼Œè™½ç„¶å½“å‰çš„URLæ”¹å˜äº†ï¼Œä½†æ˜¯æµè§ˆå™¨ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œè¿™å°±ä¸ºå•é¡µåº”ç”¨å‰ç«¯è·¯ç”±æ›´æ–°è§†å›¾ä½†ä¸é‡æ–°è¯·æ±‚é¡µé¢æä¾›äº†åŸºç¡€ã€‚<br><div class="note primary flat"><p>ç‰¹ç‚¹ï¼Œè™½ç„¶ç¾è§‚ï¼Œä½†æ˜¯åˆ·æ–°åå‡ºç°404éœ€è¦åç«¯é…ç½®</p></div></p><h1 id="diffç®—æ³•äº†è§£å—"><a href="#diffç®—æ³•äº†è§£å—" class="headerlink" title="diffç®—æ³•äº†è§£å—"></a>diffç®—æ³•äº†è§£å—</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220415135701.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Vueç³»åˆ—" scheme="https://zlinni.github.io/categories/Vue%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Vue" scheme="https://zlinni.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œä¸å®Œå…¨æŒ‡å—</title>
    <link href="https://zlinni.github.io/posts/2992649876/"/>
    <id>https://zlinni.github.io/posts/2992649876/</id>
    <published>2022-04-14T00:20:38.000Z</published>
    <updated>2022-04-25T02:41:30.115Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="tip cogs"><p>æœ¬æ–‡é€šè¿‡OSIä¸ƒå±‚æ¨¡å‹é˜è¿°å‰ç«¯å¸¸è€ƒçš„è®¡ç½‘çŸ¥è¯†ç‚¹</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414082617.png" alt=""></p><h1 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h1><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><div class="tip cogs"><p>å‚è§HTTPçµé­‚ä¹‹é—®</p></div><h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><div class="note primary flat"><p>DNSçš„ä½œç”¨å°±æ˜¯é€šè¿‡åŸŸåæŸ¥è¯¢åˆ°IP</p></div><p>å› ä¸ºIPå­˜åœ¨æ•°å­—å’Œè‹±æ–‡çš„ç»„åˆIPv6ï¼Œå¾ˆä¸åˆ©äºäººç±»è®°å¿†ï¼Œæ‰€ä»¥å‡ºç°äº†åŸŸåã€‚ä½ å¯ä»¥æŠŠåŸŸåçœ‹æˆæŸä¸ªIPçš„åˆ«åï¼ŒDNSå°±æ˜¯å»æŸ¥è¯¢è¿™ä¸ªåˆ«åçœŸæ­£çš„åç§°æ˜¯ä»€ä¹ˆ</p><div class="note primary flat"><p>åœ¨TCPæ¡æ‰‹ä¹‹å‰å°±å·²ç»è¿›è¡Œäº†DNSæŸ¥è¯¢ï¼Œè¿™ä¸ªæŸ¥è¯¢æ˜¯æ“ä½œç³»ç»Ÿè‡ªå·±å®Œæˆçš„ï¼Œå½“åœ¨æµè§ˆå™¨ä¸­æƒ³è®¿é—®<code>www.google.com</code>ä¼šè¿›è¡Œä»¥ä¸‹æ“ä½œã€‚</p></div><ul><li>æœ¬åœ°å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æŸ¥è¯¢ IP åœ°å€</li><li>æŸ¥çœ‹æµè§ˆå™¨æœ‰æ²¡æœ‰è¯¥åŸŸåçš„ IP ç¼“å­˜</li><li>æŸ¥çœ‹æ“ä½œç³»ç»Ÿæœ‰æ²¡æœ‰è¯¥åŸŸåçš„ IP ç¼“å­˜</li><li>æŸ¥çœ‹ Host æ–‡ä»¶æœ‰æ²¡æœ‰è¯¥åŸŸåçš„è§£æé…ç½®</li><li>å¦‚æœè¿™æ—¶å€™è¿˜æ²¡å¾—è¯ï¼Œä¼šé€šè¿‡ç›´æ¥å» DNS æ ¹æœåŠ¡å™¨æŸ¥è¯¢ï¼Œè¿™ä¸€æ­¥æŸ¥è¯¢ä¼šæ‰¾å‡ºè´Ÿè´£ com è¿™ä¸ªä¸€çº§åŸŸåçš„æœåŠ¡å™¨</li><li>ç„¶åå»è¯¥æœåŠ¡å™¨æŸ¥è¯¢ google.com è¿™ä¸ªäºŒçº§åŸŸå</li><li>æ¥ä¸‹æ¥æŸ¥è¯¢ www.google.com è¿™ä¸ªä¸‰çº§åŸŸåçš„åœ°å€</li><li>è¿”å›ç»™ DNS å®¢æˆ·ç«¯å¹¶ç¼“å­˜èµ·æ¥</li></ul><div class="note primary flat"><p>ä»¥ä¸Šä»‹ç»çš„æ˜¯DNSè¿­ä»£æŸ¥è¯¢ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€’å½’æŸ¥è¯¢ï¼ŒåŒºåˆ«æ˜¯å‰è€…æ˜¯ç”±å®¢æˆ·ç«¯å»è¯·æ±‚ï¼Œåè€…æ˜¯ç”±ç³»ç»Ÿé…ç½®çš„DNSå»è¯·æ±‚ï¼Œå¾—åˆ°ç»“æœä¹‹åå°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414083618.png" alt=""></p><h3 id="DNSè§£æä¼˜åŒ–"><a href="#DNSè§£æä¼˜åŒ–" class="headerlink" title="DNSè§£æä¼˜åŒ–"></a>DNSè§£æä¼˜åŒ–</h3><p>ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ–¹æ¡ˆ</p><ul><li>DNSé¢„è§£æ</li><li>å‡å°‘DNSè¯·æ±‚</li></ul><h3 id="DNSé¢„è§£æ"><a href="#DNSé¢„è§£æ" class="headerlink" title="DNSé¢„è§£æ"></a>DNSé¢„è§£æ</h3><div class="note primary flat"><p>DNSè§£æä¹Ÿéœ€è¦æ—¶é—´çš„ï¼Œå¯ä»¥é€šè¿‡é¢„è§£æçš„æ–¹å¼æ¥é¢„å…ˆè·å–åŸŸåæ‰€å¯¹åº”çš„IP</p></div><p>linkæ–¹å¼ï¼šæ‰‹åŠ¨è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//blog.poetries.top&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>metaæ–¹å¼ï¼šhttpsè‡ªåŠ¨è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;x-dns-prefetch-control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;on&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>è®¾ç½®å“åº”å¤´ï¼šè‡ªåŠ¨è§£æ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.set(<span class="string">&#x27;X-DNS-Prefetch-Control&#x27;</span>, <span class="string">&#x27;on&#x27;</span>)</span><br></pre></td></tr></table></figure></p><h1 id="è¡¨ç¤ºå±‚"><a href="#è¡¨ç¤ºå±‚" class="headerlink" title="è¡¨ç¤ºå±‚"></a>è¡¨ç¤ºå±‚</h1><h2 id="URLçš„åŠ å¯†å’Œè§£å¯†"><a href="#URLçš„åŠ å¯†å’Œè§£å¯†" class="headerlink" title="URLçš„åŠ å¯†å’Œè§£å¯†"></a>URLçš„åŠ å¯†å’Œè§£å¯†</h2><h2 id="å›¾ç‰‡ç¼–ç å’Œè§£ç "><a href="#å›¾ç‰‡ç¼–ç å’Œè§£ç " class="headerlink" title="å›¾ç‰‡ç¼–ç å’Œè§£ç "></a>å›¾ç‰‡ç¼–ç å’Œè§£ç </h2><h1 id="ä¼šè¯å±‚"><a href="#ä¼šè¯å±‚" class="headerlink" title="ä¼šè¯å±‚"></a>ä¼šè¯å±‚</h1><h2 id="éªŒè¯ç™»é™†"><a href="#éªŒè¯ç™»é™†" class="headerlink" title="éªŒè¯ç™»é™†"></a>éªŒè¯ç™»é™†</h2><ul><li>cookie session</li><li>token </li><li>sso å•ç‚¹ç™»é™†</li><li>OAuthç¬¬ä¸‰æ–¹ç™»é™†</li></ul><h3 id="cookie-session"><a href="#cookie-session" class="headerlink" title="cookie session"></a>cookie session</h3><p>ç™»é™†æµç¨‹ï¼šé¦–æ¬¡ç™»é™†<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414092439.png" alt=""></p><ol><li>ç”¨æˆ·è®¿é—®<code>a.com/pageA</code>å¹¶è¾“å…¥å¯†ç ç™»é™†</li><li>æœåŠ¡å™¨éªŒè¯å¯†ç æ— è¯¯åï¼Œä¼šåˆ›å»ºSession IDå¹¶å°†å…¶ä¿å­˜èµ·æ¥</li><li>æœåŠ¡ç«¯å“åº”è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶é€šè¿‡Set-Cookieå°†Session IDå†™å…¥Cookieä¸­</li></ol><p>å†æ¬¡ç™»é™†ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414092643.png" alt=""></p><ol><li>ç”¨æˆ·è®¿é—®<code>a.com/pageB</code>è‡ªåŠ¨å¸¦ä¸Šç¬¬ä¸€æ¬¡ç™»é™†å†™å…¥çš„Cookie</li><li>æœåŠ¡ç«¯å¯¹æ¯”Cookieä¸­çš„SessionIDå’Œä¿å­˜åœ¨æœåŠ¡ç«¯çš„SessionIDæ˜¯å¦ä¸€è‡´</li><li>ä¸€è‡´åˆ™æˆåŠŸ</li></ol><h3 id="cookie-sessionå­˜åœ¨çš„é—®é¢˜"><a href="#cookie-sessionå­˜åœ¨çš„é—®é¢˜" class="headerlink" title="cookie sessionå­˜åœ¨çš„é—®é¢˜"></a>cookie sessionå­˜åœ¨çš„é—®é¢˜</h3><ul><li>æœåŠ¡å™¨éœ€è¦å¯¹æ¥å¤§é‡çš„å®¢æˆ·ç«¯ï¼Œå¯¼è‡´æœåŠ¡å™¨å‹åŠ›å¤§ã€‚</li><li>å¦‚æœæœåŠ¡å™¨æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œä¸ºäº†åŒæ­¥ç™»é™†æ€ï¼Œå°±éœ€è¦å°†SessionIDåŒæ­¥åˆ°æ¯ä¸€å°æœºå™¨ä¸Šï¼Œæ— å½¢ä¸­å¢åŠ äº†æœåŠ¡å™¨çš„ç»´æŠ¤æˆæœ¬ã€‚</li><li>ç”±äºSessionIDå­˜æ”¾åœ¨Cookieä¸­æ‰€ä»¥æ— æ³•é¿å…CSRFæ”»å‡»</li></ul><h3 id="tokenç™»é™†"><a href="#tokenç™»é™†" class="headerlink" title="tokenç™»é™†"></a>tokenç™»é™†</h3><p>ä¸ºäº†è§£å†³cookie+sessionæš´éœ²å‡ºæ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨tokençš„ç™»é™†æ–¹å¼<br><div class="note primary flat"><p>tokenæ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä»¥ä½œä¸ºå®¢æˆ·ç«¯è¯·æ±‚çš„ä¸€ä¸ªä»¤ç‰Œã€‚å½“ç¬¬ä¸€æ¬¡ç™»é™†å®Œæˆåï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªtokenå¹¶è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åç»­è®¿é—®åªè¦å¸¦ä¸Šè¿™ä¸ªtokenå°±å¯ä»¥å®Œæˆèº«ä»½éªŒè¯ã€‚</p></div></p><h4 id="tokenæœºåˆ¶å®ç°æµç¨‹"><a href="#tokenæœºåˆ¶å®ç°æµç¨‹" class="headerlink" title="tokenæœºåˆ¶å®ç°æµç¨‹"></a>tokenæœºåˆ¶å®ç°æµç¨‹</h4><p>é¦–æ¬¡ç™»é™†ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414102745.png" alt=""></p><ol><li>ç”¨æˆ·è¾“å…¥è´¦å·å¯†ç ï¼Œå¹¶ç‚¹å‡»ç™»å½•ã€‚</li><li>æœåŠ¡å™¨ç«¯éªŒè¯è´¦å·å¯†ç æ— è¯¯ï¼Œåˆ›å»º Tokenã€‚</li><li>æœåŠ¡å™¨ç«¯å°† Token è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œç”±å®¢æˆ·ç«¯è‡ªç”±ä¿å­˜ã€‚</li></ol><p>åç»­é¡µé¢è®¿é—®æ—¶ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414102830.png" alt=""></p><ol><li>ç”¨æˆ·è®¿é—® a.com/pageB æ—¶ï¼Œå¸¦ä¸Šç¬¬ä¸€æ¬¡ç™»å½•æ—¶è·å–çš„ Tokenã€‚</li><li>æœåŠ¡å™¨ç«¯éªŒè¯ Token ï¼Œæœ‰æ•ˆåˆ™èº«ä»½éªŒè¯æˆåŠŸã€‚</li></ol><h4 id="Token-æœºåˆ¶çš„ç‰¹ç‚¹"><a href="#Token-æœºåˆ¶çš„ç‰¹ç‚¹" class="headerlink" title="Token æœºåˆ¶çš„ç‰¹ç‚¹"></a>Token æœºåˆ¶çš„ç‰¹ç‚¹</h4><p>æ ¹æ®ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºTokençš„ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>æœåŠ¡å™¨ç«¯ä¸éœ€è¦å­˜æ”¾tokenï¼Œæ‰€ä»¥ä¸ä¼šå¯¹æœåŠ¡å™¨é€ æˆå‹åŠ›ï¼Œå³ä½¿æœåŠ¡å™¨é›†ç¾¤ï¼Œä¹Ÿä¸éœ€è¦å¢åŠ ç»´æŠ¤æˆæœ¬ã€‚</li><li>Tokenå¯ä»¥å­˜æ”¾åœ¨å‰ç«¯çš„ä»»ä½•åœ°æ–¹ï¼Œå¯ä»¥ä¸ç”¨ä¿å­˜åœ¨Cookieä¸­ï¼Œæå‡äº†é¡µé¢çš„å®‰å…¨æ€§ã€‚</li><li>Tokenä¸‹å‘ä¹‹åï¼Œåªè¦åœ¨ç”Ÿæ•ˆæ—¶é—´å†…ï¼Œå°±ä¸€ç›´æœ‰æ•ˆï¼Œå¦‚æœæœåŠ¡å™¨æƒ³æ”¶å›æ­¤tokençš„æƒé™ï¼Œå¹¶ä¸å®¹æ˜“ã€‚</li></ul><h4 id="Tokençš„ç”Ÿæˆæ–¹å¼"><a href="#Tokençš„ç”Ÿæˆæ–¹å¼" class="headerlink" title="Tokençš„ç”Ÿæˆæ–¹å¼"></a>Tokençš„ç”Ÿæˆæ–¹å¼</h4><p>æœ€å¸¸è§çš„Tokenç”Ÿæˆæ–¹å¼æ˜¯ä½¿ç”¨JWTï¼Œä»–æ˜¯ä¸€ç§ç®€æ´çš„ï¼Œè‡ªåŒ…å«çš„æ–¹æ³•ç”¨äºé€šä¿¡åŒæ–¹ä¹‹é—´ä»¥JSONå¯¹è±¡çš„å½¢å¼å®‰å…¨çš„ä¼ é€’ä¿¡æ¯ã€‚</p><p>ä¸Šæ–‡ä¸­æˆ‘ä»¬è¯´åˆ°ï¼Œä½¿ç”¨Tokenåï¼ŒæœåŠ¡å™¨ç«¯å¹¶ä¸ä¼šå­˜å‚¨Tokenï¼Œé‚£æ€ä¹ˆåˆ¤æ–­å®¢æˆ·ç«¯çš„tokenæ˜¯å¦åˆæ³•æœ‰æ•ˆï¼Ÿ</p><p>ç­”æ¡ˆå…¶å®å°±åœ¨Tokenå­—ç¬¦ä¸²ä¸­ï¼Œå…¶å®Tokenå¹¶ä¸æ˜¯ä¸€ä¸²æ‚ä¹±æ— ç« çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯é€šè¿‡å¤šç§ç®—æ³•æ‹¼æ¥ç»„åˆè€Œæˆçš„å­—ç¬¦ä¸²ã€‚å¦‚ä¸‹ï¼š</p><p>JWTç®—æ³•ä¸»è¦åˆ†æˆäº†ä¸‰ä¸ªéƒ¨åˆ† </p><ul><li>header å¤´ä¿¡æ¯</li><li>payload æ¶ˆæ¯ä½“</li><li>signature ç­¾å</li></ul><p>headeréƒ¨åˆ†æŒ‡å®šäº†JWTä½¿ç”¨çš„ç­¾åç®—æ³•ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header = <span class="string">&#x27;&#123;&quot;alg&quot;:&quot;HS256&quot;,&quot;typ&quot;:&quot;JWT&quot;&#125;&#x27;</span>   <span class="comment">// `HS256` è¡¨ç¤ºä½¿ç”¨äº† HMAC-SHA256 æ¥ç”Ÿæˆç­¾åã€‚</span></span><br></pre></td></tr></table></figure></p><p>payloadéƒ¨åˆ†æŒ‡æ˜äº†JWTçš„ä½¿ç”¨æ„å›¾<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">payload = <span class="string">&#x27;&#123;&quot;loggedInAs&quot;:&quot;admin&quot;,&quot;iat&quot;:1422779638&#125;&#x27;</span>     <span class="comment">//iat è¡¨ç¤ºä»¤ç‰Œç”Ÿæˆçš„æ—¶é—´</span></span><br></pre></td></tr></table></figure></p><p>signatureéƒ¨åˆ†ä¸ºJWTçš„ç­¾å ä¸»è¦ä¸ºäº†è®©JWTä¸èƒ½éšæ„æ›´æ”¹ï¼Œç­¾åçš„æ–¹æ³•åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤</p><ol><li>è¾“å…¥base64urlç¼–ç çš„headeréƒ¨åˆ†ï¼Œbase64urlç¼–ç çš„payloadéƒ¨åˆ†ï¼Œè¾“å‡ºunsignedToken</li><li>è¾“å…¥æœåŠ¡å™¨ç«¯ç§é’¥ï¼ŒunsignedToken,è¾“å‡ºsignatureç­¾å</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> base64Header = encodeBase64(header)</span><br><span class="line"><span class="keyword">const</span> base64Payload = encodeBase64(payload)</span><br><span class="line"><span class="keyword">const</span> unsignedToken = <span class="string">`<span class="subst">$&#123;base64Header&#125;</span>.<span class="subst">$&#123;base64Payload&#125;</span>`</span></span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&#x27;æœåŠ¡å™¨ç§é’¥&#x27;</span></span><br><span class="line"></span><br><span class="line">signature = HMAC(key, unsignedToken)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€åTokenè®¡ç®—å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> base64Header = encodeBase64(header)</span><br><span class="line"><span class="keyword">const</span> base64Payload = encodeBase64(payload)</span><br><span class="line"><span class="keyword">const</span> base64Signature = encodeBase64(signature)</span><br><span class="line"></span><br><span class="line">token = <span class="string">`<span class="subst">$&#123;base64Header&#125;</span>.<span class="subst">$&#123;base64Payload&#125;</span>.<span class="subst">$&#123;base64Signature&#125;</span>`</span></span><br></pre></td></tr></table></figure></p><p>æœåŠ¡å™¨åœ¨åˆ¤æ–­tokençš„æ—¶å€™<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [base64Header, base64Payload, base64Signature] = token.split(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> signature1 = decodeBase64(base64Signature)</span><br><span class="line"><span class="keyword">const</span> unsignedToken = <span class="string">`<span class="subst">$&#123;base64Header&#125;</span>.<span class="subst">$&#123;base64Payload&#125;</span>`</span></span><br><span class="line"><span class="keyword">const</span> signature2 = HMAC(<span class="string">&#x27;æœåŠ¡å™¨ç§é’¥&#x27;</span>, unsignedToken)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(signature1 === signature2) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;ç­¾åéªŒè¯æˆåŠŸï¼Œtoken æ²¡æœ‰è¢«ç¯¡æ”¹&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> payload =  decodeBase64(base64Payload)</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">new</span> <span class="built_in">Date</span>() - payload.iat &lt; <span class="string">&#x27;token æœ‰æ•ˆæœŸ&#x27;</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;token æœ‰æ•ˆ&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰äº† Token ä¹‹åï¼Œç™»å½•æ–¹å¼å·²ç»å˜å¾—éå¸¸é«˜æ•ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»å¦å¤–ä¸¤ç§ç™»å½•æ–¹å¼ã€‚</p><h3 id="SSOå•ç‚¹ç™»é™†"><a href="#SSOå•ç‚¹ç™»é™†" class="headerlink" title="SSOå•ç‚¹ç™»é™†"></a>SSOå•ç‚¹ç™»é™†</h3><div class="note primary flat"><p>å•ç‚¹ç™»é™†æŒ‡çš„æ˜¯åœ¨å…¬å¸å†…éƒ¨æ­å»ºä¸€ä¸ªå…¬å…±çš„è®¤è¯ä¸­å¿ƒï¼Œå…¬å¸ä¸‹çš„æ‰€æœ‰äº§å“çš„ç™»é™†éƒ½å¯ä»¥åœ¨è®¤è¯ä¸­å¿ƒä¸­å®Œæˆï¼Œä¸€ä¸ªäº§å“åœ¨è®¤è¯ä¸­å¿ƒç™»é™†åï¼Œå†å»è®¿é—®å¦å¤–ä¸€ä¸ªäº§å“ï¼Œå¯ä»¥ä¸ç”¨å†æ¬¡ç™»é™†ï¼Œå³å¯è·å–ç™»é™†çŠ¶æ€ã€‚</p></div><h4 id="SSOæœºåˆ¶å®ç°æµç¨‹"><a href="#SSOæœºåˆ¶å®ç°æµç¨‹" class="headerlink" title="SSOæœºåˆ¶å®ç°æµç¨‹"></a>SSOæœºåˆ¶å®ç°æµç¨‹</h4><p>ç”¨æˆ·é¦–æ¬¡è®¿é—®éœ€è¦åœ¨è®¤è¯ä¸­å¿ƒç™»é™†</p><h2 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h2><p><a href="https://juejin.cn/post/6844904046436843527">https://juejin.cn/post/6844904046436843527</a></p><h1 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h1><h2 id="TCPå’ŒUDP"><a href="#TCPå’ŒUDP" class="headerlink" title="TCPå’ŒUDP"></a>TCPå’ŒUDP</h2><div class="note primary flat"><ol><li>tcpæ˜¯é¢å‘é“¾æ¥çš„ udpæ˜¯æ— è¿æ¥çš„å³å‘é€æ•°æ®å‰ä¸éœ€è¦å»ºç«‹è¿æ¥</li><li>tcpæä¾›å¯é çš„æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡tcpè¿æ¥å‘é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾ï¼Œudpå°½æœ€å¤§çš„åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ã€‚å¹¶ä¸”å› ä¸ºtcpå¯é ï¼Œé¢å‘è¿æ¥ï¼Œä¸ä¼šä¸¢å¤±æ•°æ®å› æ­¤é€‚åˆå¤§æ•°æ®é‡çš„äº¤æ¢</li><li>tcpæ˜¯é¢å‘å­—èŠ‚æµï¼Œudpé¢å‘æŠ¥æ–‡ï¼Œå¹¶ä¸”ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿å¾—å‘é€é€Ÿç‡é™ä½ï¼ˆå› æ­¤ä¼šäº§ç”Ÿä¸¢åŒ…ï¼Œå¯¹å®æ—¶çš„åº”ç”¨æ¯”å¦‚ipç”µè¯å’Œè§†é¢‘ä¼šè®®ç­‰ï¼‰</li><li>tcpåªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œudpæ”¯æŒ1å¯¹1 1å¯¹å¤š</li><li>tcpçš„é¦–éƒ¨è¾ƒå¤§ä¸º20å­—èŠ‚ udpåªæœ‰8å­—èŠ‚</li><li>tcpæ˜¯é¢å‘è¿æ¥çš„å¯é æ€§ä¼ è¾“ï¼Œudpæ˜¯ä¸å¯é çš„ </li></ol></div><h3 id="å¸¸è§ä½¿ç”¨åœºæ™¯"><a href="#å¸¸è§ä½¿ç”¨åœºæ™¯" class="headerlink" title="å¸¸è§ä½¿ç”¨åœºæ™¯"></a>å¸¸è§ä½¿ç”¨åœºæ™¯</h3><p>UDPï¼š</p><ul><li>ç›´æ’­</li><li>æ¸¸æˆ</li></ul><h3 id="TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹</h3><div class="note primary flat"><p>å»ºç«‹è¿æ¥å‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦é€šè¿‡æ¡æ‰‹æ¥ç¡®è®¤å¯¹æ–¹</p></div><ul><li>å®¢æˆ·ç«¯å‘é€SYNåŒæ­¥åºåˆ—ç¼–å·è¯·æ±‚ï¼Œè¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…ç¡®è®¤</li><li>æœåŠ¡ç«¯æ¥æ”¶å¹¶ç¡®è®¤SYNåŒ…ä¹‹åå‘é€SYN+ACKåŒ…ï¼Œè¿›å…¥SYN_RECVçŠ¶æ€</li><li>å®¢æˆ·ç«¯æ¥æ”¶SYN+ACKåŒ…ä¹‹åï¼Œå‘é€ACKåŒ…ï¼ŒåŒæ–¹è¿›å…¥ESTABLISHEDçŠ¶æ€</li></ul><h4 id="ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</h4><p>ä¸¾ä¾‹ï¼šå·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µ</p><ul><li>å¦‚æœå®¢æˆ·ç«¯å‘é€è¯·æ±‚æŠ¥æ–‡ä½†ç”±äºç½‘ç»œé—®é¢˜å¯¼è‡´æŠ¥æ–‡å¤±æ•ˆï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åå°±ä¼šå‘é€ç¡®è®¤æŠ¥æ–‡è¡¨ç¤ºåŒæ„è¿æ¥ã€‚æ­¤æ—¶å¦‚æœæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡ç«¯å·²ç»å»ºç«‹äº†æ–°çš„è¿æ¥ï¼Œä½†ç”±äºè¿™ä¸ªè¯·æ±‚æ˜¯å¤±æ•ˆçš„ï¼Œå®¢æˆ·ç«¯å¹¶æ²¡æœ‰å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡ç«¯å°±ä¼šæµªè´¹å¾ˆå¤šèµ„æºã€‚å¦‚æœæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡ç«¯æ”¶ä¸åˆ°ç¡®è®¤è¿æ¥çš„ä¿¡æ¯ï¼Œå°±çŸ¥é“å®¢æˆ·ç«¯æ²¡æœ‰å»ºç«‹è¿æ¥ã€‚è¿™å°±æ˜¯ä¸‰æ¬¡æ¡æ‰‹çš„ä½œç”¨ã€‚<div class="note primary flat"><p>TCPæœ‰å…­ç§æ ‡è¯†SYNå»ºç«‹è¿æ¥ï¼ŒACKç¡®è®¤ï¼ŒPSHä¼ é€ï¼ŒFINç»“æŸï¼ŒRSTé‡ç½®ï¼ŒURGç´§æ€¥</p></div></li></ul><h4 id="ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ"><a href="#ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ"></a>ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ</h4><ul><li>ç¬¬ä¸€æ¬¡ç¬¬äºŒæ¬¡æ¡æ‰‹ä¸èƒ½æºå¸¦æ•°æ®ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æ¡æ‰‹å’Œç¬¬äºŒæ¬¡æ¡æ‰‹æœåŠ¡ç«¯è¿˜æ²¡æœ‰å»ºç«‹è¿æ¥ï¼Œæ­¤æ—¶å‘é€æ•°æ®ä¼šè®©æœåŠ¡å™¨å—åˆ°æ”»å‡»ã€‚</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹æœåŠ¡å™¨å·²ç»å¤„äºESTABLISHEDçŠ¶æ€ï¼Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´å·²ç»å»ºç«‹äº†è¿æ¥ï¼Œå¹¶ä¸”ä¹ŸçŸ¥é“æœåŠ¡å™¨çš„æ¥æ”¶å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„äº†ï¼Œæ‰€ä»¥èƒ½æºå¸¦æ•°æ®ã€‚</li></ul><h3 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h3><div class="note primary flat"><p>ä¸ºäº†ç¡®ä¿æ•°æ®èƒ½å®Œæˆä¼ è¾“</p></div><ul><li>å®¢æˆ·ç«¯â€”FINâ€”&gt;æœåŠ¡ç«¯ï¼ŒFINâ€”â€”WAIT</li><li>æœåŠ¡ç«¯â€”ACKâ€”&gt;å®¢æˆ·ç«¯ï¼ŒCLOSEâ€”â€”WAIT</li><li>æœåŠ¡ç«¯â€”ACKï¼ŒFINâ€”&gt;å®¢æˆ·ç«¯ï¼ŒLASTâ€”â€”ACK</li><li>å®¢æˆ·ç«¯â€”ACKâ€”&gt;æœåŠ¡ç«¯ï¼ŒCLOSED</li></ul><h4 id="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™æ˜¯å››æ¬¡æŒ¥æ‰‹ï¼Ÿ</h4><ul><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„SYNè¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œå¯ä»¥ç›´æ¥å‘é€SYN+ACKæŠ¥æ–‡ã€‚</li><li>ä½†æ˜¯åœ¨å…³é—­è¿æ¥çš„æ—¶å€™ï¼Œå½“æœåŠ¡ç«¯æ”¶åˆ°FINæŠ¥æ–‡çš„æ—¶å€™ ï¼Œå¾ˆå¯èƒ½å¹¶ä¸ä¼šç«‹åˆ»å…³é—­è¿æ¥ï¼Œæ‰€ä»¥åªèƒ½å…ˆå›å¤ä¸€ä¸ªACKæŠ¥æ–‡ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼Œä½ å‘çš„FINæŠ¥æ–‡æ”¶åˆ°äº†ï¼Œåªæœ‰ç­‰æœåŠ¡å™¨æ‰€æœ‰çš„æŠ¥æ–‡å‘é€å®Œäº†æ‰èƒ½å‘é€FINæŠ¥æ–‡ï¼Œå› æ­¤ä¸èƒ½ä¸€èµ·å‘é€ï¼Œæ•…éœ€è¦å››æ¬¡æŒ¥æ‰‹ã€‚ </li></ul><h3 id="æ‹¥å¡æ§åˆ¶"><a href="#æ‹¥å¡æ§åˆ¶" class="headerlink" title="æ‹¥å¡æ§åˆ¶"></a>æ‹¥å¡æ§åˆ¶</h3><div class="note primary flat"><p>ç½‘ç»œæ‹¥å¡ï¼ˆcongestionï¼‰æ˜¯æŒ‡åœ¨åˆ†ç»„äº¤æ¢ç½‘ç»œä¸­ä¼ é€åˆ†ç»„çš„æ•°ç›®å¤ªå¤šæ—¶ï¼Œç”±äºå­˜å‚¨è½¬å‘èŠ‚ç‚¹çš„èµ„æºæœ‰é™è€Œé€ æˆç½‘ç»œä¼ è¾“æ€§èƒ½ä¸‹é™çš„æƒ…å†µã€‚å½“ç½‘ç»œå‘ç”Ÿæ‹¥å¡æ—¶ï¼Œä¸€èˆ¬ä¼šå‡ºç°æ•°æ®ä¸¢å¤±ï¼Œæ—¶å»¶å¢åŠ ï¼Œååé‡ä¸‹é™ï¼Œä¸¥é‡æ—¶ç”šè‡³ä¼šå¯¼è‡´â€œæ‹¥å¡å´©æºƒâ€ï¼ˆcongestion collapseï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“ç½‘ç»œä¸­è´Ÿè½½è¿‡åº¦å¢åŠ è‡´ä½¿ç½‘ç»œæ€§èƒ½ä¸‹é™æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç½‘ç»œæ‹¥å¡ã€‚ä¸‹å›¾åˆ™æè¿°äº†åœ¨æœ‰æ— æ‹¥å¡æ§åˆ¶çš„å¹²é¢„ä¸‹ï¼Œç½‘ç»œååé‡éšè¾“å…¥è´Ÿè½½çš„å¢åŠ çš„å˜åŒ–æƒ…å†µã€‚</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220423112204.png" alt=""><br>é€šè¿‡ä»¥ä¸Šçš„æè¿°ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>ç½‘ç»œæ‹¥å¡å¾€å¾€æ˜¯ç”±äºå¯¹èµ„æºçš„è¯·æ±‚è¶…å‡ºäº†å­˜å‚¨è½¬å‘èŠ‚ç‚¹çš„èƒ½åŠ›è€Œå¯¼è‡´çš„ã€‚</li><li>ç½‘ç»œæ‹¥å¡å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæ—¶å»¶å¢åŠ ï¼Œååé‡ä¸‹é™ç­‰é—®é¢˜ã€‚</li><li>è‹¥å‡ºç°æ‹¥å¡è€Œä¸è¿›è¡Œæ§åˆ¶ï¼Œæœ‰å¯èƒ½ä¼šä½¿æ•´ä¸ªç½‘ç»œæƒ…å†µæ¶åŒ–ï¼Œç”šè‡³ç½‘ç»œååé™ä¸º0ã€‚</li><li>ç½‘ç»œçš„æ‹¥å¡çŠ¶å†µä¸å½“å‰ç½‘ç»œè´Ÿè½½æ˜¯å¯†åˆ‡ç›¸å…³çš„ã€‚</li></ul><h4 id="æ‹¥å¡æ§åˆ¶ç®—æ³•"><a href="#æ‹¥å¡æ§åˆ¶ç®—æ³•" class="headerlink" title="æ‹¥å¡æ§åˆ¶ç®—æ³•"></a>æ‹¥å¡æ§åˆ¶ç®—æ³•</h4><ol><li>æ…¢å¯åŠ¨</li><li>æ‹¥å¡é¿å…</li><li>å¿«é‡ä¼ </li><li>å¿«æ¢å¤</li></ol><h3 id="æµé‡æ§åˆ¶"><a href="#æµé‡æ§åˆ¶" class="headerlink" title="æµé‡æ§åˆ¶"></a>æµé‡æ§åˆ¶</h3><p>å¦‚æœå‘é€æ–¹çš„æ•°æ®å‘é€è¿‡å¿«ï¼Œæ¥æ”¶è€…æ¥ä¸åŠæ¥æ”¶ï¼Œå°±æœ‰åˆ†ç»„ä¸¢å¤±ã€‚ä¸ºäº†é¿å…åˆ†ç»„ä¸¢å¤±ï¼Œæ§åˆ¶å‘é€è€…çš„å‘é€é€Ÿåº¦ï¼Œä½¿å¾—æ¥æ”¶è€…æ¥å¾—åŠæ¥æ”¶ï¼Œè¿™å°±æ˜¯æµé‡æ§åˆ¶ã€‚</p><p>æµé‡æ§åˆ¶çš„æ ¹æœ¬ç›®çš„æ˜¯é˜²æ­¢åˆ†ç»„ä¸¢å¤±ï¼Œå®ƒæ˜¯æ„æˆTCPå¯é æ€§çš„ä¸€æ–¹é¢</p><h4 id="å®ç°æµé‡æ§åˆ¶"><a href="#å®ç°æµé‡æ§åˆ¶" class="headerlink" title="å®ç°æµé‡æ§åˆ¶"></a>å®ç°æµé‡æ§åˆ¶</h4><p>æ»‘åŠ¨çª—å£åè®®ï¼ˆè¿ç»­ARQåè®®ï¼‰å®ç°ã€‚å®ƒä¿è¯äº†åˆ†ç»„æ— å·®é”™ï¼Œæœ‰åºæ¥æ”¶ï¼Œä¹Ÿå®ç°äº†æµé‡æ§åˆ¶ã€‚</p><p>ä¸»è¦çš„æ–¹å¼æ˜¯ æ¥æ”¶æ–¹è¿”å›çš„ackåŒ…ä¼šåŒ…å«è‡ªå·±æ¥æ”¶çª—å£çš„å¤§å°ï¼Œå¹¶ä¸”åˆ©ç”¨å¤§å°æ¥æ§åˆ¶å‘é€æ–¹çš„æ•°æ®å‘é€</p><h4 id="æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ-æ²¡çœ‹æ˜ç™½"><a href="#æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ-æ²¡çœ‹æ˜ç™½" class="headerlink" title="æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ(æ²¡çœ‹æ˜ç™½)"></a>æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼Ÿæ€ä¹ˆé¿å…æ­»é”å‘ç”Ÿï¼Ÿ(æ²¡çœ‹æ˜ç™½)</h4><p>å½“å‘é€è€…æ”¶åˆ°äº†ä¸€ä¸ªçª—å£ä¸º0çš„åº”ç­”ï¼Œå‘é€è€…ä¾¿åœæ­¢å‘é€ï¼Œç­‰å¾…æ¥æ”¶è€…çš„ä¸‹ä¸€ä¸ªåº”ç­”ã€‚ä½†æ˜¯å¦‚æœè¿™ä¸ªçª—å£ä¸ä¸º0çš„åº”ç­”åœ¨ä¼ è¾“è¿‡ç¨‹ä¸¢å¤±ï¼Œå‘é€è€…ä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œè€Œæ¥æ”¶è€…ä»¥ä¸ºå‘é€è€…å·²ç»æ”¶åˆ°è¯¥åº”ç­”ï¼Œç­‰å¾…æ¥æ”¶æ–°æ•°æ®ï¼Œè¿™æ ·åŒæ–¹å°±ç›¸äº’ç­‰å¾…ï¼Œä»è€Œäº§ç”Ÿæ­»é”ã€‚ä¸ºäº†é¿å…æµé‡æ§åˆ¶å¼•å‘çš„æ­»é”ï¼ŒTCPä½¿ç”¨äº†æŒç»­è®¡æ—¶å™¨ã€‚æ¯å½“å‘é€è€…æ”¶åˆ°ä¸€ä¸ªé›¶çª—å£çš„åº”ç­”åå°±å¯åŠ¨è¯¥è®¡æ—¶å™¨ã€‚æ—¶é—´ä¸€åˆ°ä¾¿ä¸»åŠ¨å‘é€æŠ¥æ–‡è¯¢é—®æ¥æ”¶è€…çš„çª—å£å¤§å°ã€‚è‹¥æ¥æ”¶è€…ä»ç„¶è¿”å›é›¶çª—å£ï¼Œåˆ™é‡ç½®è¯¥è®¡æ—¶å™¨ç»§ç»­ç­‰å¾…ï¼›è‹¥çª—å£ä¸ä¸º0ï¼Œåˆ™è¡¨ç¤ºåº”ç­”æŠ¥æ–‡ä¸¢å¤±äº†ï¼Œæ­¤æ—¶é‡ç½®å‘é€çª—å£åå¼€å§‹å‘é€ï¼Œè¿™æ ·å°±é¿å…äº†æ­»é”çš„äº§ç”Ÿã€‚</p><h4 id="æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«"><a href="#æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«" class="headerlink" title="æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«"></a>æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶çš„åŒºåˆ«</h4><p>æ‹¥å¡æ§åˆ¶å°±æ˜¯ä½œç”¨äºç½‘ç»œçš„ï¼Œå®ƒæ˜¯é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œé¿å…å‡ºç°ç½‘ç»œè´Ÿè½½è¿‡å¤§çš„æƒ…å†µã€‚å¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼šæ…¢å¼€å§‹ï¼Œæ‹¥å¡é¿å…ï¼Œå¿«é‡ä¼ ï¼Œå¿«æ¢å¤ã€‚</p><p>æµé‡æ§åˆ¶å°±æ˜¯ä½œç”¨äºæ¥æ”¶è€…çš„ï¼Œå®ƒæ˜¯æ§åˆ¶å‘é€è€…çš„å‘é€é€Ÿåº¦ä»è€Œä½¿å¾—æ¥æ”¶è€…æ¥å¾—åŠæ¥æ”¶ï¼Œé˜²æ­¢åˆ†ç»„ä¸¢å¤±</p><h1 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h1><h2 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h2><h1 id="æ•°æ®é“¾è·¯å±‚"><a href="#æ•°æ®é“¾è·¯å±‚" class="headerlink" title="æ•°æ®é“¾è·¯å±‚"></a>æ•°æ®é“¾è·¯å±‚</h1><h1 id="ç‰©ç†å±‚"><a href="#ç‰©ç†å±‚" class="headerlink" title="ç‰©ç†å±‚"></a>ç‰©ç†å±‚</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç½‘ç»œç³»åˆ—" scheme="https://zlinni.github.io/categories/%E7%BD%91%E7%BB%9C%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://zlinni.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
</feed>
